(function(e){function t(t){for(var i,s,a=t[0],l=t[1],u=t[2],p=0,d=[];p<a.length;p++)s=a[p],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&d.push(r[s][0]),r[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(e[i]=l[i]);c&&c(t);while(d.length)d.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],i=!0,a=1;a<n.length;a++){var l=n[a];0!==r[l]&&(i=!1)}i&&(o.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},r={app:0},o=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(){return Promise.resolve()},s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="",s.oe=function(e){throw console.error(e),e};var a=window["webpackJsonp"]=window["webpackJsonp"]||[],l=a.push.bind(a);a.push=t,a=a.slice();for(var u=0;u<a.length;u++)t(a[u]);var c=l;o.push(["56d7","chunk-vendors"]),n()})({"034f":function(e,t,n){"use strict";var i=n("8a23"),r=n.n(i);r.a},"0999":function(e,t,n){"use strict";var i=n("eca1"),r=n.n(i);r.a},"26fc":function(e,t,n){},"29d5":function(e,t,n){"use strict";var i=n("a910"),r=n.n(i);r.a},"2a13":function(e,t,n){"use strict";var i=n("82ac"),r=n.n(i);r.a},"3fd6":function(e,t,n){},4678:function(e,t,n){var i={"./af":"2bfb","./af.js":"2bfb","./ar":"8e73","./ar-dz":"a356","./ar-dz.js":"a356","./ar-kw":"423e","./ar-kw.js":"423e","./ar-ly":"1cfd","./ar-ly.js":"1cfd","./ar-ma":"0a84","./ar-ma.js":"0a84","./ar-sa":"8230","./ar-sa.js":"8230","./ar-tn":"6d83","./ar-tn.js":"6d83","./ar.js":"8e73","./az":"485c","./az.js":"485c","./be":"1fc1","./be.js":"1fc1","./bg":"84aa","./bg.js":"84aa","./bm":"a7fa","./bm.js":"a7fa","./bn":"9043","./bn.js":"9043","./bo":"d26a","./bo.js":"d26a","./br":"6887","./br.js":"6887","./bs":"2554","./bs.js":"2554","./ca":"d716","./ca.js":"d716","./cs":"3c0d","./cs.js":"3c0d","./cv":"03ec","./cv.js":"03ec","./cy":"9797","./cy.js":"9797","./da":"0f14","./da.js":"0f14","./de":"b469","./de-at":"b3eb","./de-at.js":"b3eb","./de-ch":"bb71","./de-ch.js":"bb71","./de.js":"b469","./dv":"598a","./dv.js":"598a","./el":"8d47","./el.js":"8d47","./en-SG":"cdab","./en-SG.js":"cdab","./en-au":"0e6b","./en-au.js":"0e6b","./en-ca":"3886","./en-ca.js":"3886","./en-gb":"39a6","./en-gb.js":"39a6","./en-ie":"e1d3","./en-ie.js":"e1d3","./en-il":"7333","./en-il.js":"7333","./en-nz":"6f50","./en-nz.js":"6f50","./eo":"65db","./eo.js":"65db","./es":"898b","./es-do":"0a3c","./es-do.js":"0a3c","./es-us":"55c9","./es-us.js":"55c9","./es.js":"898b","./et":"ec18","./et.js":"ec18","./eu":"0ff2","./eu.js":"0ff2","./fa":"8df4","./fa.js":"8df4","./fi":"81e9","./fi.js":"81e9","./fo":"0721","./fo.js":"0721","./fr":"9f26","./fr-ca":"d9f8","./fr-ca.js":"d9f8","./fr-ch":"0e49","./fr-ch.js":"0e49","./fr.js":"9f26","./fy":"7118","./fy.js":"7118","./ga":"5120","./ga.js":"5120","./gd":"f6b4","./gd.js":"f6b4","./gl":"8840","./gl.js":"8840","./gom-latn":"0caa","./gom-latn.js":"0caa","./gu":"e0c5","./gu.js":"e0c5","./he":"c7aa","./he.js":"c7aa","./hi":"dc4d","./hi.js":"dc4d","./hr":"4ba9","./hr.js":"4ba9","./hu":"5b14","./hu.js":"5b14","./hy-am":"d6b6","./hy-am.js":"d6b6","./id":"5038","./id.js":"5038","./is":"0558","./is.js":"0558","./it":"6e98","./it-ch":"6f12","./it-ch.js":"6f12","./it.js":"6e98","./ja":"079e","./ja.js":"079e","./jv":"b540","./jv.js":"b540","./ka":"201b","./ka.js":"201b","./kk":"6d79","./kk.js":"6d79","./km":"e81d","./km.js":"e81d","./kn":"3e92","./kn.js":"3e92","./ko":"22f8","./ko.js":"22f8","./ku":"2421","./ku.js":"2421","./ky":"9609","./ky.js":"9609","./lb":"440c","./lb.js":"440c","./lo":"b29d","./lo.js":"b29d","./lt":"26f9","./lt.js":"26f9","./lv":"b97c","./lv.js":"b97c","./me":"293c","./me.js":"293c","./mi":"688b","./mi.js":"688b","./mk":"6909","./mk.js":"6909","./ml":"02fb","./ml.js":"02fb","./mn":"958b","./mn.js":"958b","./mr":"39bd","./mr.js":"39bd","./ms":"ebe4","./ms-my":"6403","./ms-my.js":"6403","./ms.js":"ebe4","./mt":"1b45","./mt.js":"1b45","./my":"8689","./my.js":"8689","./nb":"6ce3","./nb.js":"6ce3","./ne":"3a39","./ne.js":"3a39","./nl":"facd","./nl-be":"db29","./nl-be.js":"db29","./nl.js":"facd","./nn":"b84c","./nn.js":"b84c","./pa-in":"f3ff","./pa-in.js":"f3ff","./pl":"8d57","./pl.js":"8d57","./pt":"f260","./pt-br":"d2d4","./pt-br.js":"d2d4","./pt.js":"f260","./ro":"972c","./ro.js":"972c","./ru":"957c","./ru.js":"957c","./sd":"6784","./sd.js":"6784","./se":"ffff","./se.js":"ffff","./si":"eda5","./si.js":"eda5","./sk":"7be6","./sk.js":"7be6","./sl":"8155","./sl.js":"8155","./sq":"c8f3","./sq.js":"c8f3","./sr":"cf1e","./sr-cyrl":"13e9","./sr-cyrl.js":"13e9","./sr.js":"cf1e","./ss":"52bd","./ss.js":"52bd","./sv":"5fbd","./sv.js":"5fbd","./sw":"74dc","./sw.js":"74dc","./ta":"3de5","./ta.js":"3de5","./te":"5cbb","./te.js":"5cbb","./tet":"576c","./tet.js":"576c","./tg":"3b1b","./tg.js":"3b1b","./th":"10e8","./th.js":"10e8","./tl-ph":"0f38","./tl-ph.js":"0f38","./tlh":"cf75","./tlh.js":"cf75","./tr":"0e81","./tr.js":"0e81","./tzl":"cf51","./tzl.js":"cf51","./tzm":"c109","./tzm-latn":"b53d","./tzm-latn.js":"b53d","./tzm.js":"c109","./ug-cn":"6117","./ug-cn.js":"6117","./uk":"ada2","./uk.js":"ada2","./ur":"5294","./ur.js":"5294","./uz":"2e8c","./uz-latn":"010e","./uz-latn.js":"010e","./uz.js":"2e8c","./vi":"2921","./vi.js":"2921","./x-pseudo":"fd7e","./x-pseudo.js":"fd7e","./yo":"7f33","./yo.js":"7f33","./zh-cn":"5c3a","./zh-cn.js":"5c3a","./zh-hk":"49ab","./zh-hk.js":"49ab","./zh-tw":"90ea","./zh-tw.js":"90ea"};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id="4678"},"48ee":function(e,t,n){"use strict";var i=n("3fd6"),r=n.n(i);r.a},"49f8":function(e,t,n){var i={"./en.json":"edd4","./fr.json":"f693"};function r(e){var t=o(e);return n(t)}function o(e){if(!n.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}r.keys=function(){return Object.keys(i)},r.resolve=o,e.exports=r,r.id="49f8"},"4b94":function(e,t,n){},"505a":function(e,t,n){"use strict";var i=n("5d92"),r=n.n(i);r.a},5083:function(e,t,n){},"56d7":function(t,n,i){"use strict";i.r(n);var r={};i.r(r),i.d(r,"state",(function(){return nn})),i.d(r,"getters",(function(){return rn})),i.d(r,"actions",(function(){return on})),i.d(r,"mutations",(function(){return sn}));var o={};i.r(o),i.d(o,"namespaced",(function(){return dn})),i.d(o,"state",(function(){return fn})),i.d(o,"getters",(function(){return vn})),i.d(o,"actions",(function(){return mn})),i.d(o,"mutations",(function(){return hn}));var s={};i.r(s),i.d(s,"namespaced",(function(){return jn})),i.d(s,"state",(function(){return En})),i.d(s,"actions",(function(){return Sn})),i.d(s,"mutations",(function(){return _n}));var a={};i.r(a),i.d(a,"namespaced",(function(){return Cn})),i.d(a,"state",(function(){return Pn})),i.d(a,"getters",(function(){return Rn})),i.d(a,"actions",(function(){return wn})),i.d(a,"mutations",(function(){return In}));var l={};i.r(l),i.d(l,"namespaced",(function(){return Qn})),i.d(l,"state",(function(){return Dn})),i.d(l,"getters",(function(){return Tn})),i.d(l,"actions",(function(){return An})),i.d(l,"mutations",(function(){return kn}));var u={};i.r(u),i.d(u,"state",(function(){return Gn})),i.d(u,"actions",(function(){return Vn})),i.d(u,"mutations",(function(){return Nn})),i.d(u,"getters",(function(){return Fn}));var c={};i.r(c),i.d(c,"state",(function(){return Bn})),i.d(c,"getters",(function(){return Mn})),i.d(c,"actions",(function(){return Hn})),i.d(c,"mutations",(function(){return zn}));var p={};i.r(p),i.d(p,"state",(function(){return Jn})),i.d(p,"getters",(function(){return Wn})),i.d(p,"actions",(function(){return Zn})),i.d(p,"mutations",(function(){return ei}));var d={};i.r(d),i.d(d,"state",(function(){return oi})),i.d(d,"getters",(function(){return si})),i.d(d,"actions",(function(){return ai})),i.d(d,"mutations",(function(){return li}));i("e260"),i("e6cf"),i("cca6"),i("a79d");var f=i("a026"),v=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-app",{attrs:{id:"app"}},[n("v-app-bar",{staticClass:"primary white--text",attrs:{app:"","hide-on-scroll":""}},[n("v-app-bar-nav-icon",{attrs:{color:"white"},on:{click:function(t){e.showSettings=!e.showSettings}}}),n("v-spacer"),e.isQuestionnairePage?n("v-expand-x-transition",[n("v-card",{directives:[{name:"show",rawName:"v-show",value:e.expandProvisionSearchField,expression:"expandProvisionSearchField"}],staticClass:"mx-auto",attrs:{width:"80%"}},[n("provision-search",{attrs:{"clear-provision-search-text":e.clearProvisionSearchText},on:{"set-clear-provision-search-false":e.setClearProvisionSearchFalse,"shrink-provision-search-field":e.shrinkProvisionSearchField}})],1)],1):e._e(),e.isQuestionnairePage?n("v-btn",{attrs:{id:"",icon:"",color:"white"},on:{click:function(t){e.expandProvisionSearchField=!e.expandProvisionSearchField}}},[n("v-icon",[e._v(" mdi-magnify ")])],1):e._e(),e.isQuestionnairePage?n("v-btn",{attrs:{id:"",icon:"",color:"white"},on:{click:function(t){e.showCharacteristicFilter=!e.showCharacteristicFilter}}},[e.siteCharacteristicsCount>0?n("v-badge",{attrs:{content:e.siteCharacteristicsCount,value:!0,color:"red",overlap:""}},[n("v-icon",[e._v(" mdi-tune ")])],1):e._e(),0===e.siteCharacteristicsCount?n("v-icon",[e._v(" mdi-tune ")]):e._e()],1):e._e(),e.isQuestionnairePage?n("v-btn",{attrs:{id:"",icon:"",color:"white"},on:{click:e.emitSaveEvent}},[n("v-icon",[e._v(" mdi-content-save ")])],1):e._e()],1),n("settings",{attrs:{show:e.showSettings},on:{appsettings:e.settings,close:function(t){e.showSettings=!1}}}),n("characteristic-filter",{attrs:{show:e.showCharacteristicFilter},on:{"close-characteristic-filter-drawer":function(t){e.showCharacteristicFilter=!1},"update-site-characteristic-count":e.updateCharacteristicCount}}),n("v-main",[n("v-container",{attrs:{fluid:""}},[n("router-view",{ref:"routerView",attrs:{"expand-all-prop-questionnaire":e.expandAllQuestionnaire,"read-only-prop-questionnaire":e.readOnlyQuestionnaire,"validate-prop-questionnaire":e.validateQuestionnaire,"navigation-display-prop-questionnniare":e.displayNavigationQuestionnaire,"clear-prop-builder":e.clearBuilder,"save-prop-builder":e.saveBuilder,"fix-it-prop-builder":e.fixItBuilder,"update-prop-builder":e.updateItBuilder},on:{"clear-provision-search-field":e.setClearProvisionSearchTrue}})],1)],1),n("notification-container"),e.isQuestionnairePage?n("div",[n("bottom-navigation-questionnaire",{attrs:{"is-expand-panels":e.expandAllQuestionnaire,"is-read-only":e.readOnlyQuestionnaire},on:{"expand-panels":function(t){e.expandAllQuestionnaire=e.expandAllQuestionnaire},"scroll-to-top":e.scrollToTop,validate:function(t){e.validateQuestionnaire=!e.validateQuestionnaire},"set-read-only":function(t){e.readOnlyQuestionnaire=!e.readOnlyQuestionnaire},"display-navigation":function(t){e.displayNavigationQuestionnaire=!e.displayNavigationQuestionnaire}}})],1):e.isBuilderPage&&e.envDev?n("div",[n("bottom-navigation-builder",{on:{clear:function(t){e.clearBuilder=!e.clearBuilder},save:function(t){e.saveBuilder=!e.saveBuilder},"fix-it":function(t){e.fixItBuilder=!e.fixItBuilder},"update-it":function(t){e.updateItBuilder=!e.updateItBuilder}}})],1):e._e()],1)},m=[],h=(i("a4d3"),i("4de4"),i("4160"),i("b0c0"),i("e439"),i("dbb4"),i("b64b"),i("159b"),i("96cf"),i("1da1")),g=i("ade3"),b=i("5fb0"),O=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.notifications.filter((function(e){return e.showing})),(function(t,i){return n("v-snackbar",{key:t.text+Math.random(),style:"bottom: "+(60*i+8)+"px",attrs:{timeout:t.timeout,color:t.color},model:{value:t.showing,callback:function(n){e.$set(t,"showing",n)},expression:"notification.showing"}},[e._v(" "+e._s(t.text)+" "),n("v-btn",{attrs:{text:""},on:{click:function(e){t.showing=!1}}},[e._v(" Close ")])],1)})),1)},y=[],x=i("2f62");function q(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function j(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?q(Object(n),!0).forEach((function(t){Object(g["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var E={computed:j({},Object(x["d"])({notifications:function(e){return e.toast.notifications}}))},S=E,_=i("2877"),C=i("6544"),P=i.n(C),R=i("8336"),w=i("2db4"),I=Object(_["a"])(S,O,y,!1,null,null,null),Q=I.exports;P()(I,{VBtn:R["a"],VSnackbar:w["a"]});var D=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-combobox",{ref:"provisionSearch",attrs:{"hide-details":"",clearable:"",dense:"",filled:"",items:e.provisions,"search-input":e.searchInput,"item-text":"title."+e.lang,"item-key":"id",placeholder:e.$t("app.questionnaire.provisionSearchFilter.placeholder"),"prepend-inner-icon":"mdi-magnify",filter:e.filters},on:{"update:searchInput":function(t){e.searchInput=t},"update:search-input":function(t){e.searchInput=t},keyup:function(t){return e.runUpdateProvisionFilter(t)},blur:function(t){return e.shrinkProvisionSearchField(t.target.value)},"click:clear":function(t){return e.clear(!0)},input:function(t){return e.updateProvisionFilter(e.model)}},scopedSlots:e._u([{key:"item",fn:function(t){var i=t.item;return[n("div",[n("div",[n("span",{domProps:{innerHTML:e._s(e.genFilteredText(i.title[e.lang]))}})])])]}}]),model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)},T=[],A=(i("d3b7"),i("4d63"),i("ac1f"),i("25f0"),i("466d"),i("5319"),i("498a"),i("53ca")),k=i("2ef0"),G=i.n(k),V=(i("99af"),i("c740"),i("c975"),i("a15b"),i("d81d"),i("13d5"),i("2909")),N=i("ec26"),F={TEXT:"text",RADIO:"radio",SELECT:"select",NUMBER:"number",REFERENCE:"reference"},$={"&":"&amp;","<":"&lt;",">":"&gt;"};function L(e){return e.replace(/[&<>]/g,(function(e){return $[e]||e}))}function U(e){return void 0===e||null===e||e===isNaN||"object"===Object(A["a"])(e)&&0===Object.keys(e).length||"string"===typeof e&&0===e.trim().length}function B(e,t,n){return n=n||"0",e+="",e.length>=t?e:new Array(t-e.length+1).join(n)+e}function M(e,t,n){var i=!(arguments.length>3&&void 0!==arguments[3])||arguments[3];if(!e)return e;var r=e;return i&&(r=e.replace(/[aeiou]/gi,"")),r=t+"_"+r.replace(/\s+/g,"").substring(0,15).toUpperCase(),n&&(r+="_"+n),r}function H(e,t,n){return n.indexOf(e)===t}function z(e,t){return e.filter((function(e,n,i){return i.map((function(e){return e[t]})).indexOf(e[t])===n}))}function Y(e,t){var n,i=e.reduce((function(e,t,n){return e[t.id]=n,e}),{});return e.forEach((function(r){if(null!==r[t]){var o=e[i[r[t]]];o.children=[].concat(Object(V["a"])(o.children||[]),[r])}else n=r})),n}function K(e,t){for(var n=[],i=0;i<e.length;i++){var r=e[i],o=t[r];n.push(o)}return n}function X(e){return e.type!==F.REFERENCE}function J(e){var t=[],n=W(e),i=n.length;while(i>0)for(var r=0;r<n.length;r++){var o=n[r];t.push(o);var s=W(o);i=s.length,n=n.concat(s)}return t}function W(e){var t=[];return e.childQuestions.forEach((function(e){t.push(e)})),t}function Z(e){e.guid=Object(N["a"])(),e.childQuestions&&e.childQuestions.forEach((function(e){Z(e)}))}function ee(e){return"[object String]"==toString.call(e)}function te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ne(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?te(Object(n),!0).forEach((function(t){Object(g["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ie={name:"QuestionnaireSearch",emits:["set-clear-provision-search-false","shrink-provision-search-field"],props:{clearProvisionSearchText:{type:Boolean,required:!0}},data:function(){return{searchInput:null,model:null,provisions:[],debouncedUpdateProvisionFilter:G.a.debounce(this.updateProvisionFilter,800,{leading:!1,trailing:!0})}},computed:ne({},Object(x["d"])({lang:function(e){return e&&e.settings?e.settings.settings.lang:"en"},searchableProvisions:function(e){if(null===e.questionnaire.questionnaire||null===e.legislations.legislations)return[];var t=e.questionnaire.questionnaire.searchableProvisions,n=e.legislations.legislations,i=[];return t.forEach((function(e){var t=n[e.leg],r=ne({},e,{},t);i.push(r)})),i}}),{exampleText:function(){return"en"===this.lang?'For example search by provision label or text (Example: "3.5 (1) (c)")':'Par exemple, recherchez par libellé ou texte de disposition (Exemple: "3.5 (1) (c)")'}}),watch:{searchInput:function(e){var t=this;e&&(this.provisions=this.searchableProvisions.filter((function(n){var i=t.regexReplaceFaultyEmptySpaces(n.title[t.lang]),r=i.toLowerCase().match(t.regexSearchPattern(e));return r})))},clearProvisionSearchText:function(e,t){this.clear(e)}},mounted:function(){this.provisions=[{header:this.$t("app.questionnaire.provisionSearchFilter.exampleText")}]},methods:{isMenuActive:function(e){this.$refs.provisionSearch.isMenuActive=e},updateProvisionFilter:function(e){"object"===Object(A["a"])(e)&&null!==e?this.$store.dispatch("UpdateProvisionFilterState",{provisionFilter:[e]}):null===e?this.$store.dispatch("UpdateProvisionFilterState",{provisionFilter:null}):"string"===typeof e&&(G.a.isEmpty(e.trim())?this.$store.dispatch("UpdateProvisionFilterState",{provisionFilter:null}):this.$store.dispatch("UpdateProvisionFilterState",{provisionFilter:this.provisions}))},shrinkProvisionSearchField:function(e){G.a.isEmpty(e.trim())&&this.$emit("shrink-provision-search-field")},clear:function(e){e&&(this.searchInput="",this.$store.dispatch("UpdateProvisionFilterState",{provisionFilter:null}),this.shrinkProvisionSearchField(""),this.$emit("set-clear-provision-search-false"),this.$refs.provisionSearch.isMenuActive=!1)},filters:function(e,t){var n=this.regexReplaceFaultyEmptySpaces(e.title[this.lang]),i=n.toLowerCase().match(this.regexSearchPattern(t));return Boolean(i)},genFilteredText:function(e){return e=e||"",this.searchInput?this.getMaskedCharacters(e):L(e)},genHighlight:function(e){return'<span class="v-list-item__mask">'.concat(L(e),"</span>")},getMaskedCharacters:function(e){var t=this;e=this.regexReplaceFaultyEmptySpaces(e);var n=(this.searchInput||"").toString();return e=e.replace(this.regexSearchPattern(n),(function(e){return t.genHighlight(e)})),e},regexSearchPattern:function(e){var t=(e||"").toString(),n="("+t+")";return new RegExp(n,"gi")},regexReplaceFaultyEmptySpaces:function(e){var t=/\s/g;return e.replace(t," ")},runUpdateProvisionFilter:function(e){"Enter"===e.code?(this.updateProvisionFilter(this.model),this.isMenuActive(!1)):"ArrowDown"!==e.code&&"ArrowUp"!==e.code&&this.debouncedUpdateProvisionFilter(e.target.value)}}},re=ie,oe=i("2b5d"),se=Object(_["a"])(re,D,T,!1,null,"b0177c10",null),ae=se.exports;P()(se,{VCombobox:oe["a"]});var le=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-navigation-drawer",{attrs:{app:"",right:"",temporary:"",width:e.width},model:{value:e.showDrawer,callback:function(t){e.showDrawer=t},expression:"showDrawer"}},[n("v-list",{attrs:{dense:"",nav:""}},[n("v-list-item",[n("v-list-item-content",[n("v-list-item-title",{staticClass:"title"},[e._v(" "+e._s(e.$t("app.questionnaire.siteFilter.title"))+" ")])],1),n("v-list-item-action",[n("v-btn",{attrs:{icon:""},on:{click:function(t){e.showDrawer=!1}}},[n("v-icon",[e._v(" mdi-close ")])],1)],1)],1),n("v-divider"),e._l(e.characteristics,(function(t){return n("div",{key:t.id},[n("v-list-item-content",[n("characteristic-filter-lookup",{attrs:{item:t,items:t.children,values:e.siteCharacteristics,"update-filter":e.updateProvisionFilter,label:t.text[e.lang]},on:{"update-displayed-tags":e.onUpdateDisplayedTags,mounted:function(t){return e.onMountedFilterLookup()}}}),n("v-divider")],1)],1)})),n("div",e._l(e.siteCharacteristics,(function(t){return n("v-chip",{key:t.id,staticClass:"ma-2",attrs:{close:""},on:{"click:close":function(n){return e.removeSiteCharacteristic(t.id)}}},[e._v(" "+e._s(t.text[e.lang])+" ")])})),1)],2)],1)},ue=[],ce=(i("a434"),{data:function(){return{env:"production",loadLocalData:!1,localDataToLoad:Object({NODE_ENV:"production",VUE_APP_I18N_FALLBACK_LOCALE:"en",VUE_APP_I18N_LOCALE:"en",VUE_APP_LOAD_LOCAL_DATA:"false",BASE_URL:""}).VUE_APP_TEMPLATE_TO_LOAD}},computed:{envDev:function(){return"development"===this.env},envProd:function(){return"production"===this.env},isBuilderPage:function(){return"builder"===this.$route.name},isQuestionnairePage:function(){return"questionnaire"===this.$route.name},isFlatLegislationsDataAvailable:function(){return null!==this.$store.state.legislations.legislations&&"flat"===this.$store.state.legislations.dataStructure},isQuestionnaireDataAvailable:function(){return null!==this.$store.state.questionnaire.questionnaire},isCharacteristicsDataAvailable:function(){return null!==this.$store.state.characteristics.characteristics}}}),pe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-list-group",{scopedSlots:e._u([{key:"activator",fn:function(){return[n("v-list-item-content",[n("v-list-item-title",[e._v(e._s(e.item.text[e.lang])+" ("+e._s(e.count)+")")])],1)]},proxy:!0}])},[n("v-list-item",[n("v-list-item-content",[n("v-autocomplete",{attrs:{items:e.myItems,"item-text":"text."+e.lang,"item-value":"id",chips:"","deletable-chips":"",dense:"",filled:"",multiple:"","return-object":""},on:{change:e.updateProvisionFilter},model:{value:e.model,callback:function(t){e.model=t},expression:"model"}})],1)],1)],1)},de=[];i("caad"),i("2532"),i("ddb0");function fe(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?fe(Object(n),!0).forEach((function(t){Object(g["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):fe(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var me={mixins:[ce],events:["update-displayed-tags","mounted"],props:{item:{type:Object,required:!0},items:{type:Array,default:function(){return[]}},values:{type:Array,default:function(){return[]}},label:{type:String,required:!0},updateFilter:{type:Boolean,required:!0}},data:function(){return{myValues:this.values}},computed:ve({},Object(x["d"])({lang:function(e){return e&&e.settings?e.settings.settings.lang:"en"}}),{model:{get:function(){var e=this.myItems.map((function(e){return e.id}));return this.myValues.filter((function(t){return e.includes(t.id)}))},set:function(e){var t=G.a.differenceBy(this.values,this.model,"id");t=t.concat(e),t=z(t,"id"),this.myValues=t,this.$emit("update-displayed-tags",t)}},myItems:function(){var e=G.a.orderBy(this.items,["text[".concat(this.lang,"]")],["asc"]);return this.items.length>0?e:[this.item]},unSelectedValues:function(){return G.a.difference(this.items,this.model)},count:function(){return this.model.length}}),watch:{values:function(e){this.updateProvisionFilter()},updateFilter:function(e,t){e&&this.updateProvisionFilter({setOrginalTagFilterState:!0})}},mounted:function(){this.$emit("mounted",!0)},methods:{updateProvisionFilter:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=e.setOrginalTagFilterState,n=[];n=this.model.length>0?this.model:this.unSelectedValues,this.$store.dispatch("UpdateTagFilterState",{allTags:{setItems:t,items:this.items},characteristicProvisions:n,characteristicCategory:this.label})}}},he=me,ge=i("c6a6"),be=i("56b0"),Oe=i("da13"),ye=i("5d23"),xe=Object(_["a"])(he,pe,de,!1,null,null,null),qe=xe.exports;function je(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ee(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?je(Object(n),!0).forEach((function(t){Object(g["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):je(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}P()(xe,{VAutocomplete:ge["a"],VListGroup:be["a"],VListItem:Oe["a"],VListItemContent:ye["a"],VListItemTitle:ye["c"]});var Se={components:{CharacteristicFilterLookup:qe},events:["close-characteristic-filter-drawer","update-site-characteristic-count"],mixins:[ce],props:{show:{type:Boolean,default:!1}},data:function(){return{characteristics:[],siteCharacteristics:[],isCharactericticDataSet:!1,isSiteCharacterticDataSet:!1,updateProvisionFilter:!1}},computed:Ee({},Object(x["d"])({lang:function(e){return e&&e.settings?e.settings.settings.lang:"en"}}),{showDrawer:{get:function(){return this.show},set:function(e){e||this.$emit("close-characteristic-filter-drawer")}},width:function(){return this.$vuetify.breakpoint.mobile?"100%":"40%"}}),watch:{siteCharacteristics:function(e,t){this.$emit("update-site-characteristic-count",e.length)}},mounted:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$store.subscribe((function(e,n){switch(e.type){case"SET_CHARACTERISTICS":t.characteristics=t.$store.state.characteristics.characteristics,t.isCharactericticDataSet=!0;break;case"UPDATE_ORIGINAL_TAG_FILTER_STATE":if(!t.isSiteCharacterticDataSet){for(var i=t.$store.state.characteristics.siteCharacteristics,r=0;r<i.length;r++){var o=i[r],s=t.findItemInCollection(t.characteristics,o);t.siteCharacteristics.push(s)}t.isSiteCharacterticDataSet=!0}break;default:break}}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{findItemInCollection:function(e,t){for(var n=null,i=0;i<e.length;i++){if(e[i].id===t)return n=e[i],n;if(e[i].children.length>0){if(n=this.findItemInCollection(e[i].children,t),n)return n}else;}},removeSiteCharacteristic:function(e){var t=this.siteCharacteristics.findIndex((function(t){return t.id===e}));-1!==t&&this.siteCharacteristics.splice(t,1)},onUpdateDisplayedTags:function(e){this.siteCharacteristics=e},onMountedFilterLookup:function(){this.isCharactericticDataSet&&(this.updateProvisionFilter=!0)}}},_e=Se,Ce=i("cc20"),Pe=i("ce7e"),Re=i("132d"),we=i("8860"),Ie=i("1800"),Qe=i("f774"),De=Object(_["a"])(_e,le,ue,!1,null,null,null),Te=De.exports;P()(De,{VBtn:R["a"],VChip:Ce["a"],VDivider:Pe["a"],VIcon:Re["a"],VList:we["a"],VListItem:Oe["a"],VListItemAction:Ie["a"],VListItemContent:ye["a"],VListItemTitle:ye["c"],VNavigationDrawer:Qe["a"]});var Ae=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-bottom-navigation",{attrs:{"background-color":"rgba(241, 241, 241, 0.9)",fixed:"",color:"primary"}},[n("v-btn",{on:{click:function(t){return e.displayNavigation()}}},[n("span",[e._v(" "+e._s(e.$t("app.bottom-navigation.navigation")))]),n("v-icon",{attrs:{color:"green"}},[e._v(" mdi-navigation ")])],1),n("v-btn",{on:{click:function(t){return e.expand()}}},[0==e.isExpandPanelsData.value?n("span",[e._v(e._s(e.$t("app.bottom-navigation.expand"))+" ")]):e._e(),!0===e.isExpandPanelsData.value?n("span",[e._v(e._s(e.$t("app.bottom-navigation.collaspe")))]):e._e(),!1===e.isExpandPanelsData.value?n("v-icon",{attrs:{color:"purple"}},[e._v(" mdi-arrow-expand-vertical ")]):e._e(),!0===e.isExpandPanelsData.value?n("v-icon",{attrs:{color:"purple"}},[e._v(" mdi-arrow-collapse-vertical ")]):e._e()],1),n("v-btn",{staticClass:"btnTop",on:{click:e.scrollToTop}},[n("span",[e._v(e._s(e.$t("app.bottom-navigation.scrollUp")))]),n("v-icon",{attrs:{color:"purple"}},[e._v(" mdi-arrow-up ")])],1),n("v-btn",{on:{click:e.validate}},[n("span",[e._v(e._s(e.$t("app.bottom-navigation.validate")))]),e.notifications.length>0?n("v-badge",{attrs:{content:e.notifications.length,value:!0,color:"red",overlap:"",inline:""}},[n("v-icon",{attrs:{color:"purple"}},[e._v(" mdi-check-all ")])],1):e._e(),0===e.notifications.length?n("v-icon",{attrs:{color:"purple"}},[e._v(" mdi-check-all ")]):e._e()],1),e.envDev?n("v-btn",{on:{click:e.setReadOnly}},[e.isReadOnlyData?e._e():n("span",[e._v(e._s(e.$t("app.bottom-navigation.lockData")))]),e.isReadOnlyData?n("span",[e._v(e._s(e.$t("app.bottom-navigation.unlockData")))]):e._e(),e.isReadOnlyData?n("v-icon",{attrs:{color:"purple"}},[e._v(" mdi-lock-outline ")]):e._e(),e.isReadOnlyData?e._e():n("v-icon",{attrs:{color:"purple"}},[e._v(" mdi-lock-open-outline ")])],1):e._e()],1)},ke=[];function Ge(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ve(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ge(Object(n),!0).forEach((function(t){Object(g["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ge(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ne={emits:["expand-panels","scroll-to-top","validate","set-read-only","display-navigation"],mixins:[ce],props:{isExpandPanels:{type:Object,required:!0},isReadOnly:{type:Boolean,required:!0}},data:function(){return{isExpandPanelsData:this.isExpandPanels,isReadOnlyData:this.isReadOnly}},computed:Ve({},Object(x["d"])({notifications:function(e){return e.error.notifications}}),{hasNotifications:function(){return this.notifications.length>0}}),methods:{expand:function(){this.isExpandPanelsData.value=!this.isExpandPanels.value,this.$emit("expand-panels",!this.isExpandPanelsData)},scrollToTop:function(){this.$emit("scroll-to-top")},validate:function(){this.$emit("validate")},setReadOnly:function(){this.isReadOnlyData=!this.isReadOnlyData,this.$emit("set-read-only")},displayNavigation:function(){this.$emit("display-navigation")}}},Fe=Ne,$e=i("4ca6"),Le=i("b81c"),Ue=Object(_["a"])(Fe,Ae,ke,!1,null,"1141131a",null),Be=Ue.exports;P()(Ue,{VBadge:$e["a"],VBottomNavigation:Le["a"],VBtn:R["a"],VIcon:Re["a"]});var Me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-bottom-navigation",{attrs:{"background-color":"rgba(241, 241, 241, 0.9)",shift:"",fixed:""}},[n("v-btn",{on:{click:function(t){return e.clear()}}},[n("span",[e._v("Clear")]),n("v-icon",{attrs:{color:"purple"}},[e._v(" mdi-close-thick ")])],1),n("v-btn",{on:{click:function(t){return e.save()}}},[n("span",[e._v("Save")]),n("v-icon",{attrs:{color:"purple"}},[e._v(" mdi-content-save ")])],1),n("v-btn",{on:{click:function(t){return e.fixIt(!0)}}},[n("span",[e._v("Fix it.")]),n("v-icon",{attrs:{color:"purple"}},[e._v(" mdi-hammer-wrench ")])],1),n("v-btn",{on:{click:function(t){return e.updateIt(!0)}}},[n("span",[e._v("Update it.")]),n("v-icon",{attrs:{color:"purple"}},[e._v(" mdi-reload-alert ")])],1)],1)},He=[],ze={emits:["clear","save","fix-it"],mixins:[ce],methods:{clear:function(){this.$emit("clear")},save:function(){this.$emit("save")},fixIt:function(){this.$emit("fix-it")},updateIt:function(){this.$emit("update-it")}}},Ye=ze,Ke=Object(_["a"])(Ye,Me,He,!1,null,"00e4c612",null),Xe=Ke.exports;P()(Ke,{VBottomNavigation:Le["a"],VBtn:R["a"],VIcon:Re["a"]});var Je=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-navigation-drawer",{attrs:{temporary:"",app:""},model:{value:e.showDrawer,callback:function(t){e.showDrawer=t},expression:"showDrawer"}},[n("v-list-item",[n("v-list-item-content",[n("v-list-item-title",{staticClass:"title"},[e._v(" "+e._s(e.$t("app.settings.settings"))+" ")])],1)],1),n("v-list",{attrs:{dense:"",nav:""}},[n("v-list-item",[[n("v-list-item-icon",[n("v-icon",[e._v("mdi-palette")])],1),n("v-list-item-content",[e._v(" "+e._s(e.$t("app.settings.darkMode"))+" ")]),n("v-list-item-action",[n("v-switch",{attrs:{color:"primary"},on:{change:e.setDarkMode},model:{value:e.darkMode,callback:function(t){e.darkMode=t},expression:"darkMode"}})],1)]],2),n("v-list-item",[[n("v-list-item-content",[n("v-row",{attrs:{"no-gutters":""}},[n("v-col",[n("span",[e._v(e._s(e.$t("app.settings.language")))])])],1),n("v-row",[n("v-col",[n("v-select",{attrs:{dense:"",filled:"",items:e.languages},on:{change:e.setLanguage},model:{value:e.language,callback:function(t){e.language=t},expression:"language"}})],1)],1)],1)]],2),e.envDev?n("v-list-item",{attrs:{link:""},on:{click:function(t){return e.navigateTo("home")}}},[n("v-list-item-content",[n("v-list-item-title",[e._v(" "+e._s(e.$t("app.navigations.home"))+" ")])],1)],1):e._e(),e.envDev?n("v-list-item",{attrs:{link:""},on:{click:function(t){return e.navigateTo("questionnaire")}}},[n("v-list-item-content",[n("v-list-item-title",[e._v(" "+e._s(e.$t("app.navigations.questionnaire"))+" ")])],1)],1):e._e(),e.envDev?n("v-list-item",{attrs:{link:""},on:{click:function(t){return e.navigateTo("builder")}}},[n("v-list-item-content",[n("v-list-item-title",[e._v(" "+e._s(e.$t("app.navigations.builder"))+" ")])],1)],1):e._e(),e.envDev?n("v-list-item",{attrs:{link:""},on:{click:function(t){return e.getQuestionnaireFromDynamics()}}},[n("v-list-item-content",[n("v-list-item-title",[e._v(" "+e._s(e.$t("app.navigations.qFromDynamics"))+" ")])],1)],1):e._e(),e.envDev?n("v-list-item",{attrs:{link:""},on:{click:function(t){return e.navigateTo("questionnaire")}}},[n("v-list-item-content",[n("v-list-item-title",[e._v(" "+e._s(e.$t("app.navigations.qFromState"))+" ")])],1)],1):e._e()],1)],1)},We=[],Ze=i("db49");function et(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?et(Object(n),!0).forEach((function(t){Object(g["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):et(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var nt={mixins:[ce],props:{show:{type:Boolean,default:!1},appsettings:{type:Object,default:function(){return{lang:"en",darkmode:!0}}}},data:function(){return{language:null,darkMode:!1,languages:Ze["LANGUAGES"]}},computed:tt({},Object(x["c"])({settings:"settings"}),{lang:function(e){return e&&e.settings&&e.settings.settings?e.settings.settings.lang:"en"},showDrawer:{get:function(){return this.show},set:function(e){e||this.$emit("close")}}}),created:function(){this.showDrawer=this.show,this.appsettings&&(this.darkMode=this.appsettings.darkMode,this.$vuetify.theme.dark=this.appsettings.darkMode,this.language=this.appsettings.lang)},methods:tt({},Object(x["b"])(["saveDarkMode","setAppLanguage","setQuestionnaire"]),{setDarkMode:function(e){this.$vuetify.theme.dark=e,this.saveDarkMode(e)},setLanguage:function(e){this.$i18n.locale=e,this.setAppLanguage(e)},navigateTo:function(e,t){t&&this.$router.push({name:e,params:{templatejson:t}}).catch((function(e){})),this.$router.push({name:e}).catch((function(e){}))}})},it=nt,rt=i("62ad"),ot=i("34c3"),st=i("0fd9"),at=i("b974"),lt=i("b73d"),ut=Object(_["a"])(it,Je,We,!1,null,null,null),ct=ut.exports;function pt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function dt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?pt(Object(n),!0).forEach((function(t){Object(g["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}P()(ut,{VCol:rt["a"],VIcon:Re["a"],VList:we["a"],VListItem:Oe["a"],VListItemAction:Ie["a"],VListItemContent:ye["a"],VListItemIcon:ot["a"],VListItemTitle:ye["c"],VNavigationDrawer:Qe["a"],VRow:st["a"],VSelect:at["a"],VSwitch:lt["a"]});var ft={name:"App",events:["tdg-qstnnr-save"],components:{NotificationContainer:Q,Settings:ct,ProvisionSearch:ae,CharacteristicFilter:Te,BottomNavigationQuestionnaire:Be,BottomNavigationBuilder:Xe},mixins:[ce],props:{page:{type:String,required:!0},lang:{type:String,default:b["LANGUAGE"].ENGLISH},userName:{type:String,default:""}},data:function(){return{showLegislationSearchModal:!1,showSettings:!1,expandProvisionSearchField:!1,clearProvisionSearchText:!1,showCharacteristicFilter:!1,siteCharacteristicsCount:0,expandAllQuestionnaire:{value:!1},readOnlyQuestionnaire:!1,validateQuestionnaire:!1,displayNavigationQuestionnaire:!1,clearBuilder:!1,saveBuilder:!1,fixItBuilder:!1,isFormDirty:!1,updateItBuilder:!1}},computed:dt({},Object(x["d"])({language:function(e){return null!=e&&e.settings?e.settings.settings.lang:b["LANGUAGE"].ENGLISH},settings:function(e){return null!=e&&e.settings?e.settings.settings:{lang:b["LANGUAGE"].ENGLISH,darkMode:!1}}})),watch:{lang:function(e,t){this.setLanguage()},userName:function(e,t){this.setUserName(e)},settings:function(e,t){this.settings=JSON.parse(e)},isFormDirty:function(e,t){var n=new CustomEvent("tdg-qstnnr-updated",{detail:{message:"Is Dirty Updated",isDirty:e},bubbles:!0,cancelable:!0});document.body.dispatchEvent(n)}},created:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.$router.push({name:this.page}).catch((function(e){}));case 1:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),updated:function(){},methods:dt({},Object(x["b"])(["setAppLanguage","setUserName","setSettings"]),{setLanguage:function(){this.$i18n.locale=this.lang,this.setAppLanguage(this.lang)},setImageState:function(e){this.$store.commit("imagefile/updateImageResult",e)},setImageBase64String:function(e){this.$store.commit("imagefile/updateImageBase64String",e)},setDeletedImageState:function(e){this.$store.commit("imagefile/deleteImageResult",e)},setFileState:function(e){this.$store.commit("imagefile/updateFileResult",e)},setFileBase64String:function(e){this.$store.commit("imagefile/updateFileBase64String",e)},setDeletedFileState:function(e){this.$store.commit("imagefile/deleteFileResult",e)},emitSaveEvent:function(){if(this.isQuestionnaireDataAvailable){var e=this.RunValidation(),t=new CustomEvent("tdg-qstnnr-save",{detail:{questionnaireJSON:this.$store.state.questionnaire.questionnaire,error:e},bubbles:!0,cancelable:!0});document.body.dispatchEvent(t)}},RunValidation:function(){this.$store.dispatch("error/validateQuestions");var e=this.$store.state.error.notifications;return{isValid:!e.length>0,errorCount:e.length}},SetReadOnly:function(e){this.$store.dispatch("setQuestionnaireReadOnlyStatus",e)},Render:function(e){var t=this.page;e&&this.$store.dispatch("SetQuestionnaireState",{questionnaire:e,page:t})},GetState:function(){return this.$store.dispatch("RemoveBuilderCircularDependencies"),this.$store.state.questionnaire.questionnaire},SetLegislations:function(e,t){switch(t){case"tree":this.$store.dispatch("SetTreeLegislationsState",{legislations:e});break;case"flat":this.$store.dispatch("SetFlatLegislationsState",{legislations:e});break;default:this.$store.dispatch("SetFlatLegislationsState",{legislations:e});break}},SetCharacteristics:function(e){this.$store.dispatch("SetCharacteristicsState",e)},updateCharacteristicCount:function(e){this.siteCharacteristicsCount=e},checkIsDirty:function(){return"questionnaire"===this.$route.name?this.$refs.routerView.$refs.questionnaire.isDirty():"builder"===this.$route.name?this.$refs.routerView.isDirty():void 0},setClearProvisionSearchTrue:function(){this.clearProvisionSearchText=!0},setClearProvisionSearchFalse:function(){this.clearProvisionSearchText=!1},shrinkProvisionSearchField:function(){this.expandProvisionSearchField=!1},scrollToTop:function(){this.$vuetify.goTo(0)}})},vt=ft,mt=(i("034f"),i("7496")),ht=i("40dc"),gt=i("5bc1"),bt=i("b0af"),Ot=i("a523"),yt=i("0789"),xt=i("f6c4"),qt=i("2fa4"),jt=Object(_["a"])(vt,v,m,!1,null,null,null),Et=jt.exports;P()(jt,{VApp:mt["a"],VAppBar:ht["a"],VAppBarNavIcon:gt["a"],VBadge:$e["a"],VBtn:R["a"],VCard:bt["a"],VContainer:Ot["a"],VExpandXTransition:yt["b"],VIcon:Re["a"],VMain:xt["a"],VSpacer:qt["a"]});i("7db0"),i("4e827"),i("3ca3"),i("2b3d");function St(){var e,t=Object(N["a"])(),n={guid:t,name:t,readOnly:!1,title:(e={},Object(g["a"])(e,b["LANGUAGE"].ENGLISH,"Questionnaire Title EN"),Object(g["a"])(e,b["LANGUAGE"].FRENCH,"Questionnaire Title EN"),e),groups:[],searchableProvisions:[]};return n}function _t(e){var t,n=Object(N["a"])(),i={domId:"",domSuffix:"",guid:n,name:n,sortOrder:e?e+1:1,title:(t={},Object(g["a"])(t,b["LANGUAGE"].ENGLISH,"New Group"),Object(g["a"])(t,b["LANGUAGE"].FRENCH,"Fr: New Group"),t),isRepeatable:!1,isVisible:!0,questions:[]};return i}function Ct(e){var t,n,i,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:F.RADIO,o=Object(N["a"])(),s=void 0!==e.questions?e.questions.length+1:e.childQuestions.length+1,a=[];if(r===F.RADIO)a.push(Qt(1,(n={},Object(g["a"])(n,b["LANGUAGE"].ENGLISH,"Yes"),Object(g["a"])(n,b["LANGUAGE"].FRENCH,"Oui"),n),"true")),a.push(Qt(2,(i={},Object(g["a"])(i,b["LANGUAGE"].ENGLISH,"No"),Object(g["a"])(i,b["LANGUAGE"].FRENCH,"Non"),i),"false"));else if(r===F.SELECT){var l,u;a.push(Qt(1,(l={},Object(g["a"])(l,b["LANGUAGE"].ENGLISH,"Option 1"),Object(g["a"])(l,b["LANGUAGE"].FRENCH,"Option 1"),l),"1")),a.push(Qt(2,(u={},Object(g["a"])(u,b["LANGUAGE"].ENGLISH,"Option 2"),Object(g["a"])(u,b["LANGUAGE"].FRENCH,"Option 2"),u),"2"))}else a.push(Qt(1,null,""));var c=[];c.push(wt());var p={guid:o,name:o,sortOrder:s,text:(t={},Object(g["a"])(t,b["LANGUAGE"].ENGLISH,"Question text"),Object(g["a"])(t,b["LANGUAGE"].FRENCH,"FR: Question text"),t),type:r,isRepeatable:!1,isRepeated:!1,isSamplingAllowed:!1,isVisible:!0,responseOptions:a,validationRules:c,validationState:!0,dependants:[],dependencyGroups:[],childQuestions:[],result:null};return p}function Pt(e){var t;return e.sortOrder=1,e.text=(t={},Object(g["a"])(t,b["LANGUAGE"].ENGLISH,"Reference ID"),Object(g["a"])(t,b["LANGUAGE"].FRENCH,"FR: Reference ID"),t),e.type=F.REFERENCE,e.childQuestions=[],e.responseOptions=[],e.responseOptions.push(Qt(1,null,"")),e.validationRules=[],e.validationRules.push(wt()),e.isRepeatable=!1,e.isRepeated=!1,e.isSamplingAllowed=!1,e.isVisible=!0,e.dependants=[],e.dependencyGroups=[],e.result=null,e}function Rt(e){var t=Ct(e,F.REFERENCE);return Pt(t)}function wt(){var e;return{guid:Object(N["a"])(),enabled:!0,errorMessage:(e={},Object(g["a"])(e,b["LANGUAGE"].ENGLISH,"Required"),Object(g["a"])(e,b["LANGUAGE"].FRENCH,"FR Required"),e),name:"require",type:"require",value:null}}function It(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:-1,n=Object(N["a"])();return{guid:n,name:n,sortOrder:t,text:(e={},Object(g["a"])(e,b["LANGUAGE"].ENGLISH,"Option"),Object(g["a"])(e,b["LANGUAGE"].FRENCH,"FR: Option"),e),value:"1",internalCommentRequirement:"n/a",externalCommentRequirement:"optional",pictureRequirement:"optional",fileRequirement:"optional",provisions:[]}}function Qt(e,t,n){var i=It(e);return i.text=t,i.value=n,i}function Dt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=e.questions.find((function(e){return e.type===F.REFERENCE&&e.guid!==t}));return n}function Tt(e){var t=null;try{t=G.a.cloneDeep(e),Z(t),t.isRepeatable=!1,t.isRepeated=!0,t.isVisible=!0,t.sortOrder=e.sortOrder+1,t.dependants.forEach((function(n){var i=e.childQuestions.findIndex((function(e){return e.guid===n.guid}));i>-1&&(n.guid=t.childQuestions[i].guid)})),t.childQuestions.forEach((function(n){n.dependencyGroups.forEach((function(n){n.questionDependencies.forEach((function(n){if(n.dependsOnQuestion.guid===e.guid)n.dependsOnQuestion.guid=t.guid;else{var i=e.childQuestions.findIndex((function(e){return e.guid===n.dependsOnQuestion.guid}));i>-1&&(n.dependsOnQuestion.guid=t.childQuestions[i].guid)}}))}))})),t.childQuestions.forEach((function(n){n.dependants.forEach((function(n){if(n.guid===e.guid)n.guid=t.guid;else{var i=e.childQuestions.findIndex((function(e){return e.guid===n.guid}));i>-1&&(n.guid=t.childQuestions[i].guid)}}))}))}catch(n){t=null}return t}function At(e,t){var n=e.find((function(e){var n=e.questions.findIndex((function(e){return e.guid===t}));return n>-1}));return n}function kt(){return this.$store.state.legislations}function Gt(){return{guid:Object(N["a"])(),ruleType:"visibility",childValidatorName:"",questionDependencies:[]}}function Vt(){return{guid:Object(N["a"])(),dependsOnQuestion:null,validationAction:"equal",validationValue:"false"}}function Nt(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"equal",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"false",i=Vt();return i.dependsOnQuestion.push({guid:e}),i.validationAction=t,i.validationValue=n,i}function Ft(){var e={externalComment:"",internalComment:"",files:null,pictures:null,samplingInfo:null,responses:[],violationInfo:null};return e}function $t(e){if(e){var t=G.a.cloneDeep(e.groups),n=function e(t){t.dependencyGroups.forEach((function(e){e.questionDependencies.forEach((function(e){e.dependsOnQuestion.dependants&&e.dependsOnQuestion.dependants.push(t)}))})),t.childQuestions.forEach((function(t){return e(t)}))};t.forEach((function(e){e.questions.forEach((function(e){n(e)}))}));var i=function e(t){t.dependencyGroups.forEach((function(e){e.questionDependencies.forEach((function(e){e.dependsOnQuestion.dependants&&e.dependsOnQuestion.dependants.push({guid:t.guid})}))})),t.childQuestions.forEach((function(t){return e(t)}))};e.groups.forEach((function(e){e.questions.forEach((function(e){i(e)}))}));var r=function e(t){t.dependencyGroups.forEach((function(e){e.questionDependencies.forEach((function(e){e.dependsOnQuestion={guid:e.dependsOnQuestion.guid}}))})),t.childQuestions.forEach((function(t){return e(t)}))};e.groups.forEach((function(e){e.questions.forEach((function(e){r(e)}))}));var o=function(t){t.dependencyGroups.forEach((function(n){n.questionDependencies.forEach((function(n){var i=Lt(e,n.dependsOnQuestion.guid);i&&-1===i.dependants.findIndex((function(e){return e.guid===t.guid}))&&i.dependants.push({guid:t.guid})}))}))};return e.groups.forEach((function(e){e.questions.forEach((function(e){o(e),e.childQuestions.forEach((function(e){o(e)}))}))})),{groupsData:t,questionnaireData:e}}}function Lt(e,t){for(var n=null,i=0;i<e.groups.length;i++){var r=e.groups[i],o=r.questions.find((function(e){return e.guid===t}));if(o){n=o;break}for(var s=0;s<r.questions.length;s++){var a=r.questions[s],l=a.childQuestions.find((function(e){return e.guid===t}));if(l){n=l;break}}}return n}function Ut(){return Bt.apply(this,arguments)}function Bt(){return Bt=Object(h["a"])(regeneratorRuntime.mark((function e(){var t,n,i,r=arguments;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=r.length>0&&void 0!==r[0]?r[0]:"fullFeaturedTemplate",e.next=13;break;case 4:return n=e.sent,e.next=7,n.get("/static/templates/".concat(t,".json")).catch((function(e){}));case 7:if(i=e.sent,!i){e.next=12;break}return e.abrupt("return",i.data);case 12:return e.abrupt("return",null);case 13:case"end":return e.stop()}}),e)}))),Bt.apply(this,arguments)}function Mt(e,t){var n=[],i=[],r=0;return e.forEach((function(e){n.includes(e[t])?i.push("item ".concat(r," has id ").concat(e[t]," which is not unique")):n.push(e[t]),r++})),i.length,i}function Ht(e){for(var t=[],n=0;n<e.length;n++){var i=e[n];i.childQuestions.length>0&&(t=t.concat(Ht(i.childQuestions))),t.push(i)}return t}function zt(e){var t=[];return e.forEach((function(e){var n=Ht(e.questions);t=t.concat(n)})),t.sort((function(e,t){return e.id>t.id?1:t.id>e.id?-1:0}))}function Yt(e){var t,n,i,r,o,s,a,l=e.groups,u=[],c=[];l.forEach((function(e){e.questions.forEach((function(e){e.childQuestions.forEach((function(e){e.isRepeatable&&(e.isRepeatable=!1,c.push("fixTemplate: fixing isRepeatable prop for Child Question ".concat(e.text.en," with guid ").concat(e.guid)))}))}))}));var p=zt(l);for(void 0===e.readOnly&&(e.readOnly=!1,c.push("fixTemplate: set readOnly prop on Template to false")),i=0;i<l.length;i++){var d=l[i];d.expansionPanels=[],void 0!==d.primaryKey&&d.primaryKey.includes("GRP")&&!d.primaryKey.includes("'")||(d.primaryKey=M(d.title[b["LANGUAGE"].ENGLISH],"GRP",e.name),c.push("fixTemplate: added/reset primaryKey prop for Group ".concat(i," to ").concat(d.primaryKey)))}for(c.push("fixTemplate: reset/added expansionPanels prop to all Groups"),t=0;t<p.length;t++){o=p[t],void 0!==o.name&&o.name.includes("QTN")&&!o.name.includes("'")||(o.name=M(o.text[b["LANGUAGE"].ENGLISH],"QTN",""),c.push("fixTemplate: added/reset name prop for Question ".concat(t," to ").concat(o.name)));var f=p.filter((function(e){return e.name===o.name&&e.guid!==o.guid}));if(f.forEach((function(e){var t=p.findIndex((function(t){return t.guid===e.guid}));t&&(p[t].name=p[t].name+" v".concat(t),c.push("fixTemplate: fixing repeated name prop for Question ".concat(t," to ").concat(p[t].name)))})),o.id=t+1,void 0===o.guid&&(o.guid=Object(N["a"])(),c.push("fixTemplate: added guid (".concat(o.guid,") prop to Question ").concat(o.name))),o.internalComment){if("radio"===o.type||"select"===o.type)for(void 0!==o.responseOptions&&null!==o.responseOptions||(o.responseOptions=[],c.push("fixTemplate: responseOptions field missed in ".concat(o.name,", added as an empty array "))),n=0;n<o.responseOptions.length;n++)s=o.responseOptions[n],s.internalComment=o.internalComment;delete o.internalComment,c.push("fixTemplate: moved internal comment prop from Question ".concat(o.name," to Responses"))}if(o.externalComment){if("radio"===o.type||"select"===o.type)for(void 0!==o.responseOptions&&null!==o.responseOptions||(o.responseOptions=[],c.push("fixTemplate: responseOptions field missed in ".concat(o.name,", added as an empty array "))),n=0;n<o.responseOptions.length;n++)s=o.responseOptions[n],s.externalComment=o.externalComment;delete o.externalComment,c.push("fixTemplate: moved external comment prop from Question ".concat(o.name," to Responses"))}if(o.picture){if("radio"===o.type||"select"===o.type)for(void 0!==o.responseOptions&&null!==o.responseOptions||(o.responseOptions=[],c.push("fixTemplate: responseOptions field missed in ".concat(o.name,", added as an empty array "))),n=0;n<o.responseOptions.length;n++)s=o.responseOptions[n],s.picture=o.picture;delete o.picture,c.push("fixTemplate: moved picture prop from Question ".concat(o.name," to Responses"))}if(void 0===o.validationState&&(o.validationState=!0),void 0===o.violationInfo?(o.violationInfo={responseToMatch:"false",matchingType:"equal",referenceID:null,violationCount:null},c.push("fixTemplate: added default violationInfo prop to Question ".concat(o.name))):(void 0===o.violationInfo.referenceID&&(o.violationInfo.referenceID=null,c.push("fixTemplate: added default referenceId to violationInfo object of Question ".concat(o.name))),void 0===o.violationInfo.violationCount&&(o.violationInfo.violationCount=null,c.push("fixTemplate: added default violationCount for violationInfo object of Question ".concat(o.name)))),"radio"===o.type||"select"===o.type)for(void 0!==o.responseOptions&&null!==o.responseOptions||(o.responseOptions=[],c.push("fixTemplate: responseOptions field missed in ".concat(o.name,", added as an empty array "))),n=0;n<o.responseOptions.length;n++)s=o.responseOptions[n],void 0===s.internalComment&&(s.internalComment={option:"n/a",value:""},c.push("fixTemplate: added default internalComment prop for Response ".concat(n," of Question ").concat(o.name))),void 0===s.externalComment&&(s.externalComment={option:"optional",value:""},c.push("fixTemplate: added default externalComment prop for Response ".concat(n," of Question ").concat(o.name))),void 0!==s.picture&&""!==s.picture.value||(s.picture={option:"optional",value:[]},c.push("fixTemplate: added default picture prop for Response ".concat(n," of Question ").concat(o.name))),ee(s.value)||(s.value=String(s.value),c.push("fixTemplate: stringified response value for Response ".concat(n," of Question ").concat(o.name))),void 0!==s.name&&s.name.includes("RSPNS")&&!s.name.includes("'")||(s.name=M(s.text[b["LANGUAGE"].ENGLISH],"RSPNS",o.name,!1),c.push("fixTemplate: added/reset name prop for Response ".concat(n," of Question ").concat(o.name))),void 0!==s.file&&""!==s.file.value||(s.file={option:"optional",value:[]},c.push("fixTemplate: added default file prop for Response ".concat(n," of Question ").concat(o.name)));else void 0===o.responseOptions||null===o.responseOptions?(o.responseOptions=[],c.push("fixTemplate: responseOptions field missed in ".concat(o.name,", added as an empty array "))):o.responseOptions&&o.responseOptions.length>0&&(o.responseOptions=[],c.push("fixTemplate: removed response options from ".concat(o.type," Question ").concat(o.name)))}if(void 0===e.searchableProvisions){for(t=0;t<p.length;t++)if(o=p[t],void 0!==o.responseOptions||"radio"===o.type||"select"===o.type)for(void 0!==o.responseOptions&&null!==o.responseOptions||(o.responseOptions=[],c.push("fixTemplate: responseOptions field missed in ".concat(o.name,", added as an empty array "))),n=0;n<o.responseOptions.length;n++)if(s=o.responseOptions[n],s.provisions.length>0)for(r=0;r<s.provisions.length;r++){a=s.provisions[r];var v=u.findIndex((function(e){return e.leg===a}));if(-1!==v){var m=u[v];m.questions.includes(o.guid)||m.questions.push(o.guid)}else u.push({leg:a,questions:[o.guid]})}e.searchableProvisions=u,c.push("fixTemplate: added searchableProvisions prop to Template")}return Xt(c,"fixItLog.json"),Xt(e,"fixedTemplate.json"),e}function Kt(e){var t=[];if(!e)return null;if(void 0===e.templateid)return e;var n=St();n.readOnly=e.readOnly,n.title=e.title,n.searchableProvisions=e.searchableProvisions;for(var i=function(e){var t={guid:e.guid,name:e.guid,sortOrder:e.sortOrder,text:e.text,type:e.type,isRepeatable:e.isRepeatable,isRepeated:e.isRepeated,isSamplingAllowed:e.isSamplingAllowed,isVisible:e.isVisible,validationState:e.validationState,responseOptions:[],validationRules:[],dependants:e.dependants,dependencyGroups:[],childQuestions:[],result:null};return e.validationRules.forEach((function(e){var n={guid:Object(N["a"])(),enabled:e.enabled,errorMessage:e.errorMessage,name:e.name,type:e.type,value:e.value};t.validationRules.push(n)})),e.dependencyGroups.forEach((function(e){var n={guid:Object(N["a"])(),ruleType:e.ruleType,childValidatorName:e.childValidatorName?e.childValidatorName:"",questionDependencies:[]};e.questionDependencies.forEach((function(e){var t={guid:Object(N["a"])(),dependsOnQuestion:e.dependsOnQuestion,validationAction:e.validationAction,validationValue:e.validationValue};n.questionDependencies.push(t)})),t.dependencyGroups.push(n)})),e.responseOptions?e.responseOptions.forEach((function(e){var n=Object(N["a"])(),i={guid:n,name:n,sortOrder:e.sortOrder,text:e.text,value:e.value,internalCommentRequirement:e.internalComment.option,externalCommentRequirement:e.externalComment.option,pictureRequirement:e.picture.option,fileRequirement:e.file.option,provisions:e.provisions};t.responseOptions.push(i)})):t.responseOptions.push(It(1)),t},r=function(r){t.push("updateTemplate: Updating Group # "+r);var o=_t(r);o.title=e.groups[r].title,o.isRepeatable=e.groups[r].isRepeatable,o.isVisible=e.groups[r].isVisible,void 0!==o.isVisibleByDefault&&delete o.isVisibleByDefault,e.groups[r].questions.forEach((function(e){t.push("updateGroup: Updating Question # "+e.sortOrder);var n=i(e);e.childQuestions.forEach((function(e){t.push("updateQuestion: Updating Child Question # "+e.sortOrder);var r=i(e);n.childQuestions.push(r)})),o.questions.push(n)})),n.groups.push(o)},o=0;o<e.groups.length;o++)r(o);return Xt(t,"updateLog.json"),Xt(n,"updatedTemplate.json"),n}function Xt(e,t){if(e){t||(t="console.json"),"object"===Object(A["a"])(e)&&(e=JSON.stringify(e,void 0,4));var n=new Blob([e],{type:"text/json"}),i=document.createEvent("MouseEvents"),r=document.createElement("a");r.download=t,r.href=window.URL.createObjectURL(n),r.dataset.downloadurl=["text/json",r.download,r.href].join(":"),i.initMouseEvent("click",!0,!1,window,0,0,0,0,0,!1,!1,!1,!1,0,null),r.dispatchEvent(i)}}function Jt(e,t){var n=-1;return e&&(n=e.questions.findIndex((function(e){return e.guid===t}))),n>-1}function Wt(e){var t=G.a.cloneDeep(e.groups);return t.forEach((function(e){e.questions=e.questions.filter((function(e){return!0===e.isVisible})),e.questions.forEach((function(e){e.childQuestions=e.childQuestions.filter((function(e){return!0===e.isVisible}))}))})),t}function Zt(e){return e.name=e.name.replaceAll('"',""),e.text.en=e.text.en.replaceAll('"',""),e.text.fr=e.text.fr.replaceAll('"',""),e.responseOptions&&e.responseOptions.forEach((function(e){e.name=e.name.replaceAll('"',"")})),e}function en(e){return e.forEach((function(e){e.title.en=e.title.en.replaceAll('"',""),e.title.fr=e.title.fr.replaceAll('"',""),e.questions.forEach((function(e){e=Zt(e),e.childQuestions.forEach((function(e){e=Zt(e)}))}))})),e}var tn={createGroup:_t,createQuestionnaire:St,createQuestion:Ct,createReferenceQuestion:Rt,convertToReferenceQuestion:Pt,createProvisions:kt,createGenericResponseOption:It,createResponseOption:Qt,createDependencyGroup:Gt,findReferenceQuestion:Dt,findGroupForQuestionById:At,GetMockQuestionnaireFromImportModule:Ut,processBuilderForSave:$t,FindNonUniqueIds:Mt,flattenQuestions:zt,fixTemplate:Yt,updateTemplate:Kt,GenerateRepeatedQuestion:Tt,isParentAGroup:Jt,cloneVisibleQuestionsOnly:Wt,fixTextToShowInDrawer:en,createGenericValidationRule:wt,createQuestionDependency:Nt,createGenericQuestionDependency:Vt,createGenericResult:Ft},nn={groups:[],groupsCopy:[]},rn={getTargetedRepeatedGroups:function(e){return function(t){return e.groups.filter((function(e){return e.name===t}))}}},on={setQuestionnaireGroups:function(e,t){var n=e.commit,i=G.a.cloneDeep(t);n("setGroups",{groups:t}),n("copyGroups",{groupsCopy:i})},repeatGroup:function(e,t){var n=e.commit,i=e.state,r=e.rootState,o=e.getters,s=t.group,a=t.guid,l=o.getTargetedRepeatedGroups(s.name),u=l.map((function(e){return e.sortOrder})),c=Math.min.apply(Math,Object(V["a"])(u)),p=l.length,d=c+p,f=i.groupsCopy.find((function(e){return e.name===s.name})),v=G.a.cloneDeep(f);v.guid=a,v.questions=[];var m=r.questionnaire.questionnaire;f.questions.forEach((function(e){var t=tn.GenerateRepeatedQuestion(m,e);t.isRepeatable=e.isRepeatable,t.isRepeated=e.isRepeated,t.sortOrder=e.sortOrder,v.questions.push(t)})),v.sortOrder=d,n("repeatGroup",{copiedGroup:v,insertAt:d,groups:i.groups})},removeGroup:function(e,t){var n=e.commit;n("removeGroup",{group:t,groups:nn.groups})},updateGroupDomId:function(e,t){var n=e.commit,i=e.getters,r=t.group,o=i.getTargetedRepeatedGroups(r.name),s=o.map((function(e){return e.sortOrder})),a=s.findIndex((function(e){return e===r.sortOrder})),l="#".concat(B(a,3));n("UPDATE_GROUP_DOM_ID",{group:r,domSuffix:l})}},sn={setGroups:function(e,t){var n=t.groups;e.groups=n},copyGroups:function(e,t){var n=t.groupsCopy;e.groupsCopy=n},UPDATE_GROUP_DOM_ID:function(e,t){var n=t.group,i=t.domSuffix;n.domId="".concat(n.name).concat(i),n.domSuffix=i},repeatGroup:function(e,t){var n=t.copiedGroup,i=t.insertAt,r=t.groups;e.groups.splice(i,0,n);for(var o=ln(r,n.name),s=i;s<e.groups.length;s++){e.groups[s].sortOrder=s;var a=an(n,o);e.groups[s].domSuffix=a,e.groups[s].domId="".concat(n.name).concat(a)}},removeGroup:function(e,t){var n=t.group,i=t.groups,r=n.sortOrder;e.groups.splice(r,1);for(var o=ln(i,n.name),s=r;s<e.groups.length;s++){e.groups[s].sortOrder=s;var a=an(n,o);e.groups[s].domId="".concat(n.name).concat(a)}}};function an(e,t){var n=t.map((function(e){return e.sortOrder})),i=n.findIndex((function(t){return t===e.sortOrder}));return"#".concat(B(i,3))}function ln(e,t){return e.filter((function(e){return e.name===t}))}i("45fc");var un=i("a925");function cn(){var e=i("49f8"),t={};return e.keys().forEach((function(n){var i=n.match(/([A-Za-z0-9-_]+)\./i);if(i&&i.length>1){var r=i[1];t[r]=e(n)}})),t}f["a"].use(un["a"]);var pn=new un["a"]({locale:"en",fallbackLocale:"en",messages:cn()}),dn=!0,fn={notifications:[]},vn={},mn={validateQuestions:function(e){var t=e.commit,n=e.rootState;t("CLEAR_NOTIFICATIONS");var i=n.questionnaire.questionnaire,r=n.settings.settings.lang,o=[];i.groups.forEach((function(e){e.questions.forEach((function(e){var t=xn(e,r);t&&(o=o.concat(t))}))})),t("SET_NOTIFICATIONS",o)}},hn={SET_NOTIFICATION:function(e,t){e.notifications.push(t)},SET_NOTIFICATIONS:function(e,t){e.notifications=t},CLEAR_NOTIFICATIONS:function(e){e.notifications=[]}};function gn(e){var t=-1;return e.validationRules&&(t=e.validationRules.findIndex((function(e){return e.enabled}))),t>-1||null!==e.result}function bn(e,t){var n=[];return e.responseOptions&&e.result&&e.result.responses.forEach((function(i){var r=e.responseOptions.find((function(e){return e.guid===i.guid}));if(r){if("required"===r.internalCommentRequirement&&U(e.result.internalComment)){var o=pn.t("app.notifications.internalComment",{type:r.text[t]});n.push(qn(e,o,"mdi-message-alert",t))}if("required"===r.externalCommentRequirement&&U(e.result.externalComment)){var s=pn.t("app.notifications.externalComment",{type:r.text[t]});n.push(qn(e,s,"mdi-message-alert",t))}if("required"===r.fileRequirement&&U(e.result.files)){var a=pn.t("app.notifications.file",{type:r.text[t]});n.push(qn(e,a,"mdi-image-plus",t))}if("required"===r.pictureRequirement&&U(e.result.pictures)){var l=pn.t("app.notifications.picture",{type:r.text[t]});n.push(qn(e,l,"mdi-image-plus",t))}}})),n}function On(e,t){switch(t.type){case"min":return!e.result.responses.some((function(e){return isNaN(e.value)}))&&!e.result.responses.some((function(e){return+e.value<+t.value}));case"max":return!e.result.responses.some((function(e){return isNaN(e.value)}))&&!e.result.responses.some((function(e){return+e.value>+t.value}));case"minLength":return!e.result.responses.some((function(e){return String(e.value).length<+t.value}));case"maxLength":return!e.result.responses.some((function(e){return String(e.value).length>+t.value}));default:return!1}}function yn(e,t){var n=[];return e.validationRules&&e.validationRules.forEach((function(i){i.enabled&&e.result&&i.value&&(On(e,i)||n.push(qn(e,i.errorMessage[t],"mdi-message-draw",t)))})),n}function xn(e,t){var n=[];if(e.isVisible){if(gn(e))if(U(e.result)||U(e.result.responses)){var i=pn.t("app.notifications.question");n.push(qn(e,i,"mdi-message-draw",t))}else{var r=yn(e,t);r.length>0&&(n=n.concat(r)),r=bn(e,t),r.length>0&&(n=n.concat(r))}e.childQuestions&&e.childQuestions.length>0&&e.childQuestions.forEach((function(e){n=n.concat(xn(e,t))}))}return n}function qn(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"mdi-message-alert",i=arguments.length>3?arguments[3]:void 0,r={guid:Object(N["a"])(),header:pn.t("app.notifications.header",{text:e.text[i]}),text:t,icon:n,color:"error",qguid:e.guid};return r}var jn=!0,En={notifications:[]},Sn={show:function(e,t){var n=e.commit;t.showing=!0,t.color=t.color||"success",t.timeout=t.timeout||3e3,n("SET_NOTIFICATIONS",t)}},_n={SET_NOTIFICATIONS:function(e,t){e.notifications.push(t)}},Cn=!0,Pn={imageFileNotification:{imageResults:Object,fileResults:Object},imageData:{imageDetails:Object,fileDetails:Object},deletedImageData:{imageDetails:Object,fileDetails:Object}},Rn={},wn={},In={updateImageResult:function(e,t){e.imageFileNotification.imageResults=t},updateImageBase64String:function(e,t){e.imageData.imageDetails=t},deleteImageResult:function(e,t){e.deletedImageData.imageDetails=t},updateFileResult:function(e,t){e.imageFileNotification.fileResults=t},updateFileBase64String:function(e,t){e.imageData.fileDetails=t},deleteFileResult:function(e,t){e.deletedImageData.fileDetails=t}},Qn=!0,Dn={data:{questionnaire:Object}},Tn={},An={UpdateQuestionnaireState:function(e,t){var n=e.commit;n("updateQuestionnaireState",t)}},kn={updateQuestionnaireState:function(e,t){e.data.questionnaire=[t]}},Gn={settings:{lang:"en",userName:"",darkMode:!1}},Vn={saveDarkMode:function(e,t){var n=e.commit;t=!!t,n("SET_DARKMODE",t),$n(Gn.app)},setAppLanguage:function(e,t){var n=e.commit;n("SET_LANGUAGE",t),$n(Gn.app)},setUserName:function(e,t){var n=e.commit;n("SET_USERNAME",t),$n(Gn.app)},setSettings:function(e,t){var n=e.commit;n("SET_SETTINGS",t),$n(Gn.app)}},Nn={SET_DARKMODE:function(e,t){e.settings.darkMode=t},SET_LANGUAGE:function(e,t){e.settings.lang=t},SET_USERNAME:function(e,t){e.settings.userName=t},SET_SETTINGS:function(e,t){e.settings=t}},Fn={getAppSettings:function(e){return e.settings}},$n=function(e){localStorage&&(localStorage.appSettings=JSON.stringify(e))};function Ln(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Un(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ln(Object(n),!0).forEach((function(t){Object(g["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ln(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Bn={questionnaire:null,searchableProvisionRef:{},provisionFilter:null,originalTagFilter:[],tagFilter:[],modifiedInBuilder:!1,activeSelectedQuestionId:null},Mn={getQuestionnaire:function(e){return e.questionnaire},getModifiedinBuilder:function(e){var t=!!e.modifiedInBuilder&&e.modifiedInBuilder;return t},getQuestionnaireReadOnlyStatus:function(e){var t=!!e.questionnaire&&e.questionnaire.readOnly;return t},getFlatListOfAllQuestions:function(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=[],i=[];return e.questionnaire&&(i=t?e.questionnaire.groups.filter((function(e){return e.domId===t})):e.questionnaire.groups),i.forEach((function(e){e.questions.forEach((function(e){n.push(e);var t=Yn(e),i=t.length;while(i>0)for(var r=0;r<t.length;r++){var o=t[r];n.push(o);var s=Yn(o);i=s.length,t=t.concat(s)}}))})),n}},getSearchableProvisions:function(e,t,n){var i=e.questionnaire,r=n.legislations.legislations;if(null===i||null===r)return[];var o=i.searchableProvisions,s=r,a=[];return o.forEach((function(e){var t=s[e.leg],n=Un({},e,{},t);a.push(n)})),a},getAllAppliedTagProvisions:function(e){var t=[];return e.tagFilter.forEach((function(e){t=t.concat(e.provisions)})),t},getAllOriginalTagProvisions:function(e){var t=[];return e.originalTagFilter.forEach((function(e){t=t.concat(e.provisions)})),t}},Hn={setQuestionnaireReadOnlyStatus:function(e,t){var n=e.commit;n("setQuestionnaireReadOnlyStatus",t)},SetMockQuestionnaireResponse:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var n,i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,i=t.dispatch,e.next=3,Kn();case 3:r=e.sent,n("setQuestionnaire",r),i("setQuestionnaireGroups",r.groups);case 6:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),SetModifiedInBuilder:function(e,t){var n=e.commit;n("setModifiedInBuilder",t)},SetQuestionnaireState:function(e,t){var n=e.commit,i=e.dispatch,r=t.questionnaire,o=t.page;if(r)switch(o){case"builder":var s=tn.processBuilderForSave(r),a=s.questionnaireData,l=s.groupsData;n("setQuestionnaire",a),i("setQuestionnaireGroups",l);break;case"questionnaire":n("setQuestionnaire",r),i("setQuestionnaireGroups",r.groups);break;default:break}},RemoveBuilderCircularDependencies:function(e){var t=e.commit,n=e.state,i=e.dispatch;if(n.questionnaire){var r=n.questionnaire,o=tn.processBuilderForSave(r),s=o.questionnaireData,a=o.groupsData;t("setQuestionnaire",s),i("setQuestionnaireGroups",a)}},UpdateSearchableProvisionsState:function(e,t){var n=e.commit,i=t.provisions,r=t.questionGuid;if(i.forEach((function(e){var t=e,i=Bn.questionnaire.searchableProvisions.find((function(e){return e.leg===t})),o=!!i&&i.questions.includes(r);o||n("addSearchableProvision",{provision:i,provisionId:t,questionGuid:r})})),Bn.searchableProvisionRef[r]){var o=[];o=G.a.difference(Bn.searchableProvisionRef[r].legs,i),o.length>0&&n("removeSearchableProvision",{questionGuid:r,provisionsToBeRemoveFrom:o})}n("setSearchableProvisionRef",{provisions:i,questionGuid:r})},UpdateProvisionFilterState:function(e,t){var n=e.commit;n("updateProvisionFilter",t)},InitializeSearchableProvisionRef:function(e){var t=e.commit,n=e.getters,i=n.getFlatListOfAllQuestions();t("initializeSearchableProvisionRef",{questions:i})},UpdateTagFilterState:function(e,t){var n=e.commit,i=e.state,r=e.getters,o=t.allTags,s=t.characteristicProvisions,a=t.characteristicCategory,l=r.getSearchableProvisions,u=[];s.forEach((function(e){u=u.concat(l.filter((function(t){return e.provisions.includes(t.id)})))})),u=z(u,"id");var c=i.tagFilter.findIndex((function(e){return e.name===a})),p=-1!==c;if(o.setItems){var d=[];o.items.forEach((function(e){d=d.concat(l.filter((function(t){return e.provisions.includes(t.id)})))})),d=z(d,"id"),n("UPDATE_ORIGINAL_TAG_FILTER_STATE",{isFound:p,index:c,characteristicProvisions:d,tag:{name:a,provisions:d}})}n("updateTagFilterState",{isFound:p,index:c,characteristicProvisions:u,tag:{name:a,provisions:u}})},updateActiveQuestionSelection:function(e,t){var n=e.commit;n("UPDATE_ACTIVE_QUESTION_SELECTION",t)}},zn={setQuestionnaire:function(e,t){e.questionnaire=t},setModifiedInBuilder:function(e,t){e.modifiedInBuilder=t},setQuestionnaireReadOnlyStatus:function(e,t){e.questionnaire&&(e.questionnaire.readOnly=t)},addSearchableProvision:function(e,t){var n=t.provision,i=t.provisionId,r=t.questionGuid;e.questionnaire.searchableProvisions||(e.questionnaire.searchableProvisions=[]),n?n.questions.push(r):e.questionnaire.searchableProvisions.push({leg:i,questions:[r]})},removeSearchableProvision:function(e,t){var n=t.provisionsToBeRemoveFrom,i=t.questionGuid;n.forEach((function(t){var n=e.questionnaire.searchableProvisions.find((function(e){return e.leg===t})),r=G.a.remove(n.questions,(function(e){return e!==i}));if(0===r.length){var o=e.questionnaire.searchableProvisions.findIndex((function(e){return e.leg===t}));e.questionnaire.searchableProvisions.splice(o,1)}else n.questions=r}))},setSearchableProvisionRef:function(e,t){var n=t.provisions,i=t.questionGuid;e.searchableProvisionRef[i]={},e.searchableProvisionRef[i].legs=n},initializeSearchableProvisionRef:function(e,t){var n=t.questions,i=[];n.forEach((function(t){e.searchableProvisionRef[t.guid]={legs:[]},t.responseOptions&&(t.responseOptions.forEach((function(e){i=i.concat(e.provisions)})),e.searchableProvisionRef[t.guid].legs=i,i=[])}))},updateProvisionFilter:function(e,t){var n=t.provisionFilter;e.provisionFilter=n},updateTagFilterState:function(e,t){var n=t.isFound,i=t.index,r=t.tag;n?(e.tagFilter[i]=r,e.tagFilter.splice(i,1,r)):e.tagFilter.push(r)},UPDATE_ORIGINAL_TAG_FILTER_STATE:function(e,t){var n=t.isFound,i=t.index,r=t.tag;n?(e.originalTagFilter[i]=r,e.originalTagFilter.splice(i,1,r)):e.originalTagFilter.push(r)},UPDATE_ACTIVE_QUESTION_SELECTION:function(e,t){e.activeSelectedQuestionId=t}};function Yn(e){var t=[];return e.childQuestions.forEach((function(e){t.push(e)})),t}function Kn(){return Xn.apply(this,arguments)}function Xn(){return Xn=Object(h["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.e("chunk-vendors").then(i.t.bind(null,"bc3a",7));case 2:return t=e.sent,e.next=5,t.get("/static/betaAnswers.json").catch((function(e){}));case 5:return n=e.sent,e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e)}))),Xn.apply(this,arguments)}var Jn={legislations:null,dataStructure:null},Wn={},Zn={SetTreeLegislationsStateToLocalData:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,ti();case 3:i=e.sent,n("setTreeLegislations",{legislations:i,dataStructure:"tree"});case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),SetFlatLegislationsStateToLocalData:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,ii();case 3:i=e.sent,n("setFlatLegislations",{legislations:i,dataStructure:"flat"});case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),SetTreeLegislationsState:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,n){var i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=t.commit,r=n.legislations,i("setTreeLegislations",{legislations:r,dataStructure:"flat"});case 3:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}(),SetFlatLegislationsState:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,n){var i,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=t.commit,r=n.legislations,i("setFlatLegislations",{legislations:r,dataStructure:"flat"});case 3:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},ei={setTreeLegislations:function(e,t){var n=t.legislations,i=t.dataStructure;e.legislations=n,e.dataStructure=i},setFlatLegislations:function(e,t){var n=t.legislations,i=t.dataStructure;e.legislations=n,e.dataStructure=i}};function ti(){return ni.apply(this,arguments)}function ni(){return ni=Object(h["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.e("chunk-vendors").then(i.t.bind(null,"bc3a",7));case 2:return t=e.sent,e.next=5,t.get("/static/legislation.json").catch((function(e){}));case 5:return n=e.sent,e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e)}))),ni.apply(this,arguments)}function ii(){return ri.apply(this,arguments)}function ri(){return ri=Object(h["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.e("chunk-vendors").then(i.t.bind(null,"bc3a",7));case 2:return t=e.sent,e.next=5,t.get("/static/legislationDictionnary.json").catch((function(e){}));case 5:return n=e.sent,e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e)}))),ri.apply(this,arguments)}var oi={characteristics:null,siteCharacteristics:null},si={},ai={SetCharacteristicsStateToLocalData:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var n,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,e.next=3,ui();case 3:i=e.sent,n("SET_CHARACTERISTICS",{data:i});case 5:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),SetCharacteristicsState:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,n){var i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:i=t.commit,i("SET_CHARACTERISTICS",{data:n});case 2:case"end":return e.stop()}}),e)})));function t(t,n){return e.apply(this,arguments)}return t}()},li={SET_CHARACTERISTICS:function(e,t){var n=t.data;n?(e.characteristics=n.characteristics,e.siteCharacteristics=n.siteCharacteristics):(e.characteristics=[],e.siteCharacteristics=[])}};function ui(){return ci.apply(this,arguments)}function ci(){return ci=Object(h["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,i.e("chunk-vendors").then(i.t.bind(null,"bc3a",7));case 2:return t=e.sent,e.next=5,t.get("/static/characteristics.json").catch((function(e){}));case 5:return n=e.sent,e.abrupt("return",n.data);case 7:case"end":return e.stop()}}),e)}))),ci.apply(this,arguments)}f["a"].use(x["a"]);var pi=new x["a"].Store({modules:{group:r,error:o,imagefile:a,objectstate:l,settings:u,questionnaire:c,legislations:p,characteristics:d,toast:s},state:{},getters:{},actions:{},mutations:{}}),di=i("f309");f["a"].use(di["a"]);var fi=new di["a"]({theme:{options:{customProperties:!0},themes:{dark:{primary:"#1E9097",accent:"#FF4081",secondary:"#8C6600",success:"#4CAF50",info:"#2196F3",warning:"#FB8C00",error:"#FF5252"},light:{primary:"#1E9097",accent:"#e91e63",secondary:"#F0F0F0",success:"#4CAF50",info:"#2196F3",warning:"#FB8C00",error:"#FF5252"}}}}),vi=i("8c4f"),mi=function(){var e=this,t=e.$createElement;e._self._c;return e._m(0)},hi=[function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"content-container"},[n("div",{staticClass:"content-title-group not-found"},[n("i",{staticClass:"fas fa-exclamation-triangle",attrs:{"aria-hidden":"true"}}),e._v(" "),n("span",{staticClass:"title"},[e._v("These is no such page")])])])}],gi={},bi=Object(_["a"])(gi,mi,hi,!1,null,null,null),Oi=bi.exports,yi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._v(" Home page ")])},xi=[],qi={},ji=qi,Ei=Object(_["a"])(ji,yi,xi,!1,null,"4b6b18a9",null),Si=Ei.exports,_i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-container",[n("v-row",[n("v-col",{attrs:{cols:"12",sm:"8"}},[n("v-sheet",{attrs:{"min-height":"70vh",rounded:"lg"}},[n("questionnaire-answers",{ref:"questionnaire",attrs:{"expand-all-prop":e.expandPanels,"read-only-prop":e.readOnlyPropQuestionnaire,"validate-prop":e.validatePropQuestionnaire,"display-navigation-prop":e.navigationDisplayPropQuestionnniare},on:{"clear-provision-search-field":e.onClearProvisionSearchField}}),n("questionnaire-error",{attrs:{"is-visible":e.validate},on:{"notification:click":e.onNotificationClick,close:function(t){e.validate=!1}}}),n("questionnaire-nav",{attrs:{display:e.drawer,navitems:e.navItems},on:{"question:click":e.onNotificationClick,"navigation-close":function(t){e.drawer=t}}})],1)],1)],1)],1)],1)},Ci=[],Pi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("div",{directives:[{name:"show",rawName:"v-show",value:e.isVisible,expression:"isVisible"}]},[n("v-row",{attrs:{no:"","no-gutters":""}},[n("v-col",[n("v-form",{ref:"questionaire_form",attrs:{justify:"start"},model:{value:e.valid,callback:function(t){e.valid=t},expression:"valid"}},[n("v-expansion-panels",{staticClass:"v-expansion-panel",attrs:{accordion:"",focusable:"",multiple:""},model:{value:e.expansionPanels,callback:function(t){e.expansionPanels=t},expression:"expansionPanels"}},e._l(e.group.groups,(function(t,i){return n("questionnaire-group",{key:t.guid,ref:"questionGroup",refInFor:!0,attrs:{group:t,index:i,expand:e.expand,"read-only":e.readOnly,"data-group-id":"group"},on:{"update-group-count":e.onUpdateGroupCount}})})),1)],1)],1)],1)],1),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.isVisible,expression:"!isVisible"}]},[n("v-card",{attrs:{elevation:"2"}},[n("v-card-title",[e._v(" "+e._s(e.$t("app.questionnaire.noSearchResults.noMatchedQuestions"))+" ")]),n("v-card-text",[n("p",[e._v(e._s(e.$t("app.questionnaire.noSearchResults.searchSuggestions")))]),n("div",{staticClass:"text--primary"},[n("ul",[n("li",[e._v(" "+e._s(e.$t("app.questionnaire.noSearchResults.checkSpelling"))+" ")]),n("li",[e._v(" "+e._s(e.$t("app.questionnaire.noSearchResults.moreGeneralWords"))+" ")]),n("li",[e._v(" "+e._s(e.$t("app.questionnaire.noSearchResults.searchByProvisionLabel"))+" ")]),n("li",[e._v(" "+e._s(e.$t("app.questionnaire.noSearchResults.selectSuggestion"))+" ")])])])]),n("v-card-actions",[n("v-btn",{on:{click:e.clearProvisionSearchField}},[e._v(" "+e._s(e.$t("app.questionnaire.noSearchResults.clearSearch"))+" ")])],1)],1)],1)])},Ri=[],wi=(i("a9e3"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-expansion-panel",{directives:[{name:"show",rawName:"v-show",value:e.isVisible,expression:"isVisible"}]},[n("v-expansion-panel-header",{attrs:{"disable-icon-rotate":""},scopedSlots:e._u([{key:"actions",fn:function(){return[n("v-btn-toggle",{attrs:{dense:"","active-class":"btn-toggle-active"}},[e.group.isRepeatable?n("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{small:"",depressed:"",fab:"",disabled:e.readOnly},nativeOn:{click:function(t){return t.stopPropagation(),e.repeatGroup(t)}}},"v-btn",r,!1),i),[n("v-icon",{attrs:{"data-testid":"repeatGroup",color:"blue"}},[e._v(" mdi-plus ")])],1)]}}],null,!1,3892858942)},[n("span",[e._v(e._s(e.$t("app.questionnaire.group.repeatGroup")))])]):e._e(),e.group.isRepeatable&&e.repeatedGroup?n("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{small:"",depressed:"",fab:"",disabled:e.readOnly},nativeOn:{click:function(t){return t.stopPropagation(),e.removeGroup(t)}}},"v-btn",r,!1),i),[n("v-icon",{attrs:{"data-testid":"removeGroup",color:"blue"}},[e._v(" mdi-minus ")])],1)]}}],null,!1,314814632)},[n("span",[e._v(e._s(e.$t("app.questionnaire.group.deleteGroup")))])]):e._e()],1)]},proxy:!0}])},[n("v-row",[e.valid?e._e():n("v-col",{attrs:{cols:"auto"}},[n("v-icon",{attrs:{color:"red"}},[e._v(" mdi-exclamation ")])],1),n("v-col",{staticClass:"pl-1"},[n("h2",{staticClass:"subtitle-1"},[e._v(" "+e._s(e.groupTitle)+" ")]),e.showGroupSubtitle?n("h3",{staticClass:"subtitle-1 text-truncate"},[e._v(" "+e._s(e.groupSubtitle)+" ")]):e._e()])],1)],1),n("v-expansion-panel-content",{attrs:{eager:""}},[n("v-row",[n("v-col",{attrs:{cols:"12"}},[n("v-expansion-panels",{staticClass:"mt-3",attrs:{multiple:"",focusable:"",hover:""},model:{value:e.expansionPanelsValue,callback:function(t){e.expansionPanelsValue=t},expression:"expansionPanelsValue"}},e._l(e.group.questions,(function(t){return n("question",{key:t.guid,ref:"groupQuestion",refInFor:!0,attrs:{"data-group-id":e.group.domId,question:t,group:e.group,parent:e.group,"in-repeated-group":e.repeatedGroup,expand:e.expand,"read-only":e.readOnly},on:{responseChanged:e.onResponseChanged,error:e.onError,"reference-change":e.onReferenceChanged,"update-group-question-count":e.onUpdateGroupQuestionCount,"repeat-question":e.onRepeatQuestion,"delete-repeated-question":e.onDeleteRepeatedQuestion}})})),1)],1)],1)],1)],1)}),Ii=[],Qi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-expansion-panel",{directives:[{name:"show",rawName:"v-show",value:e.isVisible,expression:"isVisible"}],ref:"qPanel",class:e.getClassName,attrs:{active:e.isPanelActive}},[n("v-expansion-panel-header",{attrs:{"disable-icon-rotate":"",ripple:""},scopedSlots:e._u([{key:"actions",fn:function(){return[n("v-btn-toggle",{attrs:{tile:"",group:"",dense:"","active-class":"btn-toggle-active"}},[e.question.isSamplingAllowed?n("v-tooltip",{attrs:{left:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{small:"",depressed:"",fab:"",disabled:e.readOnly},nativeOn:{click:function(t){return t.stopPropagation(),e.clickSampling(t)}}},"v-btn",r,!1),i),[n("v-icon",{attrs:{color:e.samplingButtonData.disabled?"grey lighten-1":"blue"}},[e._v(" mdi-book-open-page-variant-outline ")])],1)]}}],null,!1,3347538143)},[n("span",[e._v(e._s(e.samplingButtonData.message))])]):e._e(),e.question.isRepeatable?n("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{small:"",depressed:"",fab:"",disabled:e.readOnly},nativeOn:{click:function(t){return t.stopPropagation(),e.repeatQuestion(t)}}},"v-btn",r,!1),i),[n("v-icon",{attrs:{color:"blue"}},[e._v(" mdi-plus ")])],1)]}}],null,!1,1963025943)},[n("span",[e._v(e._s(e.$t("app.questionnaire.group.question.repeatable.repeatQuestion")))])]):e._e(),e.question.isRepeated?n("v-tooltip",{attrs:{right:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{small:"",depressed:"",fab:"",disabled:e.readOnly},nativeOn:{click:function(t){return t.stopPropagation(),e.deleteRepeatedQuestion(t)}}},"v-btn",r,!1),i),[n("v-icon",{attrs:{color:"blue"}},[e._v(" mdi-minus ")])],1)]}}],null,!1,3998566169)},[n("span",[e._v(e._s(e.$t("app.questionnaire.group.question.repeatable.deleteQuestion")))])]):e._e()],1)]},proxy:!0}])},[n("v-row",{attrs:{"no-gutters":""}},[!1===e.isValid?n("v-col",{attrs:{cols:"auto"}},[n("v-icon",{attrs:{color:"red"}},[e._v(" mdi-exclamation ")])],1):e._e(),n("v-col",{staticClass:"pl-1"},[n("h2",{staticClass:"subtitle-1 text-break"},[e._v(" "+e._s(e.questionText)+" ")])])],1)],1),n("v-expansion-panel-content",{attrs:{eager:""}},[n("v-sheet",{staticClass:"px-3"},[n("response",{attrs:{question:e.question,group:e.group,"read-only":e.readOnly},on:{change:e.onUserResponseChanged,error:e.onError}})],1),n("v-sheet",{staticClass:"px-3"},[n("v-sheet",[e.displayViolationInfo?n("span",[e._v(" "+e._s(e.$t("app.questionnaire.group.question.violationDetails")))]):e._e(),e.displaySamplingRecord&&!e.displayViolationInfo&&!e.isReferenceQuestion||e.hasSamplingInfo&&!e.displayViolationInfo&&!e.isReferenceQuestion?n("sampling-record",{attrs:{question:e.question,"read-only":e.readOnly,"sampling-info":e.samplingInfo,"violation-info":e.violationInfo,"has-provisions":e.provisionIds.length>0}}):e._e(),e.displayViolationInfo&&!e.isReferenceQuestion?n("div",[n("div",[n("v-text-field",{attrs:{disabled:e.isViolationInfoReferenceIdDisabled||e.readOnly,label:e.$t("app.questionnaire.group.question.referenceId"),placeholder:e.$t("app.questionnaire.group.question.referenceIdPlaceHolder"),filled:""},model:{value:e.violationInfo.referenceId,callback:function(t){e.$set(e.violationInfo,"referenceId",t)},expression:"violationInfo.referenceId"}}),e.displaySamplingRecord||e.hasSamplingInfo?n("sampling-record",{attrs:{question:e.question,"read-only":e.readOnly,"sampling-info":e.samplingInfo,"violation-info":e.violationInfo,"has-provisions":e.provisionIds.length>0}}):n("div",[n("v-text-field",{attrs:{disabled:e.readOnly,label:e.$t("app.questionnaire.group.question.violationCount"),placeholder:e.$t("app.questionnaire.group.question.violationCountPlaceHolder"),type:"number",filled:""},model:{value:e.violationInfo.violationCount,callback:function(t){e.$set(e.violationInfo,"violationCount",t)},expression:"violationInfo.violationCount"}})],1),n("v-sheet",{staticStyle:{"background-color":"#f5f5f5",color:"#757575"}},[n("div",{class:e.violationHeaderFontSize+" ml-3"},[e._v(" "+e._s(e.$t("app.questionnaire.group.question.CiteViolations"))+" ")]),e._l(e.selProvisions,(function(t){return n("v-chip",{key:t.key,staticClass:" mr-2",attrs:{small:"",disabled:e.readOnly,dark:"",close:"",color:"grey"},on:{"click:close":function(n){return e.onSelectedProvisionClick(t)}}},[e._v(" "+e._s(e.getSelectedProvisionText(t))+" ")])}))],2),n("v-sheet",{staticClass:"mt-2",staticStyle:{"background-color":"#f5f5f5"}},[n("v-text-field",{attrs:{disabled:e.readOnly,dense:"",outlined:"","single-line":"","hide-details":"",clearable:"","clear-icon":"mdi-close-circle-outline","prepend-inner-icon":"mdi-magnify"},model:{value:e.searchProvisions,callback:function(t){e.searchProvisions=t},expression:"searchProvisions"}}),n("v-treeview",{staticClass:"mt-2",attrs:{dense:"","selected-color":"black",selectable:!e.readOnly,disabled:e.readOnly,"item-key":"id","item-text":"title."+e.lang,"selection-type":"leaf",search:e.searchProvisions,items:e.treeDataProvisions},scopedSlots:e._u([{key:"label",fn:function(t){var i=t.item;return[n("div",{staticClass:"truncated"},[n("div",[e._v(e._s(i.title[e.lang]))])])]}}],null,!1,1232194812),model:{value:e.selProvisions,callback:function(t){e.selProvisions=t},expression:"selProvisions"}})],1)],1)]):e._e()],1),n("v-sheet",{class:e.displayViolationInfo?"mt-7":""},[e.showSupplementaryInfo&&e.selectedResponseOption?n("span",[e._v(" "+e._s(e.$t("app.questionnaire.group.question.supplementaryInformation"))+" ")]):e._e(),e.showSupplementaryInfo&&e.selectedResponseOption?n("supplementary-info",{attrs:{question:e.question,selresponseoption:e.selectedResponseOption,group:e.group,"read-only":e.readOnly},on:{error:e.onError}}):e._e()],1)],1),n("br"),e.isReferenceQuestion?e._e():n("div",[n("v-expansion-panels",{attrs:{hover:"",focusable:"",multiple:""},model:{value:e.expansionPanelsValue,callback:function(t){e.expansionPanelsValue=t},expression:"expansionPanelsValue"}},e._l(e.question.childQuestions,(function(t){return n("question",{key:t.guid,ref:"groupQuestion",refInFor:!0,attrs:{question:t,group:e.group,parent:e.question,"is-child-question":!0,"in-repeated-group":e.inRepeatedGroup,expand:e.expand,"read-only":e.readOnly},on:{error:e.onChildError,"repeat-question":e.onRepeatChildQuestion,"delete-repeated-question":e.onDeleteChildRepeatedQuestion}})})),1)],1)],1)],1)},Di=[],Ti=(i("6062"),i("1276"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.question.type===e.text||e.question.type===e.reference?n("text-response",{attrs:{question:e.question,"read-only":e.readOnly},on:{change:e.onChange,error:e.onError}}):e._e(),e.question.type===e.radio?n("radio-response",{attrs:{group:e.group,question:e.question,"read-only":e.readOnly},on:{change:e.onChange,error:e.onError}}):e._e(),e.question.type===e.select?n("select-response",{attrs:{group:e.group,question:e.question,"read-only":e.readOnly},on:{change:e.onChange,error:e.onError}}):e._e(),e.question.type===e.number?n("number-response",{attrs:{group:e.group,question:e.question,"read-only":e.readOnly},on:{change:e.onChange,error:e.onError}}):e._e()],1)}),Ai=[],ki=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mt-4"},[n("v-text-field",{ref:"textControl",attrs:{outlined:"",filled:"",disabled:e.readOnly,dense:"","validate-on-blur":"",clearable:"","clear-icon":"mdi-close-circle",rules:e.validationRulesFuncs},on:{change:function(t){return e.onChange(t)},"update:error":function(t){return e.onError(t)}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)},Gi=[];function Vi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ni(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Vi(Object(n),!0).forEach((function(t){Object(g["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Vi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Fi={props:{question:{type:Object,required:!0},readOnly:{type:Boolean,required:!0}},data:function(){var e=this;return{value:null,validationRulesFuncs:[function(t){if(e.question.isVisible)for(var n=0;n<e.question.validationRules.length;n++){var i=e.question.validationRules[n];if(i.enabled){var r=i.errorMessage[e.lang];if("require"===i.type){if(!t)return r}else if("minLength"===i.type){if(!t||t.length<i.value)return r.replace("{0}",i.value)}else if("maxLength"===i.type&&(!t||t.length>i.value))return r.replace("{0}",i.value)}}return!0}]}},computed:Ni({},Object(x["d"])({lang:function(e){return e&&e.settings?e.settings.settings.lang:"en"}})),mounted:function(){var e=this;this.$watch("$refs.textControl.validations.length",(function(t){e.onError(!!t)})),this.question.result&&this.question.result.responses.length>0&&(this.value=this.question.result.responses[0].value,this.onChange())},methods:{onChange:function(){var e={value:this.value};e.value||(e.value=null),this.$emit("change",e)},onError:function(e){this.$emit("error",e)}}},$i=Fi,Li=i("8654"),Ui=Object(_["a"])($i,ki,Gi,!1,null,null,null),Bi=Ui.exports;P()(Ui,{VTextField:Li["a"]});var Mi=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e._l(e.question.responseOptions,(function(t,i){return n("div",{key:i,class:["qtn-radio-button",e.isViolation?"qtn-radio-button-non-compliant":"qtn-radio-button-compliant"]},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedOption,expression:"selectedOption"}],attrs:{id:e.group.domSuffix+"-"+e.question.guid+"-"+i,disabled:e.readOnly,type:"radio"},domProps:{value:t,checked:e._q(e.selectedOption,t)},on:{change:[function(n){e.selectedOption=t},e.onChange]}}),n("label",{attrs:{for:e.group.domSuffix+"-"+e.question.guid+"-"+i}},[e._v(e._s(t.text[e.lang]))])])})),n("v-input",{ref:"validationControl",attrs:{disabled:e.readOnly,rules:e.validationRulesFuncs},on:{"update:error":e.onError},model:{value:e.selectedOption,callback:function(t){e.selectedOption=t},expression:"selectedOption"}}),n("v-dialog",{attrs:{"max-width":"400"},model:{value:e.confirmDialogOpen,callback:function(t){e.confirmDialogOpen=t},expression:"confirmDialogOpen"}},[n("v-card",[n("v-card-title",[e._v(" "+e._s(e.$t("app.questionnaire.group.question.continue"))+" ")]),n("v-card-text",[e._v(" "+e._s(e.$t("app.questionnaire.group.question.unselectProvisions"))+" ")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.confirmed()}}},[e._v(" "+e._s(e.$t("app.questionnaire.group.question.ok"))+" ")]),n("v-btn",{attrs:{text:""},on:{click:function(t){return e.cancel()}}},[e._v(" "+e._s(e.$t("app.questionnaire.group.question.cancel"))+" ")])],1)],1)],1)],2)},Hi=[];function zi(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Yi(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zi(Object(n),!0).forEach((function(t){Object(g["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zi(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ki={events:["change"],props:{question:{type:Object,required:!0,default:function(){return{}}},group:{type:Object,required:!0},readOnly:{type:Boolean,required:!0}},data:function(){var e=this;return{selectedOption:null,selOldOption:null,confirmDialogOpen:!1,validationRulesFuncs:[function(t){if(e.question.isVisible)for(var n=0;n<e.question.validationRules.length;n++){var i=e.question.validationRules[n],r=i.errorMessage[e.lang];if(i.enabled&&("require"===i.type&&!t))return r}return!0}]}},computed:Yi({},Object(x["d"])({lang:function(e){return e&&e.settings?e.settings.settings.lang:"en"}}),{previousValue:function(){return null!==this.selOldOption?this.selOldOption.value:this.selectedOption.value},currentValue:function(){return this.selectedOption.value},currentId:function(){return this.selectedOption.guid},previousId:function(){return null!==this.selOldOption?this.selOldOption.guid:this.selectedOption.guid},isViolation:function(){return!!this.selectedOption&&this.selectedOption.provisions.length>0},selectedProvisions:function(){return this.question.result&&this.question.result.violationInfo&&this.question.result.violationInfo.selectedProvisions?this.question.result.violationInfo.selectedProvisions:[]}}),created:function(){},mounted:function(){var e=this;this.$watch("$refs.validationControl.validations.length",(function(t){e.onError(!!t)})),this.question.result&&this.question.result.responses.length>0&&(this.selectedOption=this.question.responseOptions.find((function(t){return t.value===e.question.result.responses[0].value})),this.selOldOption=this.selectedOption,this.onChange(this.selectedOption,!0))},methods:{onChange:function(e,t){this.question.responseOptions.length>0&&this.previousId!==this.currentId&&this.selectedProvisions.length>0&&!t?this.confirmDialogOpen=!0:this.processEvent()},processEvent:function(){var e={optionCurrentId:this.currentId,optionPreviousId:this.previousId,value:this.currentValue,preValue:this.previousValue};this.$emit("change",e),this.selOldOption=this.selectedOption},confirmed:function(){this.confirmDialogOpen=!1,this.processEvent()},cancel:function(){var e=this;this.confirmDialogOpen=!1,this.selectedOption=this.question.responseOptions.find((function(t){return t.value===e.question.result.responses[0].value}))},onError:function(e){this.$emit("error",e)}}},Xi=Ki,Ji=i("99d9"),Wi=i("169a"),Zi=i("b675"),er=Object(_["a"])(Xi,Mi,Hi,!1,null,"9050d292",null),tr=er.exports;P()(er,{VBtn:R["a"],VCard:bt["a"],VCardActions:Ji["a"],VCardText:Ji["b"],VCardTitle:Ji["c"],VDialog:Wi["a"],VInput:Zi["a"],VSpacer:qt["a"]});var nr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mt-4"},[n("v-select",{ref:"select",attrs:{items:e.question.responseOptions,"item-value":"id","item-text":"text."+e.lang,attach:"",chips:e.question.isChips,multiple:"",outlined:"",disabled:e.readOnly,label:"select","return-object":"","validate-on-blur":"",rules:[e.validationRule]},on:{change:function(t){return e.onChange(t,t)}},model:{value:e.response,callback:function(t){e.response=t},expression:"response"}})],1)},ir=[];function rr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function or(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rr(Object(n),!0).forEach((function(t){Object(g["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var sr={props:{question:{type:Object,required:!0},readOnly:{type:Boolean,required:!0}},data:function(){var e=this;return{response:null,validationRule:function(t){if(e.question.isVisible)for(var n=0;n<e.question.validationRules.length;n++){var i=e.question.validationRules[n];if(i.enabled){var r=i.errorMessage[e.lang];if("require"===i.type){if(!t||!t.length)return r}else if("minLength"===i.type){if(t.length<i.value)return r.replace("{0}",i.value)}else if("maxLength"===i.type&&t.length>i.value)return r.replace("{0}",i.value)}}return!0}}},computed:or({},Object(x["d"])({lang:function(e){return e&&e.settings?e.settings.settings.lang:"en"}})),mounted:function(){var e=this;if(this.$watch("$refs.select.validations",(function(t){var n=e.$refs.select.validations.length>0;e.onError(n)})),this.question.result&&this.question.result.responses.length>0){this.response=[];for(var t=function(t){e.response.push(e.question.responseOptions.find((function(n){return n.value===e.question.result.responses[t].value})))},n=0;n<this.question.result.responses.length;n++)t(n);this.onChange()}},methods:{onChange:function(){var e={value:this.response.map((function(e){return e.value}))};this.$emit("change",e)},onError:function(e){this.$emit("error",e)}}},ar=sr,lr=Object(_["a"])(ar,nr,ir,!1,null,"4fe07b07",null),ur=lr.exports;P()(lr,{VSelect:at["a"]});var cr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"mt-4"},[n("v-text-field",{ref:"textControl",attrs:{outlined:"",filled:"",disabled:e.readOnly,dense:"","validate-on-blur":"",type:"number",rules:e.validationRulesFuncs},on:{change:function(t){return e.onChange(t)},"update:error":function(t){return e.onError(t)}},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)},pr=[];function dr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function fr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dr(Object(n),!0).forEach((function(t){Object(g["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var vr={props:{question:{type:Object,required:!0},readOnly:{type:Boolean,required:!0}},data:function(){var e=this;return{value:"",validationRulesFuncs:[function(t){if(e.question.isVisible)for(var n=0;n<e.question.validationRules.length;n++){var i=e.question.validationRules[n];if(i.enabled){var r=i.errorMessage[e.lang];if("require"===i.type){if(t.length<=0)return r}else if("min"===i.type){if(Number(t)<i.value)return r.replace("{0}",i.value)}else if("max"===i.type&&Number(t)>i.value)return r.replace("{0}",i.value)}}return!0}]}},computed:fr({},Object(x["d"])({lang:function(e){return e&&e.settings?e.settings.settings.lang:"en"}})),mounted:function(){var e=this;this.$watch("$refs.textControl.validations.length",(function(t){e.onError(!!t)})),this.question.result&&this.question.result.responses.length>0&&(this.value=this.question.result.responses[0].value,this.onChange())},methods:{onChange:function(){var e={value:this.value};""===e.value?e.value=null:e.value=Number(e.value),this.$emit("change",e)},onError:function(e){this.$emit("error",e)}}},mr=vr,hr=Object(_["a"])(mr,cr,pr,!1,null,"3f6956da",null),gr=hr.exports;P()(hr,{VTextField:Li["a"]});var br={emits:["change","error"],components:{TextResponse:Bi,RadioResponse:tr,SelectResponse:ur,NumberResponse:gr},props:{question:{type:Object,required:!0},group:{type:Object,required:!0},readOnly:{type:Boolean,required:!0}},data:function(){return{text:F.TEXT,radio:F.RADIO,select:F.SELECT,number:F.NUMBER,reference:F.REFERENCE}},methods:{onChange:function(e){this.$emit("change",e)},onError:function(e){this.$emit("error",e)}}},Or=br,yr=Object(_["a"])(Or,Ti,Ai,!1,null,"29cf1814",null),xr=yr.exports,qr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-list",{attrs:{dense:"",nav:"",color:"#f5f5f5"}},[e.displayExternalComment?n("supplementary-info-comment",{attrs:{"is-external-comment":!0,"comment-requirement":e.selresponseoption.externalCommentRequirement,result:e.question.result,label:e.$t("app.questionnaire.group.question.externalComment"),hint:e.$t("app.questionnaire.group.question.externalCommentInfo"),group:e.group,question:e.question,"read-only":e.readOnly,"save-to-prop":"externalComment"}}):e._e(),e.displayInternalComment?n("supplementary-info-comment",{attrs:{"is-external-comment":!1,"comment-requirement":e.selresponseoption.internalCommentRequirement,result:e.question.result,label:e.$t("app.questionnaire.group.question.internalComment"),hint:e.$t("app.questionnaire.group.question.internalCommentInfo"),group:e.group,question:e.question,"read-only":e.readOnly,"save-to-prop":"internalComment"}}):e._e(),e.displayFile?n("supplementary-info-files",{attrs:{"file-requirement":e.selresponseoption.fileRequirement,label:e.$t("app.questionnaire.group.question.supplementaryFile.label"),group:e.group,question:e.question,"read-only":e.readOnly,"save-to-prop":"images"}}):e._e(),e.displayPicture?n("supplementary-info-image",{attrs:{"picture-requirement":e.selresponseoption.pictureRequirement,label:e.$t("app.questionnaire.group.question.photos"),group:e.group,question:e.question,"read-only":e.readOnly,"save-to-prop":"images"}}):e._e()],1)},jr=[],Er=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-list-group",{directives:[{name:"show",rawName:"v-show",value:e.displayComment,expression:"displayComment"}],scopedSlots:e._u([{key:"activator",fn:function(){return[n("v-list-item-title",{staticClass:"subtitle-1",staticStyle:{color:"#757575"}},[n("v-row",[n("v-col",[e._v(" "+e._s(e.label)+" "),e.isCommentRequired?n("v-icon",{attrs:{color:"red",small:""}},[e._v(" mdi-alpha-r-box-outline ")]):n("v-icon",{attrs:{color:"primary",small:""}},[e._v(" mdi-alpha-o-box-outline ")])],1)],1)],1),n("v-list-item-action",[e.errorInComment?n("v-icon",{attrs:{color:"red"}},[e._v(" mdi-exclamation ")]):e._e()],1)]},proxy:!0}])},[n("v-list-item",[n("v-list-item-content",[e.isExternalComment?n("v-textarea",{ref:"textArea",attrs:{"prepend-inner-icon":"mdi-message-text-outline","auto-grow":"",outlined:"",filled:"",clearable:"",disabled:e.readOnly,"clear-icon":"mdi-close-circle",placeholder:e.placeholderText,rows:"1",hint:e.hint,rules:e.rules},model:{value:e.result.externalComment,callback:function(t){e.$set(e.result,"externalComment",t)},expression:"result.externalComment"}},[e.isCommentRequired?n("v-icon",{attrs:{slot:"append",small:"",color:"red"},slot:"append"},[e._v(" mdi-exclamation ")]):e._e()],1):n("v-textarea",{ref:"textArea",attrs:{"prepend-inner-icon":"mdi-message-text-outline","auto-grow":"",outlined:"",filled:"",clearable:"",disabled:e.readOnly,"clear-icon":"mdi-close-circle",placeholder:e.placeholderText,rows:"1",hint:e.hint,rules:e.rules},model:{value:e.result.internalComment,callback:function(t){e.$set(e.result,"internalComment",t)},expression:"result.internalComment"}},[e.isCommentRequired?n("v-icon",{attrs:{slot:"append",small:"",color:"red"},slot:"append"},[e._v(" mdi-exclamation ")]):e._e()],1)],1)],1)],1)},Sr=[];function _r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Cr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?_r(Object(n),!0).forEach((function(t){Object(g["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Pr={emits:["error"],props:{isExternalComment:{type:Boolean,required:!0},commentRequirement:{type:String,required:!0},result:{type:Object,required:!0},label:{type:String,required:!0},hint:{type:String,required:!1,default:""},question:{type:Object,required:!0},group:{type:Object,required:!0},saveToProp:{type:String,required:!0},readOnly:{type:Boolean,required:!0}},data:function(){var e=this;return{rules:[function(t){return!e.displayComment||!e.isCommentRequired||(!!e.commentRequirement||"Required.")}],response:"",validationStatus:!1,notification:null}},computed:Cr({placeholderText:function(){return this.isCommentRequired?this.$t("app.questionnaire.group.question.commentRequired"):this.$t("app.questionnaire.group.question.commentOptional")},isCommentRequired:function(){return"required"===this.commentRequirement},displayComment:function(){return"n/a"!==this.commentRequirement},errorInComment:function(){return this.displayComment&&this.isCommentRequired&&(this.isExternalComment?!this.result.externalComment:!this.result.internalComment)}},Object(x["d"])({lang:function(e){return e&&e.settings?e.settings.settings.lang:"en"}}))},Rr=Pr,wr=(i("6928"),i("a844")),Ir=Object(_["a"])(Rr,Er,Sr,!1,null,"1dd9e600",null),Qr=Ir.exports;P()(Ir,{VCol:rt["a"],VIcon:Re["a"],VListGroup:be["a"],VListItem:Oe["a"],VListItemAction:Ie["a"],VListItemContent:ye["a"],VListItemTitle:ye["c"],VRow:st["a"],VTextarea:wr["a"]});var Dr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-list-group",{directives:[{name:"show",rawName:"v-show",value:e.displayFile,expression:"displayFile"}],scopedSlots:e._u([{key:"activator",fn:function(){return[n("v-list-item-title",{staticClass:"subtitle-1",staticStyle:{color:"#757575"}},[n("v-row",[n("v-col",[e._v(" "+e._s(e.label)+" "),e.isFileRequired?n("v-icon",{attrs:{color:"red",small:""}},[e._v(" mdi-alpha-r-box-outline ")]):n("v-icon",{attrs:{color:"primary",small:""}},[e._v(" mdi-alpha-o-box-outline ")])],1)],1)],1),n("v-list-item-action",[e.errorInFile?n("v-icon",{attrs:{color:"red"}},[e._v(" mdi-exclamation ")]):e._e()],1)]},proxy:!0}])},[n("v-list-item",[n("v-list-item-content",[n("v-sheet",{attrs:{color:"#f5f5f5"}},[n("v-row",{attrs:{"no-gutters":""}},[n("v-col",{attrs:{cols:"12"}},[n("v-file-input",{ref:"fileUpload",staticStyle:{"padding-bottom":"none"},attrs:{filled:"",outlined:"",multiple:"",placeholder:e.placeholderText,"prepend-inner-icon":"mdi-paperclip","prepend-icon":"",disabled:e.readOnly},on:{change:e.onFileChange}})],1),n("v-col",{attrs:{cols:"12"}},[e.hasValidFiles?n("v-list",{attrs:{color:"#f5f5f5",dense:""}},[n("v-list-item-title",{staticClass:"caption",staticStyle:{color:"#757575"}},[e._v(" "+e._s(e.$t("app.questionnaire.group.question.supplementaryFile.uploadedFiles"))+" ")]),e._l(e.question.result.files.items,(function(t,i){return n("v-list-item",{key:i},[n("document-file",{attrs:{file:t,readonly:e.readOnly,index:e.galleryIndex,filenoteexist:e.fileNoteExist},on:{"remove:file":e.removeFile,"download:file":e.downloadFile}})],1)}))],2):e._e()],1)],1),n("v-row",{staticClass:"purple",attrs:{"no-gutters":""}})],1),n("v-row",[n("v-col",{attrs:{cols:"12"}},[e.question.result.files&&e.question.result.files.items?n("v-input",{ref:"validationInput",attrs:{disabled:e.readOnly,rules:e.rules},model:{value:e.question.result.files.items.length,callback:function(t){e.$set(e.question.result.files.items,"length",t)},expression:"question.result.files.items.length"}}):e._e(),n("v-dialog",{attrs:{"max-width":"290"},model:{value:e.confirmDialogOpen,callback:function(t){e.confirmDialogOpen=t},expression:"confirmDialogOpen"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v(" "+e._s(e.$t("app.questionnaire.group.question.deleteFileConf"))+" ")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.confirmed()}}},[e._v(" "+e._s(e.$t("app.questionnaire.group.question.delete"))+" ")]),n("v-btn",{attrs:{text:""},on:{click:function(t){return e.cancel()}}},[e._v(" "+e._s(e.$t("app.questionnaire.group.question.cancel"))+" ")])],1)],1)],1)],1)],1)],1)],1)],1)},Tr=[],Ar=i("c1df"),kr=i.n(Ar),Gr=i("cc1d"),Vr=i.n(Gr),Nr=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-list-item",[n("v-list-item-icon",[n("v-icon",{attrs:{size:"30"}},[e._v(" mdi-file-"+e._s(e.getFileType(e.file.fileName))+" ")])],1),n("v-list-item-content",[e.speedDialOpen?e._e():n("v-sheet",{attrs:{color:"#f5f5f5"}},[n("v-list-item-subtitle",[n("span",[e._v(e._s(e.$t("app.questionnaire.group.question.supplementaryFile.fileTitle")))]),n("span",[e._v(e._s(e.file.title))])]),n("v-list-item-subtitle",[n("span",[e._v(e._s(e.$t("app.questionnaire.group.question.supplementaryFile.fileComment")))]),n("span",[e._v(" "+e._s(""===e.file.comment?"N/A":e.file.comment))])]),n("v-list-item-subtitle",[n("span",[e._v(e._s(e.$t("app.questionnaire.group.question.supplementaryFile.fileUploadedBy")))]),n("span",[e._v(e._s(e.file.uploadedBy))])]),n("v-list-item-subtitle",[n("span",[e._v(e._s(e.$t("app.questionnaire.group.question.supplementaryFile.fileUploaded")))]),n("span",[e._v(e._s(e.file.timeStamp))])])],1),e.speedDialOpen?n("div",[n("v-textarea",{staticStyle:{"font-size":"small"},attrs:{"auto-grow":"",outlined:"",disabled:e.readonly,dense:"",rows:"1",label:"Title"},model:{value:e.file.title,callback:function(t){e.$set(e.file,"title",t)},expression:"file.title"}}),n("v-textarea",{staticStyle:{"font-size":"small"},attrs:{"auto-grow":"",outlined:"",disabled:e.readonly,dense:"",placeholder:" ",rows:"1",label:"Comment"},model:{value:e.file.comment,callback:function(t){e.$set(e.file,"comment",t)},expression:"file.comment"}})],1):e._e()],1),n("v-list-item-icon",[n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{icon:"",disabled:!e.filenoteexist||e.readonly},on:{click:function(t){e.speedDialOpen=!e.speedDialOpen}},model:{value:e.speedDialOpen,callback:function(t){e.speedDialOpen=t},expression:"speedDialOpen"}},"v-btn",r,!1),i),[e.speedDialOpen?n("v-icon",[e._v(" mdi-close ")]):n("v-icon",[e._v(" mdi-pencil ")])],1)]}}])},[n("span",[e._v(" "+e._s(e.$t("app.questionnaire.group.question.supplementaryFile.editFile")))])])],1),n("v-list-item-icon",[n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{disabled:!e.filenoteexist||e.readonly,icon:"",color:"deep-orange"},on:{click:function(t){return t.stopPropagation(),e.$emit("remove:file",t,e.file,e.index)}}},"v-btn",r,!1),i),[n("v-icon",[e._v("mdi-delete")])],1)]}}])},[n("span",[e._v(e._s(e.$t("app.questionnaire.group.question.supplementaryFile.deleteFile")))])])],1),n("v-list-item-icon",[n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{disabled:!e.filenoteexist||e.readonly,icon:"",color:"blue"},on:{click:function(t){return t.stopPropagation(),e.$emit("download:file",e.file)}}},"v-btn",r,!1),i),[n("v-icon",[e._v("mdi-download-circle-outline")])],1)]}}])},[n("span",[e._v(e._s(e.$t("app.questionnaire.group.question.supplementaryFile.downloadFile")))])])],1),n("v-list-item-icon")],1)},Fr=[],$r=(i("baa5"),{props:{file:{type:Object,required:!0},index:{type:Number,required:!0},readonly:{type:Boolean,required:!0},filenoteexist:{type:Boolean,required:!0}},data:function(){return{speedDialOpen:!1,validationStatus:!1}},computed:{},methods:{getFileType:function(e){var t,n=e.substr(e.lastIndexOf(".")+1);return t="pdf"===n?"pdf":"xls"===n||"xlsx"===n||"csv"===n?"excel":"doc"===n||"docx"===n?"word":"document-outline",t}}}),Lr=$r,Ur=i("8dd9"),Br=i("3a2f"),Mr=Object(_["a"])(Lr,Nr,Fr,!1,null,null,null),Hr=Mr.exports;function zr(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Yr(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?zr(Object(n),!0).forEach((function(t){Object(g["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):zr(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}P()(Mr,{VBtn:R["a"],VIcon:Re["a"],VListItem:Oe["a"],VListItemContent:ye["a"],VListItemIcon:ot["a"],VListItemSubtitle:ye["b"],VSheet:Ur["a"],VTextarea:wr["a"],VTooltip:Br["a"]});var Kr={name:"SupplementaryInfoFiles",components:{documentFile:Hr},mixins:[ce],props:{fileRequirement:{type:String,required:!0},label:{type:String,required:!0},question:{type:Object,required:!0},group:{type:Object,required:!0},saveToProp:{type:String,required:!0},readOnly:{type:Boolean,required:!0}},data:function(){var e=this;return{curImg:"",progressStatus:"",galleryIndex:0,rules:[function(t){return!e.display||"required"===!e.isFileRequired||(e.question.result.files&&e.question.result.files.items&&e.question.result.files.items.length>0||"Required.")}],validationStatus:!1,notification:null,confirmDialogOpen:!1,confirmCallbackArgs:null}},computed:Yr({hasValidFiles:function(){return this.question.result.files&&void 0!==this.question.result.files.items&&this.question.result.files.items.length>0},fileNoteExist:function(){return this.question.result.files&&void 0!==this.question.result.files.items[this.galleryIndex]},displayFile:function(){return"n/a"!==this.fileRequirement},isFileRequired:function(){return"required"===this.fileRequirement},errorInFile:function(){return this.displayFile&&this.isFileRequired&&this.question.result.files&&this.question.result.files.items&&!this.question.result.files.items.length>0},placeholderText:function(){return this.isFileRequired?this.$t("app.questionnaire.group.question.supplementaryFile.fileRequired"):this.$t("app.questionnaire.group.question.supplementaryFile.fileOptional")}},Object(x["d"])({userName:function(e){return e&&e.settings?e.settings.settings.userName:"N/A"}})),mounted:function(){var e=this;this.$store.watch((function(e){return e.imagefile.imageFileNotification.fileResults}),(function(t){t&&e.onUploadFile()})),this.$store.watch((function(e){return e.imagefile.imageData.fileDetails}),(function(t){t&&e.onDownloadFile()})),this.$store.watch((function(e){return e.imagefile.deletedImageData.fileDetails}),(function(t){t&&e.onDeleteFile()}))},methods:{onFileChange:function(e){var t=this;e&&e.forEach((function(e){var n=new FileReader;n.onload=function(n){t.createFile(e.name,n.target.result.split(",")[1])},n.readAsDataURL(e)}))},createFile:function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(n,i){var r,o,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.progressStatus="Uploading...",r=Object(N["a"])(),o=n,s=i;try{a=new CustomEvent("tdg-qstnnr-uploadBlobImage",{detail:{base64String:s,qguid:this.question.guid,nameGuid:r,fileName:o,isFileTypeImage:!1},bubbles:!0,cancelable:!0}),document.body.dispatchEvent(a)}catch(e){}finally{this.$refs.fileUpload.reset()}case 5:case"end":return t.stop()}}),t,this)})));function n(e,n){return t.apply(this,arguments)}return n}(),onUploadFile:function(){var e=this.$store.state.imagefile.imageFileNotification.fileResults;null!==e&&(null==this.question.result.files&&(this.question.result.files={}),void 0===this.question.result.files.items&&(this.question.result.files.items=[]),this.question.guid!==e.qguid||this.question.result.files.items.some((function(t){return t.guid===e.guid}))||(this.question.result.files.items.push({title:e.result,fileName:e.result,comment:"N/A",guid:e.guid,uploadedBy:this.userName,timeStamp:kr()().format(kr.a.HTML5_FMT.DATETIME_LOCAL_SECONDS),speedDialOpen:!1}),this.progressStatus="",this.next(),this.next()))},downloadFile:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t){var n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:n=new CustomEvent("tdg-qstnnr-downloadBlobImage",{detail:{nameGuid:t.guid,fileName:t.fileName,isFileTypeImage:!1},bubbles:!0,cancelable:!0}),document.body.dispatchEvent(n);case 2:case"end":return e.stop()}}),e)})));function t(t){return e.apply(this,arguments)}return t}(),onDownloadFile:function(){var t=this.$store.state.imagefile.imageData.fileDetails;if(null!==t){var n=document.createElement("a");n.href="data:".concat(Vr.a.lookup(t.fileName),";base64,").concat(t.result),n.download=t.fileName,document.body.appendChild(n),n.click(),setTimeout((function(){document.body.removeChild(n),window.URL.revokeObjectURL(e.target.result)}),100)}},removeFile:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,n,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.confirmDialogOpen=!0,this.confirmCallbackArgs=[t,n,i];case 2:case"end":return e.stop()}}),e,this)})));function t(t,n,i){return e.apply(this,arguments)}return t}(),confirmed:function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.confirmDialogOpen=!1,n=this.confirmCallbackArgs[1];try{i=new CustomEvent("tdg-qstnnr-deleteBlobImage",{detail:{nameGuid:n.guid,fileName:n.fileName,isFileTypeImage:!1},bubbles:!0,cancelable:!0}),document.body.dispatchEvent(i)}catch(e){}case 3:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}(),onDeleteFile:function(){var e=this.$store.state.imagefile.deletedImageData.fileDetails;null!==e&&this.question.result.files.items.some((function(t){return t.guid===e.guid}))&&(this.question.result.files.items.splice(this.question.result.files.items.findIndex((function(t){return t.guid===e.guid})),1),this.prev(),this.prev())},cancel:function(){this.confirmDialogOpen=!1;var e=this.confirmCallbackArgs[0];e.stopPropagation()},setGalleryIndex:function(){this.galleryIndex=0===this.file.items.length?0:this.file.items.length-1},next:function(){this.galleryIndex=this.galleryIndex+1===this.question.result.files.items.length?0:this.galleryIndex+1},prev:function(){this.galleryIndex=this.galleryIndex-1<0?this.question.result.files.items.length-1:this.galleryIndex-1}}},Xr=Kr,Jr=(i("d7ff"),i("23a7")),Wr=Object(_["a"])(Xr,Dr,Tr,!1,null,"b6d59a54",null),Zr=Wr.exports;P()(Wr,{VBtn:R["a"],VCard:bt["a"],VCardActions:Ji["a"],VCardTitle:Ji["c"],VCol:rt["a"],VDialog:Wi["a"],VFileInput:Jr["a"],VIcon:Re["a"],VInput:Zi["a"],VList:we["a"],VListGroup:be["a"],VListItem:Oe["a"],VListItemAction:Ie["a"],VListItemContent:ye["a"],VListItemTitle:ye["c"],VRow:st["a"],VSheet:Ur["a"],VSpacer:qt["a"]});var eo=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-expansion-panel",{directives:[{name:"show",rawName:"v-show",value:e.displayPicture,expression:"displayPicture"}]},[n("v-expansion-panel-header",{staticClass:"subtitle-2"},[n("span",[e._v(" "+e._s(e.label)+" "),e.isPictureRequired?n("v-icon",{attrs:{color:"red",small:""}},[e._v(" mdi-alpha-r-box-outline ")]):n("v-icon",{attrs:{color:"primary",small:""}},[e._v(" mdi-alpha-o-box-outline ")])],1),n("v-spacer"),e.errorInPicture?n("v-icon",{attrs:{color:"red",small:""}},[e._v(" mdi-exclamation ")]):e._e()],1),n("v-expansion-panel-content",{attrs:{eager:""}},[n("v-row",[n("v-col",[n("v-file-input",{ref:"fileUpload",attrs:{"prepend-icon":"mdi-camera",accept:"image/*",counter:"",multiple:"","show-size":"",disabled:e.readOnly},on:{change:e.onFileChange}}),n("div",[e._v(" "+e._s(e.progressStatus)+" ")])],1)],1),null!==e.selImage?n("v-row",{staticClass:"mb-6",attrs:{"no-gutters":""}},[n("v-col"),n("v-col",{attrs:{cols:"10"}},[n("v-card",{staticClass:"mx-auto my-12",attrs:{"max-width":"474"}},[n("template",{slot:"progress"},[n("v-progress-linear",{attrs:{color:"deep-purple",height:"10",indeterminate:""}})],1),n("v-img",{staticStyle:{"text-align":"center"},attrs:{src:e.selLink,"lazy-src":"https://miro.medium.com/max/875/1*m3XbxCsKakzXLv9Qmk2b_A.png"}}),e.speedDialOpen?e._e():n("v-card-text",{staticStyle:{padding:"30px"}},[n("v-row",{staticClass:"mx-0",attrs:{align:"center"}},[n("div",{staticStyle:{"font-size":"20px","font-weight":"bold","padding-top":"20px","padding-left":"10px"}},[e._v(" "+e._s(e.selImage.title)+" ")])]),n("v-row",{staticClass:"mx-0",attrs:{align:"center"}},[n("div",{staticClass:"grey--text",staticStyle:{"padding-left":"10px"}},[e._v(" Comment: "+e._s(e.selImage.comment)+" ")])]),n("v-row",{staticClass:"mx-0",attrs:{align:"center"}},[n("div",{staticClass:"grey--text",staticStyle:{"padding-left":"10px"}},[e._v(" Uploaded by: "+e._s(e.selImage.uploadedBy)+" ")])]),n("v-row",{staticClass:"mx-0",attrs:{align:"center"}},[n("div",{staticClass:"grey--text",staticStyle:{"padding-left":"10px"}},[e._v(" Uploaded on: "+e._s(e.selImage.timeStamp)+" ")])]),n("div",{staticClass:"my-4 subtitle-1"})],1),e.speedDialOpen?n("div",{staticStyle:{padding:"20px"}},[n("v-textarea",{staticStyle:{"font-size":"small"},attrs:{"auto-grow":"",disabled:e.readOnly,dense:"",rows:"1",label:"Title"},on:{change:function(t){return e.updateResponseStore()}},model:{value:e.selImage.title,callback:function(t){e.$set(e.selImage,"title",t)},expression:"selImage.title"}}),n("v-textarea",{staticStyle:{"font-size":"small"},attrs:{"auto-grow":"",disabled:e.readOnly,dense:"",placeholder:" ",rows:"1",label:"Comment"},on:{change:function(t){return e.updateResponseStore()}},model:{value:e.selImage.comment,callback:function(t){e.$set(e.selImage,"comment",t)},expression:"selImage.comment"}})],1):e._e(),n("v-divider",{staticClass:"mx-4"}),n("v-card-text",[n("v-chip-group",{attrs:{"active-class":"deep-purple accent-4 white--text",column:""}},[n("div",{staticStyle:{"padding-left":"10px","font-weight":"bold"}},[e._v(" Exif Data: ")]),e.isExifDataAvailable?n("div",{staticStyle:{"padding-left":"1px",height:"150px",overflow:"auto"}},e._l(e.selExifData,(function(t,i,r){return n("li",{key:r},[e._v(" "+e._s(i)+": "+e._s(t)+" ")])})),0):n("div",{staticStyle:{"padding-left":"5px",color:"red"}},[e._v(" No Data available ")])])],1),n("v-divider",{staticClass:"mx-4"}),n("div",{staticStyle:{"text-align":"center"}},[n("v-list-item-icon",[n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{icon:"",disabled:!e.imageNoteExist||e.readOnly},on:{click:function(t){e.speedDialOpen=!e.speedDialOpen}},model:{value:e.speedDialOpen,callback:function(t){e.speedDialOpen=t},expression:"speedDialOpen"}},"v-btn",r,!1),i),[e.speedDialOpen?n("v-icon",[e._v(" mdi-close ")]):n("v-icon",[e._v(" mdi-pencil ")])],1)]}}],null,!1,1991382165)},[n("span",[e._v("Edit Title/Comment")])])],1),n("v-list-item-icon",[n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{disabled:!e.imageNoteExist||e.readOnly,icon:"",color:"deep-orange"},on:{click:function(t){t.stopPropagation(),e.removeImage(t,e.selImage,e.galleryIndex),e.updateResponseStore()}}},"v-btn",r,!1),i),[n("v-icon",[e._v("mdi-delete")])],1)]}}],null,!1,1956404638)},[n("span",[e._v("Delete File")])])],1),n("v-list-item-icon",{staticStyle:{"margin-left":"30px","margin-top":"10px","margin-bottom":"10px"}},[n("v-tooltip",{attrs:{bottom:""},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[n("v-btn",e._g(e._b({attrs:{disabled:!e.imageNoteExist||e.readOnly,icon:"",color:"blue"},on:{click:function(t){t.stopPropagation(),e.downloadFile(e.selImage),e.updateResponseStore()}}},"v-btn",r,!1),i),[n("v-icon",[e._v("mdi-download-circle-outline")])],1)]}}],null,!1,260233243)},[n("span",[e._v("Download File")])])],1),n("v-list-item-icon")],1)],2)],1),n("v-col")],1):e._e(),n("v-row",e._l(e.curPageImages,(function(t){return n("v-col",{key:t.guid,staticClass:"d-flex child-flex",attrs:{cols:"2"}},[n("image-file",{attrs:{picture:t},on:{"selected:image":e.setCurrentImage}})],1)})),1),e.question.result.pictures&&e.question.result.pictures.items&&e.question.result.pictures.items.length>0?n("v-row",[n("v-col",{staticClass:"d-flex child-flex",attrs:{cols:"12"}},[n("v-pagination",{attrs:{length:e.calculateTotalPages(e.question.result.pictures.items.length),"total-visible":5,circle:""},on:{input:function(t){return e.onNextPageMove(t)}},model:{value:e.page,callback:function(t){e.page=t},expression:"page"}})],1)],1):e._e(),e.question.result.pictures&&e.question.result.pictures.items?n("v-input",{ref:"validationInput",attrs:{disabled:e.readOnly,rules:e.rules},model:{value:e.question.result.pictures.items.length,callback:function(t){e.$set(e.question.result.pictures.items,"length",t)},expression:"question.result.pictures.items.length"}}):e._e(),n("v-dialog",{attrs:{"max-width":"290"},model:{value:e.confirmDialogOpen,callback:function(t){e.confirmDialogOpen=t},expression:"confirmDialogOpen"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v(" "+e._s(e.$t("app.questionnaire.group.question.deleteFileConf"))+" ")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.confirmed()}}},[e._v(" "+e._s(e.$t("app.questionnaire.group.question.delete"))+" ")]),n("v-btn",{attrs:{text:""},on:{click:function(t){return e.cancel()}}},[e._v(" "+e._s(e.$t("app.questionnaire.group.question.cancel"))+" ")])],1)],1)],1)],1)],1)},to=[],no=(i("fb6a"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"rounded-lg"},[n("v-img",{staticClass:"grey lighten-2",attrs:{src:e.link,"lazy-src":"https://miro.medium.com/max/875/1*m3XbxCsKakzXLv9Qmk2b_A.png","aspect-ratio":"1"},on:{mouseenter:function(t){e.hover=!0},mouseleave:function(t){e.hover=!1}},scopedSlots:e._u([{key:"placeholder",fn:function(){return[n("v-row",{staticClass:"fill-height ma-0",attrs:{align:"center",justify:"center"}},[n("v-progress-circular",{attrs:{indeterminate:"",color:"grey lighten-5"}})],1)]},proxy:!0}])},[n("v-fade-transition",[e.hover?n("v-overlay",{attrs:{absolute:"",color:"#036358"}},[n("v-btn",{on:{click:function(t){return e.$emit("selected:image",e.link,e.picture)}}},[e._v(" See More ")])],1):e._e()],1)],1)],1)}),io=[],ro=(i("9911"),{props:{picture:{type:Object,required:!0}},data:function(){return{link:"",curImg:"",hover:!1,validationStatus:!1}},computed:{},created:function(){this.getLink()},mounted:function(){var e=this;this.$store.watch((function(e){return e.imagefile.imageData.imageDetails}),(function(t){t&&e.getImageData()})),this.$store.watch((function(e){return e.imagefile.deletedImageData.imageDetails}),(function(t){t&&e.getImageData()}))},methods:{getImageData:function(){var e=this.$store.state.imagefile.imageData.imageDetails;null!==e&&e.guid===this.picture.guid&&(this.link="data:".concat(Vr.a.lookup(this.picture.fileName),";base64,").concat(e.result))},getLink:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:t=new CustomEvent("tdg-qstnnr-downloadBlobImage",{detail:{nameGuid:this.picture.guid,fileName:this.picture.fileName,isFileTypeImage:!0},bubbles:!0,cancelable:!0}),document.body.dispatchEvent(t);case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()}}),oo=ro,so=i("adda"),ao=i("a797"),lo=i("490a"),uo=Object(_["a"])(oo,no,io,!1,null,null,null),co=uo.exports;P()(uo,{VBtn:R["a"],VFadeTransition:yt["d"],VImg:so["a"],VOverlay:ao["a"],VProgressCircular:lo["a"],VRow:st["a"]});var po=i("6f45"),fo=i.n(po);function vo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function mo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vo(Object(n),!0).forEach((function(t){Object(g["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ho={components:{ImageFile:co},mixins:[ce],props:{pictureRequirement:{type:String,required:!0},label:{type:String,required:!0},question:{type:Object,required:!0},group:{type:Object,required:!0},saveToProp:{type:String,required:!0},readOnly:{type:Boolean,required:!0}},data:function(){var e=this;return{page:1,selImage:null,selLink:null,selExifData:"",curImg:"",curPage:0,curPageImages:[],isExifDataAvailable:!1,progressStatus:"",galleryIndex:0,rules:[function(t){return!e.display||"required"===!e.isPictureRequired||(null!=e.question.result.pictures&&e.question.result.pictures.items.length>0||"Required.")}],validationStatus:!1,notification:null,speedDialOpen:!1,confirmDialogOpen:!1,confirmCallbackArgs:null}},computed:mo({imageNoteExist:function(){return void 0!==this.question.result.pictures.items[this.galleryIndex]},displayPicture:function(){return"n/a"!==this.pictureRequirement},isPictureRequired:function(){return"required"===this.pictureRequirement},errorInPicture:function(){return this.displayPicture&&this.isPictureRequired&&this.question.result.pictures&&this.question.result.pictures.items&&!this.question.result.pictures.items.length>0}},Object(x["d"])({userName:function(e){return e&&e.settings?e.settings.settings.userName:"N/A"}})),mounted:function(){var e=this;this.$store.watch((function(e){return e.imagefile.imageFileNotification.imageResults}),(function(t){t&&e.onUploadImage()})),this.$store.watch((function(e){return e.imagefile.deletedImageData.imageDetails}),(function(t){t&&e.onDeleteImage()})),this.onNextPageMove(1)},methods:{onUploadImage:function(){var e=this.$store.state.imagefile.imageFileNotification.imageResults;null!==e&&(null==this.question.result.pictures&&(this.question.result.pictures={}),void 0===this.question.result.pictures.items&&(this.question.result.pictures.items=[]),this.question.guid!==e.qguid||this.question.result.pictures.items.some((function(t){return t.guid===e.guid}))||(this.question.result.pictures.items.push({title:e.result,fileName:e.result,comment:"N/A",guid:e.guid,uploadedBy:this.userName,timeStamp:kr()().format(kr.a.HTML5_FMT.DATETIME_LOCAL_SECONDS)}),this.progressStatus="",this.curPage=this.calculateTotalPages(this.question.result.pictures.items.length),this.onNextPageMove(this.curPage),this.next(),this.next()))},onDeleteImage:function(){var e=this.$store.state.imagefile.deletedImageData.imageDetails;null!==e&&this.question.result.pictures.items.some((function(t){return t.guid===e.guid}))&&(this.question.result.pictures.items.splice(this.question.result.pictures.items.findIndex((function(t){return t.guid===e.guid})),1),this.prev(),this.prev(),this.selImage=null,this.onNextPageMove(this.curPage))},calculateTotalPages:function(e){var t=e%go===0?Math.floor(e/go):Math.floor(e/go)+1;return t},onNextPageMove:function(e){var t=1===e?0:(e-1)*go,n=e*go;this.curPage=e,this.curPageImages=null,this.curPageImages=this.question.result.pictures&&this.question.result.pictures.items?this.question.result.pictures.items.slice(t,n):null},setCurrentImage:function(e,t){this.selLink=e,this.selImage=t,this.getExifData(e)},getExifData:function(e){var t=new Image;t.src=e;var n=null;fo.a.getData(t,(function(){n=fo.a.getAllTags(this)})),this.isExifDataAvailable=null!=n&&Object.keys(n).length>0,this.selExifData=n},onFileChange:function(e){var t=this;e&&e.forEach((function(e){var n=new FileReader;n.onload=function(n){t.createFile(e.name,n.target.result.split(",")[1])},n.readAsDataURL(e)}))},createFile:function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(n,i){var r,o,s,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.progressStatus="Uploading...",r=Object(N["a"])(),o=n,s=i;try{a=new CustomEvent("tdg-qstnnr-uploadBlobImage",{detail:{base64String:s,qguid:this.question.guid,nameGuid:r,fileName:o,isFileTypeImage:!0},bubbles:!0,cancelable:!0}),document.body.dispatchEvent(a)}catch(e){}finally{this.$refs.fileUpload.reset()}case 5:case"end":return t.stop()}}),t,this)})));function n(e,n){return t.apply(this,arguments)}return n}(),downloadFile:function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(n){var i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:i=document.createElement("a"),i.href=this.selLink,i.download=n.fileName,document.body.appendChild(i),i.click(),setTimeout((function(){document.body.removeChild(i),window.URL.revokeObjectURL(e.target.result)}),100);case 6:case"end":return t.stop()}}),t,this)})));function n(e){return t.apply(this,arguments)}return n}(),removeImage:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(t,n,i){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.confirmDialogOpen=!0,this.confirmCallbackArgs=[t,n,i];case 2:case"end":return e.stop()}}),e,this)})));function t(t,n,i){return e.apply(this,arguments)}return t}(),confirmed:function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(){var n,i;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:this.confirmDialogOpen=!1,n=this.confirmCallbackArgs[1];try{i=new CustomEvent("tdg-qstnnr-deleteBlobImage",{detail:{nameGuid:n.guid,fileName:n.fileName,isFileTypeImage:!0},bubbles:!0,cancelable:!0}),document.body.dispatchEvent(i)}catch(e){}case 3:case"end":return t.stop()}}),t,this)})));function n(){return t.apply(this,arguments)}return n}(),cancel:function(){this.confirmDialogOpen=!1;var e=this.confirmCallbackArgs[0];e.stopPropagation()},setGalleryIndex:function(){this.galleryIndex=0===this.question.result.pictures.items.length?0:this.question.result.pictures.items.length-1},next:function(){this.galleryIndex=this.galleryIndex+1===this.question.result.pictures.items.length?0:this.galleryIndex+1},prev:function(){this.galleryIndex=this.galleryIndex-1<0?this.question.result.pictures.items.length-1:this.galleryIndex-1}}},go=12,bo=ho,Oo=(i("48ee"),i("ef9a")),yo=i("cd55"),xo=i("49e2"),qo=i("c865"),jo=i("891e"),Eo=i("8e36"),So=Object(_["a"])(bo,eo,to,!1,null,"61254fb2",null),_o=So.exports;function Co(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Po(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Co(Object(n),!0).forEach((function(t){Object(g["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Co(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}P()(So,{VBtn:R["a"],VCard:bt["a"],VCardActions:Ji["a"],VCardText:Ji["b"],VCardTitle:Ji["c"],VChipGroup:Oo["a"],VCol:rt["a"],VDialog:Wi["a"],VDivider:Pe["a"],VExpansionPanel:yo["a"],VExpansionPanelContent:xo["a"],VExpansionPanelHeader:qo["a"],VFileInput:Jr["a"],VIcon:Re["a"],VImg:so["a"],VInput:Zi["a"],VListItemIcon:ot["a"],VPagination:jo["a"],VProgressLinear:Eo["a"],VRow:st["a"],VSpacer:qt["a"],VTextarea:wr["a"],VTooltip:Br["a"]});var Ro={emits:["error"],name:"SupplementaryInfo",components:{SupplementaryInfoComment:Qr,SupplementaryInfoFiles:Zr,SupplementaryInfoImage:_o},props:{question:{type:Object,required:!0},selresponseoption:{type:Object,required:!0},group:{type:Object,required:!0},readOnly:{type:Boolean,required:!0}},computed:Po({displayInternalComment:function(){return X(this.question)&&this.selresponseoption&&"n/a"!==this.selresponseoption.internalCommentRequirement},displayExternalComment:function(){return X(this.question)&&this.selresponseoption&&"n/a"!==this.selresponseoption.externalCommentRequirement},displayFile:function(){return X(this.question)&&this.selresponseoption&&"n/a"!==this.selresponseoption.fileRequirement},displayPicture:function(){return X(this.question)&&this.selresponseoption&&"n/a"!==this.selresponseoption.pictureRequirement}},Object(x["d"])({lang:function(e){return e&&e.settings?e.settings.settings.lang:"en"}})),methods:{onError:function(e){this.$emit("error",e)}}},wo=Ro,Io=(i("0999"),Object(_["a"])(wo,qr,jr,!1,null,"a155c4d4",null)),Qo=Io.exports;P()(Io,{VList:we["a"]});var Do=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-sheet",[n("v-row",{attrs:{"no-gutters":""}},[n("v-col",[n("span",{staticStyle:{color:"#757575"}},[e._v(" "+e._s(e.$t("app.questionnaire.group.question.sampling.title"))+" ")])])],1),n("v-row",{attrs:{"no-gutters":"",dense:""}},[n("v-col",{attrs:{cols:e.colSize}},[n("v-text-field",{ref:"question.samplingRecord.approximateTotal",attrs:{filled:"",outlined:"",label:e.$t("app.questionnaire.group.question.sampling.approximateTotal"),hint:e.$t("app.questionnaire.group.question.sampling.approximateTotalPlaceholder"),"prepend-inner-icon":"mdi-file-table-box-multiple-outline",type:"number",min:"1",disabled:e.readOnly,"error-messages":e.errorMessagesTotal,rules:[e.validateTotal]},model:{value:e.samplingInfo.approximateTotal,callback:function(t){e.$set(e.samplingInfo,"approximateTotal",e._n(t))},expression:"samplingInfo.approximateTotal"}})],1),n("v-col",{attrs:{cols:e.colSize}},[n("v-text-field",{ref:"question.samplingRecord.sampleSize",attrs:{filled:"",outlined:"",label:e.$t("app.questionnaire.group.question.sampling.sampleSize"),hint:e.$t("app.questionnaire.group.question.sampling.sampleSizePlaceholder"),"prepend-inner-icon":"mdi-file-table-box-outline",type:"number",min:"1",disabled:e.readOnly,max:e.samplingInfo.approximateTotal,"error-messages":e.errorMessagesSize,rules:[e.validateSampleSize]},model:{value:e.samplingInfo.sampleSize,callback:function(t){e.$set(e.samplingInfo,"sampleSize",e._n(t))},expression:"samplingInfo.sampleSize"}})],1),e.hasProvisions?n("v-col",{attrs:{cols:e.colSize}},[n("v-text-field",{ref:"question.samplingRecord.nonCompliances",attrs:{filled:"",outlined:"",label:e.$t("app.questionnaire.group.question.sampling.nonCompliances"),hint:e.$t("app.questionnaire.group.question.sampling.nonCompliancesPlaceholder"),"prepend-inner-icon":"mdi-file-table-outline",type:"number",min:"0",disabled:e.readOnly,max:e.samplingInfo.sampleSize,"error-messages":e.errorMessagesCompliances,rules:[e.validateNonCompliance]},model:{value:e.violationInfo.violationCount,callback:function(t){e.$set(e.violationInfo,"violationCount",e._n(t))},expression:"violationInfo.violationCount"}})],1):e._e()],1)],1)},To=[],Ao={name:"SamplingRecord",props:{question:{type:Object,required:!0},readOnly:{type:Boolean,required:!0},samplingInfo:{type:Object,required:!0},violationInfo:{type:Object,required:!0},hasProvisions:{type:Boolean,required:!0}},data:function(){return{errorMessagesTotal:"",errorMessagesSize:"",errorMessagesCompliances:""}},computed:{isAnyError:function(){return this.errorMessagesTotal.trim().length>0||(this.errorMessagesSize.trim().length>0||this.errorMessagesCompliances.trim().length>0)},approximateTotal:function(){return this.samplingInfo.approximateTotal},sampleSize:function(){return this.samplingInfo.sampleSize},violationCount:function(){return this.violationInfo.violationCount},colSize:function(){return this.hasProvisions?"4":"6"}},methods:{validateTotal:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.errorMessagesTotal="",U(this.approximateTotal)&&U(this.sampleSize)&&U(this.violationCount))return!0;if(!U(this.sampleSize)||!U(this.violationCount)){if(U(this.approximateTotal))return this.errorMessagesTotal="Approximate Total is required",!1;if(this.approximateTotal<1)return this.errorMessagesTotal="Approximate Total have to be greater than 1",!1}return this.approximateTotal>0&&this.sampleSize>0&&this.approximateTotal<this.sampleSize?(this.errorMessagesTotal="Approximate Total have to be equal or higher than Sample Size",!1):(e&&(this.validateSampleSize(!1),this.validateNonCompliance(!1)),!0)},validateSampleSize:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.errorMessagesSize="",U(this.approximateTotal)&&U(this.sampleSize)&&U(this.violationCount))return!0;if(!U(this.approximateTotal)||!U(this.violationCount)){if(U(this.sampleSize))return this.errorMessagesSize="Sample Size is required",!1;if(this.sampleSize<1)return this.errorMessagesSize="Sample Size have to be greater than 1",!1}return this.sampleSize>0&&this.violationCount>0&&this.sampleSize<this.violationCount?(this.errorMessagesSize="Sample Size have to be equal or higher than Number of non-Compliance",!1):(e&&(this.validateTotal(!1),this.validateNonCompliance(!1)),!0)},validateNonCompliance:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];if(this.errorMessagesCompliances="",U(this.approximateTotal)&&U(this.sampleSize)&&U(this.violationCount))return!0;if(!U(this.approximateTotal)||!U(this.sampleSize)){if(U(this.violationCount))return this.errorMessagesCompliances="Violation count is required",!1;if(this.violationCount<0)return this.errorMessagesCompliances="Violation count have to be 0 or greater than 0",!1}return e&&(this.validateTotal(!1),this.validateSampleSize(!1)),!0}}},ko=Ao,Go=Object(_["a"])(ko,Do,To,!1,null,"6521eece",null),Vo=Go.exports;function No(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Fo(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?No(Object(n),!0).forEach((function(t){Object(g["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):No(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}P()(Go,{VCol:rt["a"],VRow:st["a"],VSheet:Ur["a"],VTextField:Li["a"]});var $o={emits:["error","responseChanged","reference-change","delete-repeated-question","update-group-question-count"],name:"Question",components:{Response:xr,SupplementaryInfo:Qo,SamplingRecord:Vo},mixins:[ce],props:{question:{type:Object,required:!0},parent:{type:Object,required:!0},isChildQuestion:{type:Boolean,default:!1},group:{type:Object,required:!0},inRepeatedGroup:{type:Boolean,required:!0},expand:{type:Object,required:!0},readOnly:{type:Boolean,required:!0}},data:function(){return{displayViolationInfo:!1,isValid:null,selectedResponseOption:null,treeDataProvisions:[],selProvisions:[],provisionIds:[],isReferenceQuestion:!1,isViolationInfoReferenceIdDisabled:!1,displaySamplingRecord:!1,requireDependantQuestionToEnableVisibility:this.question.dependencyGroups.some((function(e){return"visibility"===e.ruleType})),responseArgs:null,filteredInByProvisionSearch:!0,tab:null,tags:[],searchProvisions:null,questionResult:{externalComment:"",internalComment:"",files:null,pictures:null,responses:[],violationInfo:null,samplingInfo:null},violationInfo:{violationCount:"",referenceId:"",selectedProvisions:[]},samplingInfo:{approximateTotal:"",sampleSize:""}}},computed:Fo({},Object(x["c"])({getFlatListOfAllQuestions:"getFlatListOfAllQuestions",provisionTagFilters:"getAllAppliedTagProvisions",getAllOriginalTagProvisions:"getAllOriginalTagProvisions"}),{},Object(x["d"])({lang:function(e){return null!=e&&e.settings?e.settings.settings.lang:"en"},provisionFilter:function(e){return e.questionnaire.provisionFilter},activeSelectedQuestionId:function(e){return e.questionnaire.activeSelectedQuestionId}}),{questionText:function(){var e="";return this.question.isRepeated&&(e="(Copy # ".concat(this.calculateRepeatedNumber(),") ")),e+="".concat(this.question.text[this.lang]),e},showSupplementaryInfo:function(){switch(this.question.type){case F.SELECT:case F.RADIO:return!G.a.isEmpty(this.selectedResponseOption);case F.TEXT:case F.NUMBER:return!0;default:return!1}},provisions:function(){if(this.isFlatLegislationsDataAvailable){var e=[],t=this.$store.state.legislations.legislations;this.question.responseOptions.forEach((function(t){e=e.concat(t.provisions)}));var n=e.filter(H);return K(n,t)}return[]},hasProvisions:function(){return this.provisions.length>0},getClassName:function(){var e=this.activeSelectedQuestionId===this.question.guid?"selected":"";return"selected"===e&&this.$refs.qPanel&&this.$refs.qPanel.$el.scrollIntoView(!0),e},violationHeaderFontSize:function(){return this.selProvisions.length>0?"caption":"subtitle-1"},isPanelActive:function(){return this.activeSelectedQuestionId===this.question.guid},referenceId:function(){if(!this.isReferenceQuestion){var e=tn.findReferenceQuestion(this.group);if(e&&e.result&&e.result.responses&&e.result.responses.length>0&&this.questionResult.violationInfo)return e.result.responses[0].value}return null},expansionPanelsValue:{get:function(){if(this.expand.value){for(var e=[],t=0;t<this.question.childQuestions.length;t++)e.push(t);return e}return[]},set:function(){}},sourceQuestion:function(){var e=this;if(this.inRepeatedGroup||this.question.isRepeated||this.isChildQuestion&&this.parent.isRepeated){var t="".concat(this.group.name,"#000"),n=this.getFlatListOfAllQuestions(t),i=n.find((function(t){return t.name===e.question.name}));return i}return null},isVisible:function(){return this.setQuestionVisibilityBasedOnAppliedTags(),this.question.isVisible&&this.filteredInByProvisionSearch},selectedQuestionHasProvisions:function(){return!!this.question.responseOptions&&this.question.responseOptions.some((function(e){return e.provisions.length>0}))},samplingButtonColor:function(){return this.displaySamplingRecord?"black":"primary"},hasSamplingInfo:function(){return!!this.question.result&&(this.samplingInfo.approximateTotal>0||this.samplingInfo.sampleSize>0)},samplingButtonData:function(){return this.question.result?this.hasSamplingInfo?{disabled:!0,message:"to disable sampling, delete sampling data"}:{disabled:!1,message:this.$t("app.questionnaire.group.question.sampling.samplingTooltip")}:{disabled:!0,message:"to enable sampling, question must be answered"}},tabVisibility:function(){return this.displayViolationInfo?(this.setTab(0),!0):this.showSupplementaryInfo?(this.setTab(1),!0):(this.setTab(null),!1)}}),watch:{selProvisions:{handler:function(){this.violationInfo.selectedProvisions=this.selProvisions},deep:!0},isVisible:function(){this.$emit("update-group-question-count")},referenceId:function(e){e&&(this.violationInfo.referenceId=e,this.isViolationInfoReferenceIdDisabled=!0)}},mounted:function(){var e=this;this.$store.subscribe((function(t,n){switch(t.type){case"setFlatLegislations":null!==e.responseArgs&&e.onUserResponseChanged(e.responseArgs);break;case"updateProvisionFilter":e.filteredInByProvisionSearch=e.isfilteredInByProvisionSearch();break;default:break}})),this.question.childQuestions.sort((function(e,t){return e.sortOrder-t.sortOrder}))},methods:{setTab:function(e){this.tab=e},calculateRepeatedNumber:function(){var e=this,t="";if(this.question.isRepeated){var n=this.$store.getters["getQuestionnaire"];if(null!==n&&null!==this.parent){var i=this.parent.questions?this.parent.questions:this.parent.childQuestions;if(i){var r=i.findIndex((function(t){return t.guid===e.question.guid}));if(r>0){for(var o=0,s=r-1;s>=0;s--)i[s].isRepeated&&!i[s].isRepeatable?o++:i[s].isRepeatable&&!i[s].isRepeated&&(o++,s=-1);o>0&&(t=o.toString())}}}}return t},repeatQuestion:function(e){e.stopPropagation(),!this.isReferenceQuestion&&this.question.isRepeatable&&this.$emit("repeat-question",this.question.guid)},deleteRepeatedQuestion:function(e){e.stopPropagation(),this.isReferenceQuestion||this.question.isRepeatable||!this.question.isRepeated||this.$emit("delete-repeated-question",this.question)},onRepeatChildQuestion:function(e){if(this.question.childQuestions){var t=this.question.childQuestions.findIndex((function(t){return t.guid===e}));if(t>-1){var n=this.$store.getters["getQuestionnaire"],i=tn.GenerateRepeatedQuestion(n,this.question.childQuestions[t]);if(i){for(var r=t+1;r<this.question.childQuestions.length;r++)this.question.childQuestions[r].sortOrder=this.question.childQuestions[r].sortOrder+1;this.question.childQuestions.splice(t+1,0,i)}else alert("Something went wrong, check the console")}}},onDeleteChildRepeatedQuestion:function(e){if(this.question.childQuestions){var t=this.question.childQuestions.findIndex((function(t){return t.guid===e.guid}));if(t>-1){this.question.childQuestions.splice(t,1);for(var n=0;n<this.question.childQuestions.length;n++)this.question.childQuestions[n].sortOrder=n+1;this.question.childQuestions.sort((function(e,t){return e.sortOrder-t.sortOrder}))}}},clickSampling:function(e){e.stopPropagation(),this.isReferenceQuestion||this.samplingButtonData.disabled||this.hasSamplingInfo?this.hasSamplingInfo||(this.displaySamplingRecord=!1,this.question.result.samplingInfo=null):(this.displaySamplingRecord=!this.displaySamplingRecord,this.displaySamplingRecord?this.question.result.samplingInfo=this.samplingInfo:this.question.result.samplingInfo=null)},getSelectedProvisionText:function(e){var t="",n=function e(n,i){return n.some((function(n){return n.id===i?(t=n.title.en.split("-")[0],n):n.children?e(n.children,i):void 0}))};return n(this.treeDataProvisions,e),t},onSelectedProvisionClick:function(e){this.selProvisions=this.selProvisions.filter((function(t){return t!==e}))},loadProvisions:function(e){for(var t=this.$store.state.legislations.legislations,n=K(e,t),i=n.map((function(e){return e.parentLegislationId})),r=Object(V["a"])(new Set(i)).filter((function(e){return""!==e})),o=K(r,t),s=[],a=0;a<o.length;a++)r.includes(o[a].parentLegislationId)&&(s.push(o[a]),delete o[a]);var l="-1",u=o.filter(Boolean);u.forEach((function(e){e.parentLegislationId=l}));var c=s.concat(n);c=G.a.orderBy(c,["orderNumber"],["asc"]),u=G.a.orderBy(u,["orderNumber"],["asc"]);var p=c.concat(u),d=G.a.cloneDeep(p);i=d.map((function(e){return e.parentLegislationId})),r=Object(V["a"])(new Set(i));for(var f=0;f<n.length;f++)r.includes(n[f].parentLegislationId)||(d[f].parentLegislationId=l);d.push({id:l,parentLegislationId:null,title:{en:"root",fr:"root"}});var v=Y(d,"parentLegislationId");this.treeDataProvisions=v.children},onViolationsChange:function(e){this.question.violationResponse=e},onUserResponseChanged:function(e){this.responseArgs=e,this.isFlatLegislationsDataAvailable&&(this.question.result?this.questionResult=this.question.result:this.question.result=this.questionResult,this.isReferenceQuestion=this.question.type===F.REFERENCE,this.updateResult(e),this.question.result&&this.question.result.violationInfo&&this.question.result.violationInfo.selectedProvisions&&(this.selProvisions=this.question.result.violationInfo.selectedProvisions),this.updateViolationInfo(e),this.updateDependants(e),this.isValid=this.getChildQuestionValidationState(),this.$emit("responseChanged"),this.isReferenceQuestion&&this.$emit("reference-change"))},updateViolationInfo:function(e){0===this.provisionIds.length?this.displayViolationInfo=!1:this.provisionIds.length>0&&!this.isReferenceQuestion&&!U(e.value)?(this.loadProvisions(this.provisionIds),this.displayViolationInfo=!0):this.displayViolationInfo=!1},updateResult:function(e){var t=this;if(U(e.value))this.question.result.responses=[],this.selectedResponseOption=null;else{var n=e.value;this.question.type!==F.SELECT&&(n=[e.value]);var i=[],r=[];n.forEach((function(e){var n=null;n=t.question.type===F.SELECT||t.question.type===F.RADIO?t.question.responseOptions.find((function(t){return t.value===e})):t.question.responseOptions[0],n&&i.push(n),r.push({guid:n?n.guid:"not found",value:e})}));var o=[];i.forEach((function(e){o=o.concat(e.provisions)})),this.question.result.responses=r,this.selectedResponseOption=i.length>1?this.createListOptions(i):i[0],this.provisionIds=o,U(this.provisionIds)?(this.question.result.violationInfo=null,this.violationInfo.violationCount="",this.violationInfo.referenceId="",this.violationInfo.selectedProvisions=[]):this.question.result&&this.question.result.violationInfo?this.violationInfo=this.question.result.violationInfo:this.question.result.violationInfo=this.violationInfo,this.question.result&&this.question.result.samplingInfo&&(this.samplingInfo=this.question.result.samplingInfo)}},createListOptions:function(e){var t=G.a.cloneDeep(e);return t[0].externalCommentRequirement=e.some((function(e){return"required"===e.externalCommentRequirement}))?"required":"optional",t[0].fileRequirement=e.some((function(e){return"required"===e.fileRequirement}))?"required":"optional",t[0].internalCommentRequirement=e.some((function(e){return"required"===e.internalCommentRequirement}))?"required":"optional",t[0].pictureRequirement=e.some((function(e){return"required"===e.pictureRequirement}))?"required":"optional",t[0]},updateDependants:function(){var e=this;if(this.question.dependants)for(var t=this.getFlatListOfAllQuestions(),n=function(n){var i=e.question.dependants[n].guid,r=t.find((function(e){return e.guid===i}));r&&e.applyDependencyRuleOnQuestion({triggeringQuestion:e.question,question:r})},i=0;i<this.question.dependants.length;i++)n(i)},applyDependencyRuleOnQuestion:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=t.triggeringQuestion,i=t.question;if(i&&i.dependencyGroups){for(var r=[],o=function(t){var o=i.dependencyGroups[t];if(n&&!n.isVisible)i.isVisible=!1;else{for(var s=!0,a=function(t){var n=o.questionDependencies[t],i=n.dependsOnQuestion.guid,r=e.getFlatListOfAllQuestions().find((function(e){return e.guid===i}));if(!r.isVisible)return s=!1,"break";var a=r.result&&r.result.responses.length>0?r.result.responses:null;if(null===a)return s=!1,"break";if("equal"===n.validationAction){if(!a.some((function(e){return e.value===n.validationValue})))return s=!1,"break"}else if("notEqual"===n.validationAction){if(!a.some((function(e){return e.value!==n.validationValue})))return s=!1,"break"}else if("greaterThen"===n.validationAction){if(!a.some((function(e){return+e.value>+n.validationValue})))return s=!1,"break"}else if("lessThen"===n.validationAction){if(!a.some((function(e){return+e.value<+n.validationValue})))return s=!1,"break"}else if("lengthLessThen"===n.validationAction){if(!a.some((function(e){return!e.value||e.length<+n.validationValue})))return s=!1,"break"}else if("lengthGreaterThen"===n.validationAction&&!a.some((function(e){return!e.value||e.length>+n.validationValue})))return s=!1,"break"},l=0;l<o.questionDependencies.length;l++){var u=a(l);if("break"===u)break}if(r.push({ruleType:o.ruleType,groupMatch:s}),"visibility"===o.ruleType){var c=r.filter((function(e){return"visibility"===e.ruleType}));c&&(i.isVisible=c.some((function(e){return!0===e.groupMatch})))}else if("validation"===o.ruleType){if(i.validationRules){var p=i.validationRules.find((function(e){return e.name===o.childValidatorName}));p.enabled=s}}else if("validationValue"===o.ruleType&&s&&i.validationRules){var d=i.validationRules.find((function(e){return e.name===o.childValidatorName}));d.value=o.questionDependencies[0].parentQuestion.result.responses[0].value}}},s=0;s<i.dependencyGroups.length;s++)o(s);return r}},onError:function(e){this.question.validationState=!e,this.isValid=this.question.validationState&&this.getQuestionValidationState(this.question),this.$emit("error",e)},onChildError:function(e){this.isValid=this.getQuestionValidationState(this.question),this.$emit("error",e)},getChildQuestionValidationState:function(){for(var e=0;e<this.question.childQuestions.length;e++){var t=this.question.childQuestions[e];if(t.isVisible&&!1===this.getQuestionValidationState(this.question.childQuestions[e]))return!1}return!0},getQuestionValidationState:function(e){if(e.isVisible){if(!1===e.validationState)return!1;for(var t=0;t<e.childQuestions.length;t++)if(!1===this.getQuestionValidationState(e.childQuestions[t]))return!1}return!0},setQuestionVisibility:function(e){this.question.isVisible=e},questionFoundViaProvidedProvisions:function(e){var t=this.sourceQuestion?this.sourceQuestion:this.question,n=!1;if(this.getAllOriginalTagProvisions&&(n=this.getAllOriginalTagProvisions.some((function(e){return e.questions.includes(t.guid)}))),e&&e.length>0){var i=[],r=[];t.dependants&&(i=t.dependants.map((function(e){return e.guid}))),t.dependencyGroups&&(r=[],t.dependencyGroups.forEach((function(e){e.questionDependencies.forEach((function(e){r.push(e.dependsOnQuestion.guid)}))})));var o=J(t).map((function(e){return e.guid})),s=e.some((function(e){return e.questions.includes(t.guid)})),a=e.some((function(e){return e.questions.some((function(e){return i.includes(e)}))})),l=e.some((function(e){return e.questions.some((function(e){return r.includes(e)}))})),u=e.some((function(e){return e.questions.some((function(e){return o.includes(e)}))})),c=s||a||l||u;return{found:c,inQuestion:s,inDependants:a,inDepends:l,inChildren:u,isTagable:n}}return{found:!1,inQuestion:!1,inDependants:!1,inDepends:!1,inChildren:!1,isTagable:n}},setQuestionVisibilityBasedOnAppliedTags:function(){var e=this.questionFoundViaProvidedProvisions(this.provisionTagFilters);if(!this.selectedQuestionHasProvisions)return this.setQuestionVisibility(this.question.isVisible),this.question.isVisible;if(!e.isTagable)return this.setQuestionVisibility(this.question.isVisible),this.question.isVisible;if(this.requireDependantQuestionToEnableVisibility){if(!e.inQuestion&&!e.inDependants&&!e.inChildren)return this.setQuestionVisibility(!1),!1;var t=this.applyDependencyRuleOnQuestion({question:this.question}),n=t.filter((function(e){return"visibility"===e.ruleType})),i=n.some((function(e){return!0===e.groupMatch}));return this.setQuestionVisibility(i),i}var r=e.inQuestion||e.inDependants||e.inChildren;return this.setQuestionVisibility(r),r},isfilteredInByProvisionSearch:function(){if(null===this.provisionFilter)return!0;var e=this.questionFoundViaProvidedProvisions(this.provisionFilter);return e.found}}},Lo=$o,Uo=(i("29d5"),i("a609")),Bo=i("0393"),Mo=i("eb2a"),Ho=Object(_["a"])(Lo,Qi,Di,!1,null,"08b044bd",null),zo=Ho.exports;function Yo(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ko(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Yo(Object(n),!0).forEach((function(t){Object(g["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Yo(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}P()(Ho,{VBtn:R["a"],VBtnToggle:Uo["a"],VChip:Ce["a"],VCol:rt["a"],VExpansionPanel:yo["a"],VExpansionPanelContent:xo["a"],VExpansionPanelHeader:qo["a"],VExpansionPanels:Bo["a"],VIcon:Re["a"],VRow:st["a"],VSheet:Ur["a"],VTextField:Li["a"],VTooltip:Br["a"],VTreeview:Mo["a"]});var Xo={emits:["update-group-count"],components:{Question:zo},props:{group:{type:Object,required:!0},index:{type:Number,required:!0},expand:{type:Object,required:!0},readOnly:{type:Boolean,required:!0}},data:function(){return{repeatedGroup:!1,valid:!0,groupSubtitle:"",questionCount:0}},computed:Ko({activegroupHasReferenceQuestion:function(){return!!tn.findReferenceQuestion(this.group)},showGroupSubtitle:function(){return!(""===this.groupSubtitle||!0!==this.group.isRepeatable&&!this.activegroupHasReferenceQuestion)},groupTitle:function(){return"".concat(this.group.title[this.lang])}},Object(x["d"])({lang:function(e){return e&&e.settings?e.settings.settings.lang:"en"}}),{expansionPanelsValue:{get:function(){if(this.expand.value){for(var e=[],t=0;t<this.group.questions.length;t++)e.push(t);return e}return[]},set:function(){}},isVisible:function(){return this.group.isVisible&&this.questionCount>0}}),watch:{isVisible:function(){this.$emit("update-group-count")}},created:function(){var e=this.group;this.$store.dispatch("updateGroupDomId",{group:e}),this.repeatedGroup="#000"!==e.domSuffix,this.group.questions.sort((function(e,t){return e.sortOrder-t.sortOrder}))},updated:function(){this.$refs.groupQuestion&&(this.questionCount=this.$refs.groupQuestion.filter((function(e){return!0===e.isVisible})).length)},mounted:function(){this.$refs.groupQuestion&&(this.questionCount=this.$refs.groupQuestion.filter((function(e){return!0===e.isVisible})).length)},methods:{onRepeatQuestion:function(e){var t=this.group.questions.findIndex((function(t){return t.guid===e}));if(t>-1){var n=this.$store.getters["getQuestionnaire"],i=tn.GenerateRepeatedQuestion(n,this.group.questions[t]);if(i){for(var r=t+1;r<this.group.questions.length;r++)this.group.questions[r].sortOrder=this.group.questions[r].sortOrder+1;this.group.questions.splice(t+1,0,i)}else alert("Something went wrong, check the console")}else alert("Something went wrong, check the console")},onDeleteRepeatedQuestion:function(e){var t=this.group.questions.findIndex((function(t){return t.guid===e.guid}));if(t>-1){for(var n=t+1;n<this.group.questions.length;n++)this.group.questions[n].sortOrder=this.group.questions[n].sortOrder+1;this.group.questions.splice(t,1)}else alert("Something went very wrong, check the console")},onReferenceChanged:function(){if(this.activegroupHasReferenceQuestion){var e=tn.findReferenceQuestion(this.group);e&&e.result.responses.length>0&&(this.groupSubtitle="REFERENCE ID: ".concat(e.result.responses[0].value))}},repeatGroup:function(){this.$store.dispatch("repeatGroup",{group:this.group,guid:Object(N["a"])()})},removeGroup:function(){this.$emit("update-group-count",-1),this.$store.dispatch("removeGroup",this.group)},onResponseChanged:function(){this.valid=this.areAllQuestionsValid(this.group.questions)},resetError:function(){this.onError()},onError:function(){this.valid=this.areAllQuestionsValid(this.group.questions)},areAllQuestionsValid:function(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.isVisible&&(!1===n.validationState||!this.areAllQuestionsValid(n.childQuestions)))return!1}return!0},onUpdateGroupQuestionCount:function(){this.$refs.groupQuestion&&(this.questionCount=this.$refs.groupQuestion.filter((function(e){return!0===e.isVisible})).length)}}},Jo=Xo,Wo=(i("e39b"),Object(_["a"])(Jo,wi,Ii,!1,null,"9139a20a",null)),Zo=Wo.exports;function es(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ts(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?es(Object(n),!0).forEach((function(t){Object(g["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):es(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}P()(Wo,{VBtn:R["a"],VBtnToggle:Uo["a"],VCol:rt["a"],VExpansionPanel:yo["a"],VExpansionPanelContent:xo["a"],VExpansionPanelHeader:qo["a"],VExpansionPanels:Bo["a"],VIcon:Re["a"],VRow:st["a"],VTooltip:Br["a"]});var ns={emits:["clear-provision-search-field"],components:{QuestionnaireGroup:Zo},props:{expandAllProp:{type:Object,required:!0},validateProp:{type:Boolean,default:!1},readOnlyProp:{type:Boolean,default:!1},displayNavigationProp:{type:Boolean,default:!1}},data:function(){return{valid:!1,expand:this.expandAllProp,panelIndex:Number,groupCount:0,readOnly:this.readOnlyProp,flagTimer:null}},computed:ts({expansionPanels:{get:function(){var e=[];if(this.expand.value){for(var t=0;t<this.group.groups.length;t++)e.push(t);return e}return null!=this.panelIndex?(e.push(this.panelIndex),e):[]},set:function(){}}},Object(x["d"])({lang:function(e){return e&&e.settings?e.settings.settings.lang:"en"},group:function(e){return e.group}}),{isVisible:function(){return this.groupCount>0}}),watch:{readOnlyProp:function(){this.setReadOnly()},validateProp:function(){this.validateQ()}},mounted:function(){this.$nextTick((function(){this.$refs.questionGroup&&(this.groupCount=this.$refs.questionGroup.filter((function(e){return!0===e.isVisible})).length)})),this.isDirty()},updated:function(){this.readOnly=this.$store.getters["getQuestionnaireReadOnlyStatus"]},beforeDestroy:function(){this.$store.dispatch("setQuestionnaireReadOnlyStatus",this.readOnly)},methods:{setReadOnly:function(){this.readOnly=this.$store.getters["getQuestionnaireReadOnlyStatus"],this.readOnly=!this.readOnly,this.$store.dispatch("setQuestionnaireReadOnlyStatus",this.readOnly)},isDirty:function(){var e=this,t=[],n=[],i={questions:null,title:null};this.group.groups.forEach((function(e){t.push(G.a.pick(e,G.a.keys(i)))})),this.group.groupsCopy.forEach((function(e){n.push(G.a.pick(e,G.a.keys(i)))})),this.$root.$children[0].isFormDirty=0!==G.a.differenceWith(t,n,G.a.isEqual).length,this.flagTimer=setTimeout((function(){return e.isDirty()}),3e3),this.$root.$children[0].isFormDirty&&clearTimeout(this.flagTimer)},validateQ:function(){this.$refs.questionGroup.forEach((function(e){e.resetError()})),this.$refs.questionaire_form.validate(),this.$store.dispatch("error/validateQuestions")},onUpdateGroupCount:function(){this.$refs.questionGroup&&(this.groupCount=this.$refs.questionGroup.filter((function(e){return!0===e.isVisible})).length)},clearProvisionSearchField:function(){this.$emit("clear-provision-search-field")}}},is=ns,rs=(i("69e6"),i("4bd4")),os=Object(_["a"])(is,Pi,Ri,!1,null,"1906471a",null),ss=os.exports;P()(os,{VBtn:R["a"],VCard:bt["a"],VCardActions:Ji["a"],VCardText:Ji["b"],VCardTitle:Ji["c"],VCol:rt["a"],VExpansionPanels:Bo["a"],VForm:rs["a"],VRow:st["a"]});var as=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-navigation-drawer",{attrs:{right:"",fixed:"",temporary:"",width:e.width},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[n("v-list",{attrs:{nav:"",dense:""}},[n("v-list-item",[n("v-list-item-content",[n("v-list-item-title",{staticClass:"title"},[e._v(" "+e._s(e.$tc("app.questionnaire.errors",e.notifications.length))+" ")])],1),n("v-list-item-action",[n("v-btn",{attrs:{icon:""},on:{click:function(t){e.drawer=!1}}},[n("v-icon",[e._v(" mdi-close ")])],1)],1)],1)],1),n("v-divider"),e.hasNotifications?n("v-list",{attrs:{nav:"",dense:""}},e._l(e.notifications,(function(t,i){return n("div",{key:i},[n("v-list-item",[n("v-list-item-avatar",[n("v-icon",{attrs:{color:t.color}},[e._v(" "+e._s(t.icon)+" ")])],1),n("v-list-item-content",[n("v-list-item-title",{staticClass:"actionLink",domProps:{innerHTML:e._s(t.header)},on:{click:function(n){return e.$emit("notification:click",t.qguid)}}}),n("v-list-item-subtitle",{domProps:{innerHTML:e._s(t.text)}})],1)],1)],1)})),0):e._e()],1)},ls=[];function us(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function cs(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?us(Object(n),!0).forEach((function(t){Object(g["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):us(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ps={name:"QuestionnaireError",events:["close"],props:{isVisible:{type:Boolean,required:!0}},computed:cs({},Object(x["d"])({notifications:function(e){return e.error.notifications}}),{hasNotifications:function(){return this.notifications.length>0},drawer:{get:function(){return this.isVisible},set:function(e){e||this.$emit("close",e)}},width:function(){return this.$vuetify.breakpoint.mobile?"100%":"40%"}})},ds=ps,fs=(i("505a"),i("8270")),vs=Object(_["a"])(ds,as,ls,!1,null,"4bd2659c",null),ms=vs.exports;P()(vs,{VBtn:R["a"],VDivider:Pe["a"],VIcon:Re["a"],VList:we["a"],VListItem:Oe["a"],VListItemAction:Ie["a"],VListItemAvatar:fs["a"],VListItemContent:ye["a"],VListItemSubtitle:ye["b"],VListItemTitle:ye["c"],VNavigationDrawer:Qe["a"]});var hs=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-navigation-drawer",{attrs:{width:e.width,temporary:"",fixed:""},model:{value:e.isVisible,callback:function(t){e.isVisible=t},expression:"isVisible"}},[n("v-list-item",[n("v-list-item-content",[n("v-list-item-title",{staticClass:"title"},[e._v(" "+e._s(e.$t("app.questionnaire.navigation.title"))+" ")])],1)],1),n("v-divider"),n("v-treeview",{attrs:{dense:"","open-all":"",items:e.navitems},scopedSlots:e._u([{key:"label",fn:function(t){return[n("div",{staticClass:"truncated",on:{click:function(n){return e.$emit("question:click",t.item.guid)}}},[n("div",[n("v-icon",{attrs:{small:"",color:"primary"}},[e._v(" mdi-flash-circle ")]),e._v(" "+e._s(t.item.name)+" ")],1)])]}}])})],1)},gs=[],bs={props:{display:{type:Boolean,default:!1,required:!0},navitems:{type:Array,default:null}},data:function(){return{drawer:null}},computed:{isVisible:{get:function(){return this.display},set:function(e){e||this.$emit("navigation-close",e)}},width:function(){return this.$vuetify.breakpoint.mobile?"100%":"40%"}}},Os=bs,ys=(i("7d68"),Object(_["a"])(Os,hs,gs,!1,null,"72056948",null)),xs=ys.exports;function qs(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function js(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?qs(Object(n),!0).forEach((function(t){Object(g["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qs(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}P()(ys,{VDivider:Pe["a"],VIcon:Re["a"],VListItem:Oe["a"],VListItemContent:ye["a"],VListItemTitle:ye["c"],VNavigationDrawer:Qe["a"],VTreeview:Mo["a"]});var Es={emits:["clear-provision-search-field"],components:{QuestionnaireAnswers:ss,QuestionnaireError:ms,QuestionnaireNav:xs},mixins:[ce],props:{expandAllPropQuestionnaire:{type:Object,required:!0},collaspeAllPropQuestionnaire:{type:Boolean,default:!1},validatePropQuestionnaire:{type:Boolean,default:!1},readOnlyPropQuestionnaire:{type:Boolean,default:!1},navigationDisplayPropQuestionnniare:{type:Boolean,default:!1}},data:function(){return{validate:!1,drawer:!1,expandPanels:this.expandAllPropQuestionnaire,navItems:[]}},computed:js({},Object(x["d"])({lang:function(e){return e&&e.settings?e.settings.settings.lang:"en"},group:function(e){return e.group}})),watch:{validatePropQuestionnaire:function(){this.validate=!0},navigationDisplayPropQuestionnniare:function(){this.displayNavigationDrawer()}},mounted:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t,n;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(!this.envDev||!this.loadLocalData||this.$store.getters.getModifiedinBuilder){e.next=6;break}return t=Object({NODE_ENV:"production",VUE_APP_I18N_FALLBACK_LOCALE:"en",VUE_APP_I18N_LOCALE:"en",VUE_APP_LOAD_LOCAL_DATA:"false",BASE_URL:""}).VUE_APP_TEMPLATE_TO_LOAD,e.next=4,tn.GetMockQuestionnaireFromImportModule(t);case 4:n=e.sent,this.$store.dispatch("SetQuestionnaireState",{questionnaire:n,page:"questionnaire"});case 6:if(!this.envDev||!this.loadLocalData){e.next=11;break}return e.next=9,this.$store.dispatch("SetFlatLegislationsStateToLocalData");case 9:return e.next=11,this.$store.dispatch("SetCharacteristicsStateToLocalData");case 11:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{onClearProvisionSearchField:function(){this.$emit("clear-provision-search-field")},onNotificationClick:function(e){this.expandPanels.value=!0,this.$store.dispatch("updateActiveQuestionSelection",e)},displayNavigationDrawer:function(){var e=this,t=tn.cloneVisibleQuestionsOnly(this.$store.state.questionnaire.questionnaire);t=tn.fixTextToShowInDrawer(t);var n=JSON.stringify(t).replaceAll("name","id").replaceAll('"questions":','"children":').replaceAll('"childQuestions":','"children":').replaceAll('"name":','"name_o":').replaceAll('"text":','"name":').replaceAll('"title":','"name":'),i=/("name":{"en":([^}]+)"fr":([^}]+)})/gi,r=/("name":{"en":([^}]+)"fr":([^}]+)})/i,o=n.match(i);o.forEach((function(t){var i='"name":'+t.match(/"en":"([^"]+)"/gi)[0].replaceAll('"en":',""),o='"name":'+t.match(/"fr":"([^"]+)"/gi)[0].replaceAll('"fr":',"");n=n.replace(r,"en"===e.lang?i:o)})),this.$vuetify.goTo(0),this.navItems=JSON.parse(n),this.drawer=!0}}},Ss=Es,_s=Object(_["a"])(Ss,_i,Ci,!1,null,"4b7fe0e8",null),Cs=_s.exports;P()(_s,{VCol:rt["a"],VContainer:Ot["a"],VRow:st["a"],VSheet:Ur["a"]});var Ps,Rs,ws,Is,Qs,Ds,Ts,As,ks,Gs,Vs,Ns,Fs,$s,Ls,Us,Bs,Ms,Hs,zs,Ys,Ks,Xs,Js=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-row",[n("v-col",{attrs:{cols:"7"}},[n("div",[e.questionnaire&&e.questionnaire.groups?e.questionnaire.groups.length?n("v-expansion-panels",{staticClass:"v-expansion-panel",attrs:{focusable:"",multiple:""},model:{value:e.groupPanels,callback:function(t){e.groupPanels=t},expression:"groupPanels"}},e._l(e.questionnaire.groups,(function(t,i){return n("v-expansion-panel",{key:i,ref:"questionGroup",refInFor:!0,class:{selected:t===e.selectedGroup},attrs:{group:t,index:i}},[n("v-expansion-panel-header",{attrs:{"disable-icon-rotate":"",ripple:""},scopedSlots:e._u([{key:"actions",fn:function(){return[n("v-icon",{attrs:{"x-large":"",medium:"",color:"primary"}},[e._v(" $expand ")])]},proxy:!0}],null,!0)},[n("v-row",[n("v-col",{staticClass:"pl-1",attrs:{cols:"9"}},[n("h2",{staticClass:"subtitle-1"},[e._v(" "+e._s(e.getTitle(t))+" ")])])],1)],1),n("builder-group",{attrs:{group:t,"selected-question":e.selectedQuestion,questionnaire:e.questionnaire,panelindex:e.questionPanels},on:{editGroup:e.editGroup,editQuestion:e.editQuestion,childQuestionAdded:e.addQuestionToIndex,childQuestionRemoved:e.onRemovedQuestionFromIndex,removeQuestion:e.confirmRemoveQuestion,addQuestion:e.addQuestion,confirmRemoveGroup:e.confirmRemoveGroup}})],1)})),1):n("div",[e._v(" "+e._s(e.$t("app.builder.noGroups"))+" ")]):n("div",[e._v(" "+e._s(e.$t("app.builder.loading"))+" ")]),n("div",{staticClass:"mt-2 center"},[n("v-btn",{on:{click:function(t){return e.addGroup()}}},[e._v(" "+e._s(e.$t("app.builder.group.addGroup"))+" ")])],1)],1)]),n("v-col",{attrs:{cols:"5"}},[n("div",{staticStyle:{position:"fixed",left:"60%",top:"10%",width:"35%","max-height":"85%","overflow-y":"auto","overflow-x":"hidden"}},[e.selectedGroup&&!e.selectedQuestion?n("v-row",[n("v-col",[n("v-text-field",{attrs:{label:e.$t("app.builder.group.englishText")},model:{value:e.selectedGroup.title[e.eng],callback:function(t){e.$set(e.selectedGroup.title,e.eng,t)},expression:"selectedGroup.title[eng]"}}),n("v-text-field",{attrs:{label:e.$t("app.builder.group.frenchText")},model:{value:e.selectedGroup.title[e.fr],callback:function(t){e.$set(e.selectedGroup.title,e.fr,t)},expression:"selectedGroup.title[fr]"}}),n("v-text-field",{attrs:{dense:"",type:"number",label:e.$t("app.builder.sortOrder")},on:{change:function(t){return e.sortGroups(e.selectedGroup)}},model:{value:e.selectedGroup.sortOrder,callback:function(t){e.$set(e.selectedGroup,"sortOrder",t)},expression:"selectedGroup.sortOrder"}}),n("v-checkbox",{attrs:{label:e.$t("app.builder.isRepeatable")},model:{value:e.selectedGroup.isRepeatable,callback:function(t){e.$set(e.selectedGroup,"isRepeatable",t)},expression:"selectedGroup.isRepeatable"}})],1)],1):e._e(),e.selectedQuestion?n("v-row",[n("v-col",[n("v-text-field",{attrs:{label:e.$t("app.builder.question.englishText")},model:{value:e.selectedQuestion.text[e.eng],callback:function(t){e.$set(e.selectedQuestion.text,e.eng,t)},expression:"selectedQuestion.text[eng]"}}),n("v-text-field",{attrs:{label:e.$t("app.builder.question.frenchText")},model:{value:e.selectedQuestion.text[e.fr],callback:function(t){e.$set(e.selectedQuestion.text,e.fr,t)},expression:"selectedQuestion.text[fr]"}}),n("v-select",{attrs:{"item-text":"text","item-value":"value",items:e.questionTypes,label:e.$t("app.builder.question.questionType")},on:{change:function(t){return e.changeQuestionType(t)}},scopedSlots:e._u([{key:"selection",fn:function(t){var i=t.item;return[n("span",[e._v(e._s(i.text[e.lang]))])]}},{key:"item",fn:function(t){var i=t.item;return[n("span",[e._v(e._s(i.text[e.lang]))])]}}],null,!1,2259202428),model:{value:e.selectedQuestion.type,callback:function(t){e.$set(e.selectedQuestion,"type",t)},expression:"selectedQuestion.type"}}),n("v-text-field",{attrs:{disabled:e.selectedQuestion.type===e.reference,dense:"",type:"number",label:e.$t("app.builder.sortOrder")},on:{change:function(t){return e.sortQuestions(e.selectedQuestion)}},model:{value:e.selectedQuestion.sortOrder,callback:function(t){e.$set(e.selectedQuestion,"sortOrder",t)},expression:"selectedQuestion.sortOrder"}}),e.selectedQuestion.type!==e.reference?n("div",[n("v-checkbox",{attrs:{dense:"",label:e.$t("app.builder.question.samplingAllowed")},model:{value:e.selectedQuestion.isSamplingAllowed,callback:function(t){e.$set(e.selectedQuestion,"isSamplingAllowed",t)},expression:"selectedQuestion.isSamplingAllowed"}}),e.isRepeatableVisible?n("div",[n("v-checkbox",{attrs:{dense:"",label:e.$t("app.builder.isRepeatable")},model:{value:e.selectedQuestion.isRepeatable,callback:function(t){e.$set(e.selectedQuestion,"isRepeatable",t)},expression:"selectedQuestion.isRepeatable"}})],1):e._e(),n("v-checkbox",{attrs:{dense:"",label:e.$t("app.builder.visibleByDefault")},model:{value:e.selectedQuestion.isVisible,callback:function(t){e.$set(e.selectedQuestion,"isVisible",t)},expression:"selectedQuestion.isVisible"}}),"select"===e.selectedQuestion.type||"radio"===e.selectedQuestion.type?n("div",[n("div",[n("v-btn",{attrs:{small:"",icon:""},on:{click:function(t){return e.toggleOptions()}}},[e.optionsCollapsed?n("v-icon",[e._v(" mdi-menu-right ")]):e._e(),e.optionsCollapsed?e._e():n("v-icon",[e._v(" mdi-menu-down ")])],1),e._v(" "+e._s(e.$t("app.builder.responseOptions.responseOptions"))+" ")],1),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.optionsCollapsed,expression:"!optionsCollapsed"}]},[e._l(e.selectedQuestion.responseOptions,(function(t,i){return n("div",{key:i,staticClass:"bordered ml-2 pa-2 my-2"},[n("v-text-field",{attrs:{dense:"",label:e.$t("app.builder.responseOptions.englishText")},model:{value:t.text[e.eng],callback:function(n){e.$set(t.text,e.eng,n)},expression:"option.text[eng]"}}),n("v-text-field",{attrs:{dense:"",label:e.$t("app.builder.responseOptions.frenchText")},model:{value:t.text[e.fr],callback:function(n){e.$set(t.text,e.fr,n)},expression:"option.text[fr]"}}),n("v-text-field",{attrs:{dense:"",label:e.$t("app.builder.responseOptions.sortOrder")},model:{value:t.sortOrder,callback:function(n){e.$set(t,"sortOrder",e._n(n))},expression:"option.sortOrder"}}),n("v-text-field",{attrs:{dense:"",label:e.$t("app.builder.responseOptions.value")},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"option.value"}}),n("div",{staticClass:"right"},[n("v-tooltip",{attrs:{top:"","open-delay":"300"},scopedSlots:e._u([{key:"activator",fn:function(i){var r=i.on,o=i.attrs;return[n("v-btn",{attrs:{small:"",icon:""},on:{click:function(n){return e.removeResponseOption(t)}}},[n("v-icon",e._g(e._b({attrs:{small:""}},"v-icon",o,!1),r),[e._v(" mdi-delete ")])],1)]}}],null,!0)},[n("span",[e._v(e._s(e.$t("app.builder.responseOptions.removResponseoption")))])])],1),n("div",[n("v-select",{attrs:{"item-text":"text","item-value":"value",items:e.optionTypes,label:e.$t("app.builder.internalComments")},scopedSlots:e._u([{key:"selection",fn:function(t){var i=t.item;return[n("span",[e._v(e._s(i.text[e.lang]))])]}},{key:"item",fn:function(t){var i=t.item;return[n("span",[e._v(e._s(i.text[e.lang]))])]}}],null,!0),model:{value:t.internalCommentRequirement,callback:function(n){e.$set(t,"internalCommentRequirement",n)},expression:"option.internalCommentRequirement"}}),n("v-select",{attrs:{"item-text":"text","item-value":"value",items:e.optionTypes,label:e.$t("app.builder.externalComments")},scopedSlots:e._u([{key:"selection",fn:function(t){var i=t.item;return[n("span",[e._v(e._s(i.text[e.lang]))])]}},{key:"item",fn:function(t){var i=t.item;return[n("span",[e._v(e._s(i.text[e.lang]))])]}}],null,!0),model:{value:t.externalCommentRequirement,callback:function(n){e.$set(t,"externalCommentRequirement",n)},expression:"option.externalCommentRequirement"}}),n("v-select",{attrs:{"item-text":"text","item-value":"value",items:e.optionTypes,label:e.$t("app.builder.file")},scopedSlots:e._u([{key:"selection",fn:function(t){var i=t.item;return[n("span",[e._v(e._s(i.text[e.lang]))])]}},{key:"item",fn:function(t){var i=t.item;return[n("span",[e._v(e._s(i.text[e.lang]))])]}}],null,!0),model:{value:t.fileRequirement,callback:function(n){e.$set(t,"fileRequirement",n)},expression:"option.fileRequirement"}}),n("v-select",{attrs:{"item-text":"text","item-value":"value",items:e.optionTypes,label:e.$t("app.builder.picture")},scopedSlots:e._u([{key:"selection",fn:function(t){var i=t.item;return[n("span",[e._v(e._s(i.text[e.lang]))])]}},{key:"item",fn:function(t){var i=t.item;return[n("span",[e._v(e._s(i.text[e.lang]))])]}}],null,!0),model:{value:t.pictureRequirement,callback:function(n){e.$set(t,"pictureRequirement",n)},expression:"option.pictureRequirement"}})],1),n("div",[n("v-list",{attrs:{dense:"",nav:"",color:"#f5f5f5"}},[n("v-list-group",{scopedSlots:e._u([{key:"activator",fn:function(){return[n("v-list-item-title",{staticClass:"subtitle-1",staticStyle:{color:"#757575"}},[n("v-row",[n("v-col",[e._v(" "+e._s(e.$t("app.builder.responseOptions.provisions.provisions"))+" ")])],1)],1)]},proxy:!0}],null,!0)},[n("v-list-item",[n("v-list-item-content",[n("builder-provisions-search",{attrs:{option:t,provisions:e.provisions},on:{"update-searchable-provisions":function(t){return e.updateSearchableProvisions()}}})],1)],1)],1)],1)],1)],1)})),n("div",{staticClass:"right"},[n("v-btn",{attrs:{small:""},on:{click:function(t){return e.addResponseOption()}}},[e._v(" "+e._s(e.$t("app.builder.responseOptions.addOption"))+" ")])],1)],2)]):e._e(),n("div",[n("div",[n("v-btn",{attrs:{small:"",icon:""},on:{click:function(t){return e.toggleValidators()}}},[e.validatorsCollapsed?n("v-icon",[e._v(" mdi-menu-right ")]):e._e(),e.validatorsCollapsed?e._e():n("v-icon",[e._v(" mdi-menu-down ")])],1),e._v(" "+e._s(e.$t("app.builder.validators.validators"))+" ")],1),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.validatorsCollapsed,expression:"!validatorsCollapsed"}]},[e._l(e.selectedQuestion.validationRules,(function(t,i){return n("div",{key:i,staticClass:"bordered pa-2 ml-2 my-2"},[n("v-text-field",{attrs:{dense:"",label:e.$t("app.builder.validators.name")},model:{value:t.name,callback:function(n){e.$set(t,"name",n)},expression:"validationRule.name"}}),n("v-checkbox",{attrs:{dense:"",label:e.$t("app.builder.validators.enabled")},model:{value:t.enabled,callback:function(n){e.$set(t,"enabled",n)},expression:"validationRule.enabled"}}),n("v-select",{attrs:{dense:"","item-text":"text","item-value":"value",items:e.validatorTypes,label:e.$t("app.builder.validators.type")},scopedSlots:e._u([{key:"selection",fn:function(t){var i=t.item;return[n("span",[e._v(e._s(i.text[e.lang]))])]}},{key:"item",fn:function(t){var i=t.item;return[n("span",[e._v(e._s(i.text[e.lang]))])]}}],null,!0),model:{value:t.type,callback:function(n){e.$set(t,"type",n)},expression:"validationRule.type"}}),n("v-text-field",{directives:[{name:"show",rawName:"v-show",value:"require"!==t.type,expression:"validationRule.type !== 'require'"}],attrs:{dense:"",label:"value"},model:{value:t.value,callback:function(n){e.$set(t,"value",n)},expression:"validationRule.value"}}),n("v-text-field",{attrs:{dense:"",label:e.$t("app.builder.validators.englishMessage")},model:{value:t.errorMessage[e.eng],callback:function(n){e.$set(t.errorMessage,e.eng,n)},expression:"validationRule.errorMessage[eng]"}}),n("v-text-field",{attrs:{dense:"",label:e.$t("app.builder.validators.frenchMessage")},model:{value:t.errorMessage[e.fr],callback:function(n){e.$set(t.errorMessage,e.fr,n)},expression:"validationRule.errorMessage[fr]"}}),n("div",{staticClass:"right"},[n("v-tooltip",{attrs:{top:"","open-delay":"300"},scopedSlots:e._u([{key:"activator",fn:function(i){var r=i.on,o=i.attrs;return[n("v-btn",{attrs:{small:"",icon:""},on:{click:function(n){return e.removeValidator(t)}}},[n("v-icon",e._g(e._b({attrs:{small:""}},"v-icon",o,!1),r),[e._v(" mdi-delete ")])],1)]}}],null,!0)},[n("span",[e._v(e._s(e.$t("app.builder.validators.removeValidator")))])])],1)],1)})),n("div",{staticClass:"right"},[n("v-btn",{attrs:{small:""},on:{click:function(t){return e.addValidator()}}},[e._v(" "+e._s(e.$t("app.builder.validators.addValidator"))+" ")])],1)],2),n("div",[n("div",[n("v-btn",{attrs:{small:"",icon:""},on:{click:function(t){return e.toggleDependencies()}}},[e.dependenciesCollapsed?n("v-icon",[e._v(" mdi-menu-right ")]):e._e(),e.dependenciesCollapsed?e._e():n("v-icon",[e._v(" mdi-menu-down ")])],1),e._v(" "+e._s(e.$t("app.builder.dependsOn.dependsOn"))+" ")],1),n("div",{directives:[{name:"show",rawName:"v-show",value:!e.dependenciesCollapsed,expression:"!dependenciesCollapsed"}]},[n("div",[e._l(e.selectedQuestion.dependencyGroups,(function(t,i){return n("div",{key:i,staticClass:"bordered pa-2 ml-2 my-2"},[n("v-select",{attrs:{dense:"",items:e.dependencyGroupTypes,"item-text":"text","item-value":"value",label:e.$t("app.builder.dependsOn.type")},scopedSlots:e._u([{key:"selection",fn:function(t){var i=t.item;return[n("span",[e._v(e._s(i.text[e.lang]))])]}},{key:"item",fn:function(t){var i=t.item;return[n("span",[e._v(e._s(i.text[e.lang]))])]}}],null,!0),model:{value:t.ruleType,callback:function(n){e.$set(t,"ruleType",n)},expression:"dependencyGroup.ruleType"}}),n("v-select",{directives:[{name:"show",rawName:"v-show",value:"validation"===t.ruleType||"validationValue"===t.ruleType,expression:"dependencyGroup.ruleType === 'validation' || dependencyGroup.ruleType === 'validationValue'"}],attrs:{dense:"",items:e.selectedQuestion.validationRules,"item-text":"name",label:e.$t("app.builder.validators.validator")},model:{value:t.childValidatorName,callback:function(n){e.$set(t,"childValidatorName",n)},expression:"dependencyGroup.childValidatorName"}}),n("div",{staticClass:"bordered pa-2"},[e._l(t.questionDependencies,(function(i,r){return n("div",{key:r},[n("div",{staticClass:"bordered pa-2 my-2"},[n("v-select",{attrs:{dense:"","item-text":"text."+e.lang,"item-value":"guid",items:e.questions,label:e.$t("app.builder.dependsOn.question"),"return-object":""},model:{value:i.dependsOnQuestion,callback:function(t){e.$set(i,"dependsOnQuestion",t)},expression:"questionDependency.dependsOnQuestion"}}),n("v-select",{attrs:{dense:"","item-text":"text","item-value":"value",items:e.dependencyValidationActions,label:e.$t("app.builder.dependsOn.tobe")},scopedSlots:e._u([{key:"selection",fn:function(t){var i=t.item;return[n("span",[e._v(e._s(i.text[e.lang]))])]}},{key:"item",fn:function(t){var i=t.item;return[n("span",[e._v(e._s(i.text[e.lang]))])]}}],null,!0),model:{value:i.validationAction,callback:function(t){e.$set(i,"validationAction",t)},expression:"questionDependency.validationAction"}}),n("v-text-field",{attrs:{dense:"",label:e.$t("app.builder.dependsOn.to")},model:{value:i.validationValue,callback:function(t){e.$set(i,"validationValue",t)},expression:"questionDependency.validationValue"}}),n("div",{staticClass:"right"},[n("v-tooltip",{attrs:{top:"","open-delay":"300"},scopedSlots:e._u([{key:"activator",fn:function(r){var o=r.on,s=r.attrs;return[n("v-btn",{attrs:{small:"",icon:""},on:{click:function(n){return e.removeQuestionDependency(t,i)}}},[n("v-icon",e._g(e._b({attrs:{small:""}},"v-icon",s,!1),o),[e._v(" mdi-delete ")])],1)]}}],null,!0)},[n("span",[e._v(e._s(e.$t("app.builder.group.question.removeQuestion")))])])],1)],1),r<t.questionDependencies.length-1?n("div",{staticClass:"ml-2"},[e._v(" and ")]):e._e()])})),n("div",{staticClass:"right"},[n("v-btn",{attrs:{small:""},on:{click:function(n){return e.addQuestionDependency(t)}}},[e._v(" "+e._s(e.$t("app.builder.dependsOn.addQuestion"))+" ")])],1)],2),n("div",{staticClass:"right"},[n("v-tooltip",{attrs:{top:"","open-delay":"300"},scopedSlots:e._u([{key:"activator",fn:function(i){var r=i.on,o=i.attrs;return[n("v-btn",{attrs:{small:"",icon:""},on:{click:function(n){return e.removeDependencyGroup(t)}}},[n("v-icon",e._g(e._b({attrs:{small:""}},"v-icon",o,!1),r),[e._v(" mdi-delete ")])],1)]}}],null,!0)},[n("span",[e._v(e._s(e.$t("app.builder.dependsOn.removDependencyGroup")))])])],1)],1)})),n("div",{staticClass:"right"},[n("v-btn",{attrs:{small:""},on:{click:function(t){return e.addDependencyGroup()}}},[e._v(" "+e._s(e.$t("app.builder.dependsOn.addDependencyGroup"))+" ")])],1)],2)])])])],1):e._e()],1)],1):e._e()],1)])],1),n("v-dialog",{attrs:{"max-width":"290"},model:{value:e.confirmDialogOpen,callback:function(t){e.confirmDialogOpen=t},expression:"confirmDialogOpen"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v(" "+e._s(e.$t("app.builder.group.delete"))+" ")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){return e.confirmed()}}},[e._v(" "+e._s(e.$t("app.builder.group.yes"))+" ")]),n("v-btn",{attrs:{text:""},on:{click:function(t){e.confirmDialogOpen=!1}}},[e._v(" "+e._s(e.$t("app.builder.group.no"))+" ")])],1)],1)],1)],1)},Ws=[],Zs=[{value:F.TEXT,text:(Ps={},Object(g["a"])(Ps,b["LANGUAGE"].ENGLISH,"Text"),Object(g["a"])(Ps,b["LANGUAGE"].FRENCH,"Fr: Text"),Ps)},{value:F.RADIO,text:(Rs={},Object(g["a"])(Rs,b["LANGUAGE"].ENGLISH,"Radio"),Object(g["a"])(Rs,b["LANGUAGE"].FRENCH,"Fr: radio"),Rs)},{value:F.SELECT,text:(ws={},Object(g["a"])(ws,b["LANGUAGE"].ENGLISH,"Select"),Object(g["a"])(ws,b["LANGUAGE"].FRENCH,"Fr: Select"),ws)},{value:F.NUMBER,text:(Is={},Object(g["a"])(Is,b["LANGUAGE"].ENGLISH,"Number"),Object(g["a"])(Is,b["LANGUAGE"].FRENCH,"Fr: Number"),Is)},{value:F.REFERENCE,text:(Qs={},Object(g["a"])(Qs,b["LANGUAGE"].ENGLISH,"Reference"),Object(g["a"])(Qs,b["LANGUAGE"].FRENCH,"Fr: Reference"),Qs)}],ea=[{value:"required",text:(Ds={},Object(g["a"])(Ds,b["LANGUAGE"].ENGLISH,"Required"),Object(g["a"])(Ds,b["LANGUAGE"].FRENCH,"Fr: Required"),Ds)},{value:"optional",text:(Ts={},Object(g["a"])(Ts,b["LANGUAGE"].ENGLISH,"Optional"),Object(g["a"])(Ts,b["LANGUAGE"].FRENCH,"Fr: Optional"),Ts)},{value:"n/a",text:(As={},Object(g["a"])(As,b["LANGUAGE"].ENGLISH,"N/A"),Object(g["a"])(As,b["LANGUAGE"].FRENCH,"Fr: N/A"),As)}],ta=[{value:"require",text:(ks={},Object(g["a"])(ks,b["LANGUAGE"].ENGLISH,"Require"),Object(g["a"])(ks,b["LANGUAGE"].FRENCH,"Fr: Require"),ks)},{value:"min",text:(Gs={},Object(g["a"])(Gs,b["LANGUAGE"].ENGLISH,"Min"),Object(g["a"])(Gs,b["LANGUAGE"].FRENCH,"Fr: Min"),Gs)},{value:"max",text:(Vs={},Object(g["a"])(Vs,b["LANGUAGE"].ENGLISH,"Max"),Object(g["a"])(Vs,b["LANGUAGE"].FRENCH,"Fr: Max"),Vs)},{value:"minLength",text:(Ns={},Object(g["a"])(Ns,b["LANGUAGE"].ENGLISH,"Min Length"),Object(g["a"])(Ns,b["LANGUAGE"].FRENCH,"Fr: Min Length"),Ns)},{value:"maxLength",text:(Fs={},Object(g["a"])(Fs,b["LANGUAGE"].ENGLISH,"Max Length"),Object(g["a"])(Fs,b["LANGUAGE"].FRENCH,"Fr: Max Length"),Fs)}],na=[{value:"visibility",text:($s={},Object(g["a"])($s,b["LANGUAGE"].ENGLISH,"Visibility"),Object(g["a"])($s,b["LANGUAGE"].FRENCH,"Fr: Visibility"),$s)},{value:"validation",text:(Ls={},Object(g["a"])(Ls,b["LANGUAGE"].ENGLISH,"Enable Validator"),Object(g["a"])(Ls,b["LANGUAGE"].FRENCH,"Fr: Enable Validator"),Ls)},{value:"validationValue",text:(Us={},Object(g["a"])(Us,b["LANGUAGE"].ENGLISH,"Set validator rule"),Object(g["a"])(Us,b["LANGUAGE"].FRENCH,"Fr: Set validator rule"),Us)}],ia=[{value:null,text:(Bs={},Object(g["a"])(Bs,b["LANGUAGE"].ENGLISH,"--"),Object(g["a"])(Bs,b["LANGUAGE"].FRENCH,"--"),Bs)},{value:"equal",text:(Ms={},Object(g["a"])(Ms,b["LANGUAGE"].ENGLISH,"Equal"),Object(g["a"])(Ms,b["LANGUAGE"].FRENCH,"Fr: Equal"),Ms)},{value:"notEqual",text:(Hs={},Object(g["a"])(Hs,b["LANGUAGE"].ENGLISH,"Not Equal"),Object(g["a"])(Hs,b["LANGUAGE"].FRENCH,"Fr: Not Equal"),Hs)},{value:"greaterThen",text:(zs={},Object(g["a"])(zs,b["LANGUAGE"].ENGLISH,"Greater then"),Object(g["a"])(zs,b["LANGUAGE"].FRENCH,"Fr: Greater then"),zs)},{value:"lessThen",text:(Ys={},Object(g["a"])(Ys,b["LANGUAGE"].ENGLISH,"Less than"),Object(g["a"])(Ys,b["LANGUAGE"].FRENCH,"Fr: Less than"),Ys)},{value:"lengthLessThen",text:(Ks={},Object(g["a"])(Ks,b["LANGUAGE"].ENGLISH,"length less then"),Object(g["a"])(Ks,b["LANGUAGE"].FRENCH,"Fr: length less then"),Ks)},{value:"lengthGreaterThen",text:(Xs={},Object(g["a"])(Xs,b["LANGUAGE"].ENGLISH,"Length greater then"),Object(g["a"])(Xs,b["LANGUAGE"].FRENCH,"Fr: Length greater then"),Xs)}],ra={QUESTION_TYPES:Zs,OPTION_TYPES:ea,VALIDATOR_TYPES:ta,DEPENDENCY_GROUP_TYPES:na,DEPENDENCY_VALIDATION_ACTIONS:ia},oa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-expansion-panel-content",{attrs:{eager:""}},[n("v-row",{on:{click:function(t){return e.editGroup(t,e.group)}}},[n("v-col",{attrs:{cols:"12"}},[n("v-expansion-panels",{attrs:{hover:"",focusable:"",multiple:""},model:{value:e.expansionPanels,callback:function(t){e.expansionPanels=t},expression:"expansionPanels"}},[e._l(e.group.questions,(function(t,i){return n("builder-question",{key:i,attrs:{question:t,"selected-question":e.selectedQuestion,group:e.group,questionnaire:e.questionnaire,index:i},on:{editQuestion:e.editQuestion,childQuestionAdded:e.addQuestionToIndex,childQuestionRemoved:e.onRemovedQuestionFromIndex,removeQuestion:e.confirmRemoveQuestion}})})),n("v-expansion-panel",[n("v-row",{staticClass:"ma-2",attrs:{justify:"center",align:"center"}},[n("v-col",{staticClass:"col-auto"},[n("v-btn",{on:{click:function(t){return e.addQuestion(t,e.group)}}},[e._v(" "+e._s(e.$t("app.builder.group.question.addQuestion"))+" ")])],1),n("v-col",{staticClass:"col-auto"},[n("v-tooltip",{attrs:{top:"","open-delay":"300"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[n("v-btn",{attrs:{small:"",icon:""},on:{click:function(t){return e.confirmRemoveGroup(e.group)}}},[n("v-icon",e._g(e._b({attrs:{small:""}},"v-icon",r,!1),i),[e._v(" mdi-delete ")])],1)]}}])},[n("span",[e._v(e._s(e.$t("app.builder.group.removeGroup")))])])],1)],1)],1)],2)],1)],1)],1)},sa=[],aa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-expansion-panel",{class:{selected:e.question===e.selectedQuestion}},[n("v-expansion-panel-header",{attrs:{ripple:""},on:{click:function(t){return e.editQuestion(t)}},scopedSlots:e._u([{key:"actions",fn:function(){},proxy:!0}])},[n("div",{style:{fontSize:"16px !important"}},[n("span",{staticClass:"text-break"},[e._v(e._s(e.questionText))])])]),n("v-expansion-panel-content",{attrs:{eager:""}},[n("v-row",{on:{click:function(t){return e.editQuestion(t)}}},[n("v-col",{attrs:{cols:"12"}},[n("div",{staticClass:"mt-5"},[n("response",{attrs:{question:e.question,group:e.group}})],1),n("div",[n("v-expansion-panels",{attrs:{hover:"",focusable:"",multiple:""},model:{value:e.childQuestionPanels,callback:function(t){e.childQuestionPanels=t},expression:"childQuestionPanels"}},e._l(e.question.childQuestions,(function(t,i){return n("builder-question",{key:i,ref:"groupQuestion",refInFor:!0,attrs:{question:t,"selected-question":e.selectedQuestion,group:e.group,questionnaire:e.questionnaire,index:i,"title-style":{fontSize:"16px !important"}},on:{editQuestion:e.editChildQuestion,childQuestionAdded:e.onChildQuestionAdded,childQuestionRemoved:e.onChildQuestionRemoved,removeQuestion:function(n){return e.removeChildQuestion(t)}}})})),1)],1),n("v-row",{staticClass:"ma-2",attrs:{justify:"center",align:"center"}},[e.isAddChildQuestionAllowed?n("div",[n("v-col",{staticClass:"col-auto"},[n("v-btn",{attrs:{disabled:e.question.type===e.reference},on:{click:function(t){return e.addQuestion(t)}}},[e._v(" "+e._s(e.$t("app.builder.group.question.addChildQuestion"))+" ")])],1)],1):e._e(),n("v-col",{staticClass:"col-auto"},[n("v-tooltip",{attrs:{top:"","open-delay":"300"},scopedSlots:e._u([{key:"activator",fn:function(t){var i=t.on,r=t.attrs;return[n("v-btn",{attrs:{small:"",icon:""},on:{click:function(t){return e.confirmRemoveQuestion()}}},[n("v-icon",e._g(e._b({attrs:{small:""}},"v-icon",r,!1),i),[e._v(" mdi-delete ")])],1)]}}])},[n("span",[e._v(e._s(e.$t("app.builder.group.question.removeQuestion")))])])],1)],1),n("v-dialog",{attrs:{"max-width":"290"},model:{value:e.confirmDialogOpen,callback:function(t){e.confirmDialogOpen=t},expression:"confirmDialogOpen"}},[n("v-card",[n("v-card-title",{staticClass:"headline"},[e._v(" "+e._s(e.$t("app.builder.group.question.delete"))+" ")]),n("v-card-actions",[n("v-spacer"),n("v-btn",{attrs:{color:"error",text:""},on:{click:function(t){e.confirmDialogOpen=!1,e.removeQuestion()}}},[e._v(" "+e._s(e.$t("app.builder.group.question.yes"))+" ")]),n("v-btn",{attrs:{text:""},on:{click:function(t){e.confirmDialogOpen=!1}}},[e._v(" "+e._s(e.$t("app.builder.group.question.no"))+" ")])],1)],1)],1)],1)],1)],1)],1)},la=[],ua=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[e.question.type===e.text||e.question.type===e.reference?n("text-response",{attrs:{question:e.question}}):e._e(),e.question.type===e.radio?n("radio-response",{attrs:{group:e.group,question:e.question}}):e._e(),e.question.type===e.select?n("select-response",{attrs:{group:e.group,question:e.question}}):e._e(),e.question.type===e.number?n("number-response",{attrs:{group:e.group,question:e.question}}):e._e()],1)},ca=[],pa=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-text-field",{attrs:{outlined:"",filled:"",dense:""},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)},da=[],fa={props:{question:{type:Object,required:!0}},data:function(){return{value:null}}},va=fa,ma=Object(_["a"])(va,pa,da,!1,null,null,null),ha=ma.exports;P()(ma,{VTextField:Li["a"]});var ga=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",e._l(e.question.responseOptions,(function(t,i){return n("div",{key:i,class:["qtn-radio-button",t.isProblem?"qtn-radio-button-non-compliant":"qtn-radio-button-compliant"]},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.selectedOption,expression:"selectedOption"}],attrs:{id:e.group.domSuffix+"-"+e.question.guid+"-"+i,type:"radio"},domProps:{value:t,checked:e._q(e.selectedOption,t)},on:{change:function(n){e.selectedOption=t}}}),n("label",{attrs:{for:e.group.domSuffix+"-"+e.question.guid+"-"+i}},[e._v(e._s(t.text[e.lang]))])])})),0)},ba=[];function Oa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function ya(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Oa(Object(n),!0).forEach((function(t){Object(g["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Oa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var xa=null,qa={props:{question:{type:Object,required:!0},group:{type:Object,required:!0}},data:function(){return{selectedOption:null}},computed:ya({},Object(x["d"])({lang:function(e){return e&&e.settings?e.settings.settings.lang:"en"}})),mounted:function(){},created:function(){this.sortOptions()},methods:{sortOptions:function(){this.question.responseOptions.sort((function(e,t){return e.sortOrder-t.sortOrder}))},watchOptions:function(){var e=this;xa=this.$watch("question.responseOptions",(function(t,n){xa(),e.sortOptions(),e.watchOptions()}),{deep:!0})}}},ja=qa,Ea=Object(_["a"])(ja,ga,ba,!1,null,"12f7c22d",null),Sa=Ea.exports,_a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-select",{ref:"select",attrs:{items:e.question.responseOptions,"item-value":"id","item-text":"text."+e.lang,attach:"",chips:e.question.isChips,multiple:"",outlined:"",label:"select","return-object":"","validate-on-blur":""},model:{value:e.response,callback:function(t){e.response=t},expression:"response"}})],1)},Ca=[];function Pa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ra(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Pa(Object(n),!0).forEach((function(t){Object(g["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var wa={props:{question:{type:Object,required:!0}},data:function(){return{response:null}},computed:Ra({},Object(x["d"])({lang:function(e){return e&&e.settings?e.settings.settings.lang:"en"}}))},Ia=wa,Qa=Object(_["a"])(Ia,_a,Ca,!1,null,"3acd54b8",null),Da=Qa.exports;P()(Qa,{VSelect:at["a"]});var Ta=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("v-text-field",{ref:"textControl",attrs:{outlined:"",filled:"",dense:"","validate-on-blur":"",type:"number"},model:{value:e.value,callback:function(t){e.value=t},expression:"value"}})],1)},Aa=[];function ka(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Ga(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?ka(Object(n),!0).forEach((function(t){Object(g["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):ka(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Va={props:{question:{type:Object,required:!0}},data:function(){return{value:""}},computed:Ga({},Object(x["d"])({lang:function(e){return e&&e.settings?e.settings.settings.lang:"en"}}))},Na=Va,Fa=Object(_["a"])(Na,Ta,Aa,!1,null,"b8198d34",null),$a=Fa.exports;P()(Fa,{VTextField:Li["a"]});var La={components:{TextResponse:ha,RadioResponse:Sa,SelectResponse:Da,NumberResponse:$a},props:{question:{type:Object,required:!0},group:{type:Object,required:!0}},data:function(){return{text:F.TEXT,radio:F.RADIO,select:F.SELECT,number:F.NUMBER,reference:F.REFERENCE}}},Ua=La,Ba=Object(_["a"])(Ua,ua,ca,!1,null,"64142488",null),Ma=Ba.exports;function Ha(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function za(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ha(Object(n),!0).forEach((function(t){Object(g["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ha(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var Ya={emits:["childQuestionAdded","removeQuestion","childQuestionRemoved","editQuestion"],name:"BuilderQuestion",components:{Response:Ma},props:{question:{type:Object,required:!0},selectedQuestion:{type:Object,default:null},group:{type:Object,required:!0},questionnaire:{type:Object,required:!0},index:{type:Number,required:!0}},data:function(){return{confirmDialogOpen:!1,childQuestionPanels:[],reference:F.REFERENCE}},computed:za({isAddChildQuestionAllowed:function(){return tn.isParentAGroup(this.group,this.question.guid)},questionText:function(){return"".concat(this.question.text[this.lang])}},Object(x["d"])({lang:function(e){return e&&e.settings?e.settings.settings.lang:"en"}})),methods:{addQuestion:function(e){e.stopPropagation();var t=tn.createQuestion(this.question);this.question.childQuestions.push(t),this.childQuestionPanels.push(t.sortOrder-1),this.$emit("childQuestionAdded",t)},confirmRemoveQuestion:function(){this.confirmDialogOpen=!0},removeQuestion:function(){this.$emit("removeQuestion",this.group,this.question)},removeChildQuestion:function(e){var t=this.question.childQuestions.findIndex((function(t){return t.guid===e.guid}));t>-1&&this.question.childQuestions.splice(t,1),this.$emit("childQuestionRemoved",e)},editQuestion:function(e){e.stopPropagation(),this.$emit("editQuestion",this.group,this.question)},editChildQuestion:function(e,t){this.$emit("editQuestion",e,t)},onChildQuestionAdded:function(e){this.$emit("childQuestionAdded",e)},onChildQuestionRemoved:function(e){this.$emit("childQuestionRemoved",e)}}},Ka=Ya,Xa=(i("2a13"),Object(_["a"])(Ka,aa,la,!1,null,"496c1e69",null)),Ja=Xa.exports;function Wa(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function Za(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Wa(Object(n),!0).forEach((function(t){Object(g["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Wa(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}P()(Xa,{VBtn:R["a"],VCard:bt["a"],VCardActions:Ji["a"],VCardTitle:Ji["c"],VCol:rt["a"],VDialog:Wi["a"],VExpansionPanel:yo["a"],VExpansionPanelContent:xo["a"],VExpansionPanelHeader:qo["a"],VExpansionPanels:Bo["a"],VIcon:Re["a"],VRow:st["a"],VSpacer:qt["a"],VTooltip:Br["a"]});var el={emits:["editGroup","editQuestion","addQuestionToIndex","onRemovedQuestionFromIndex","confirmRemoveQuestion","addQuestion","confirmRemoveGroup"],name:"BuilderGroup",components:{BuilderQuestion:Ja},props:{group:{type:Object,required:!0},selectedQuestion:{type:Object,default:null},questionnaire:{type:Object,required:!0},panelindex:{type:Array,required:!1,default:null}},computed:Za({eng:function(){return b["LANGUAGE"].ENGLISH},fr:function(){return b["LANGUAGE"].FRENCH},expansionPanels:{get:function(){return this.panelindex},set:function(e){return e}}},Object(x["d"])({lang:function(e){return e&&e.settings?e.settings.settings.lang:b["LANGUAGE"].ENGLISH}})),watch:{panelindex:{handler:function(){}}},methods:{editGroup:function(e,t){this.$emit("editGroup",e,t)},editQuestion:function(e,t){this.$emit("editQuestion",e,t)},addQuestionToIndex:function(e){this.$emit("childQuestionAdded",e)},onRemovedQuestionFromIndex:function(e){this.$emit("childQuestionRemoved",e)},confirmRemoveQuestion:function(e,t){this.$emit("removeQuestion",e,t)},addQuestion:function(e,t){this.$emit("addQuestion",e,t)},confirmRemoveGroup:function(e){this.$emit("confirmRemoveGroup",e)}}},tl=el,nl=Object(_["a"])(tl,oa,sa,!1,null,"5d6633d7",null),il=nl.exports;P()(nl,{VBtn:R["a"],VCol:rt["a"],VExpansionPanel:yo["a"],VExpansionPanelContent:xo["a"],VExpansionPanels:Bo["a"],VIcon:Re["a"],VRow:st["a"],VTooltip:Br["a"]});var rl=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-card",{staticClass:"mx-auto"},[n("v-sheet",{staticClass:"pa-4"},[n("v-text-field",{attrs:{label:e.$t("app.builder.responseOptions.provisions.search"),outlined:"","hide-details":"",clearable:"","clear-icon":"mdi-close-circle-outline"},model:{value:e.searchInput,callback:function(t){e.searchInput=t},expression:"searchInput"}})],1),n("v-card-text",[n("v-treeview",{attrs:{selectable:"","item-key":"id","item-text":e.displayTextLang,"selection-type":"leaf",search:e.searchInput,items:e.provisions},on:{input:function(t){return e.emitUpdateSearchableProvisionsEvent()}},scopedSlots:e._u([{key:"label",fn:function(t){var i=t.item;return[n("div",{staticClass:"truncated"},[n("div",[e._v(e._s(e.lang===e.eng?i.DisplayEnglishText:i.DisplayFrenchText))])])]}}]),model:{value:e.option.provisions,callback:function(t){e.$set(e.option,"provisions",t)},expression:"option.provisions"}})],1)],1)},ol=[];function sl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function al(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?sl(Object(n),!0).forEach((function(t){Object(g["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):sl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var ll={emits:["update-searchable-provisions"],props:{option:{type:Object,required:!0},provisions:{type:Array,required:!0}},data:function(){return{searchInput:null}},computed:al({},Object(x["d"])({lang:function(e){return e&&e.settings?e.settings.settings.lang:b["LANGUAGE"].ENGLISH}}),{displayTextLang:function(){return this.lang===this.eng?"DisplayEnglishText":"DisplayFrenchText"},eng:function(){return b["LANGUAGE"].ENGLISH}}),methods:{emitUpdateSearchableProvisionsEvent:function(){this.$emit("update-searchable-provisions")}}},ul=ll,cl=Object(_["a"])(ul,rl,ol,!1,null,"6b171f0b",null),pl=cl.exports;function dl(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,i)}return n}function fl(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?dl(Object(n),!0).forEach((function(t){Object(g["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):dl(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}P()(cl,{VCard:bt["a"],VCardText:Ji["b"],VSheet:Ur["a"],VTextField:Li["a"],VTreeview:Mo["a"]});var vl={name:"Builder",components:{BuilderGroup:il,BuilderProvisionsSearch:pl},mixins:[ce],props:{clearPropBuilder:{type:Boolean,default:!1},savePropBuilder:{type:Boolean,default:!1},fixItPropBuilder:{type:Boolean,default:!1},updatePropBuilder:{type:Boolean,default:!1}},data:function(){return{questionnaire:null,selectedGroup:null,selectedQuestion:null,questionTypes:ra.QUESTION_TYPES,optionTypes:ra.OPTION_TYPES,optionsCollapsed:!0,validatorTypes:ra.VALIDATOR_TYPES,validatorsCollapsed:!0,dependenciesCollapsed:!0,dependencyGroupTypes:ra.DEPENDENCY_GROUP_TYPES,dependencyValidationActions:ra.DEPENDENCY_VALIDATION_ACTIONS,questions:[],confirmDialogOpen:!1,confirmCallback:null,confirmCallbackArgs:null,violationsCollapsed:!0,provisionsCollapsed:!0,provisions:[],groupPanels:[],questionPanels:[],questionProvisions:[],flagTimer:null,reference:F.REFERENCE,searchProvisions:null}},computed:fl({isRepeatableVisible:function(){return!(!this.selectedGroup||!this.selectedQuestion)&&tn.isParentAGroup(this.selectedGroup,this.selectedQuestion.guid)},displayTextLang:function(){return"eng"===this.lang?"DisplayEnglishText":"DisplayFrenchText"},eng:function(){return b["LANGUAGE"].ENGLISH},fr:function(){return b["LANGUAGE"].FRENCH},filterProvisions:function(){return function(e,t,n){return e[n].indexOf(t)>-1}},selectedQuestionProvisions:function(){var e=[];return this.selectedQuestion.responseOptions.forEach((function(t){e=e.concat(t.provisions)})),e}},Object(x["d"])(fl({group:function(e){return e&&e.group?e.group:[{groups:[]}]},lang:function(e){return e&&e.settings?e.settings.settings.lang:b["LANGUAGE"].ENGLISH}},Object(x["c"])(["getFlatListOfAllQuestions"])))),watch:{clearPropBuilder:function(){this.clearQuestionnaire()},savePropBuilder:function(){this.save()},fixItPropBuilder:function(){this.fixit()},updatePropBuilder:function(){this.updateQuestionnaire()}},mounted:function(){var e=Object(h["a"])(regeneratorRuntime.mark((function e(){var t,n,i=this;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(this.$store.subscribe((function(e,t){switch(e.type){case"setQuestionnaire":i.questionnaire=t.questionnaire.questionnaire,i.questions=i.getFlatListOfAllQuestions(),i.$store.dispatch("objectstate/UpdateQuestionnaireState",G.a.cloneDeep(i.questionnaire));break;case"setTreeLegislations":i.provisions=i.$store.state.legislations.legislations;break;default:break}})),t=null,!this.envDev||!this.loadLocalData){e.next=15;break}if(this.$store.getters.getModifiedinBuilder){e.next=11;break}return n=Object({NODE_ENV:"production",VUE_APP_I18N_FALLBACK_LOCALE:"en",VUE_APP_I18N_LOCALE:"en",VUE_APP_LOAD_LOCAL_DATA:"false",BASE_URL:""}).VUE_APP_TEMPLATE_TO_LOAD,e.next=7,tn.GetMockQuestionnaireFromImportModule(n);case 7:t=e.sent,this.$store.dispatch("SetQuestionnaireState",{questionnaire:t,page:"builder"}),e.next=13;break;case 11:t=this.$store.getters.getQuestionnaire,this.$store.dispatch("SetQuestionnaireState",{questionnaire:t,page:"builder"});case 13:e.next=17;break;case 15:t=tn.createQuestionnaire(),this.$store.dispatch("SetQuestionnaireState",{questionnaire:t,page:"builder"});case 17:this.envDev&&this.$store.dispatch("SetTreeLegislationsStateToLocalData"),this.$store.dispatch("InitializeSearchableProvisionRef"),this.isDirty();case 20:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}(),methods:{isDirty:function(){var e=this;this.$root.$children[0].isFormDirty=0!==G.a.differenceWith([this.questionnaire],this.$store.state.objectstate.data.questionnaire,G.a.isEqual).length,this.flagTimer=setTimeout((function(){return e.isDirty()}),3e3),this.$root.$children[0].isFormDirty&&clearTimeout(this.flagTimer)},addGroup:function(){this.questionnaire.groups.push(tn.createGroup(this.questionnaire.groups.length))},confirmed:function(){this.confirmDialogOpen=!1,this.confirmCallback.apply(this,this.confirmCallbackArgs)},confirmRemoveGroup:function(e){this.confirmDialogOpen=!0,this.confirmCallback=this.removeGroup,this.confirmCallbackArgs=[e]},removeGroup:function(e){for(var t=0;t<this.questionnaire.groups.length;t++)if(this.questionnaire.groups[t]===e){this.questionnaire.groups.splice(t,1),this.selectedGroup===e&&(this.selectedGroup=null);break}},changeQuestionType:function(e){var t,n,i=this;if(this.selectedQuestion.type===F.REFERENCE){var r=tn.findGroupForQuestionById(this.questionnaire.groups,this.selectedQuestion.guid);if(r)if(tn.findReferenceQuestion(r,this.selectedQuestion.guid))this.$store.dispatch("toast/show",{text:"Only one Reference question is allowed on a Group",color:"error",timeout:5e3}),this.selectedQuestion.type=F.TEXT;else{var o=tn.createReferenceQuestion(r);r.questions.length>0&&r.questions.forEach((function(e){e.sortOrder+=1})),r.questions.unshift(o);var s=r.questions.findIndex((function(e){return e.guid===i.selectedQuestion.guid}));s>-1&&(r.questions.splice(s,1),r.expansionPanels=[],r.questions.forEach((function(e){r.expansionPanels.push(e.sortOrder)})),this.selectedQuestion=o)}else this.$store.dispatch("toast/show",{text:"A Reference question is only allowed on a Group Top Level, not as a Child Question",color:"error",timeout:5e3}),this.selectedQuestion.type=F.TEXT}if(this.selectedQuestion.responseOptions=[],this.selectedQuestion.type===F.RADIO)this.selectedQuestion.responseOptions.push(tn.createResponseOption(1,(t={},Object(g["a"])(t,b["LANGUAGE"].ENGLISH,"Yes"),Object(g["a"])(t,b["LANGUAGE"].FRENCH,"Oui"),t),"true")),this.selectedQuestion.responseOptions.push(tn.createResponseOption(2,(n={},Object(g["a"])(n,b["LANGUAGE"].ENGLISH,"No"),Object(g["a"])(n,b["LANGUAGE"].FRENCH,"Non"),n),"false"));else if(this.selectedQuestion.type===F.SELECT){var a,l;this.selectedQuestion.responseOptions.push(tn.createResponseOption(1,(a={},Object(g["a"])(a,b["LANGUAGE"].ENGLISH,"Option 1"),Object(g["a"])(a,b["LANGUAGE"].FRENCH,"Option 1"),a),"1")),this.selectedQuestion.responseOptions.push(tn.createResponseOption(2,(l={},Object(g["a"])(l,b["LANGUAGE"].ENGLISH,"Option 2"),Object(g["a"])(l,b["LANGUAGE"].FRENCH,"Option 2"),l),"2"))}else this.selectedQuestion.responseOptions.push(tn.createResponseOption(1,null,""))},addQuestion:function(e,t){e.stopPropagation();var n=tn.createQuestion(t);t.questions.length>0&&(n.sortOrder=+t.questions.reduce((function(e,t){return e.sortOrder>t.sortOrder?e:t})).sortOrder+1),t.questions.push(n),this.addQuestionToIndex(n),this.selectedGroup=t},addQuestionToIndex:function(e){this.questions.push(e),this.editQuestion(null,e)},confirmRemoveQuestion:function(e,t){this.confirmDialogOpen=!0,this.confirmCallback=this.removeQuestion,this.confirmCallbackArgs=[e,t]},removeQuestion:function(e,t){this.selectedQuestion===t&&(this.selectedQuestion=null);for(var n=0;n<e.questions.length;n++)if(e.questions[n]===t){e.questions.splice(n,1);break}this.onRemovedQuestionFromIndex(t),t.type===F.REFERENCE&&e.questions.length>0&&e.questions.forEach((function(e){e.sortOrder-=1}))},onRemovedQuestionFromIndex:function(e){this.selectedQuestion===e&&(this.selectedQuestion=null);for(var t=0;t<this.questions.length;t++)if(this.questions[t]===e){this.questions.splice(t,1);break}},getTitle:function(e){return e.title[this.lang]},editGroup:function(e,t){this.selectedGroup=t,this.selectedQuestion=null},editQuestion:function(e,t){this.selectedGroup=e,this.selectedQuestion=t},clearQuestionnaire:function(){this.questionnaire=tn.createQuestionnaire(),this.save()},save:function(){if(this.questionnaire){var e="builder",t=this.questionnaire;this.$store.dispatch("SetQuestionnaireState",{questionnaire:t,page:e}),this.$store.dispatch("SetModifiedInBuilder",!0)}},fixit:function(){this.questionnaire=tn.fixTemplate(this.questionnaire),this.save()},updateQuestionnaire:function(){this.questionnaire=tn.updateTemplate(this.questionnaire),this.save()},addResponseOption:function(){var e=this.selectedQuestion.responseOptions.length,t=tn.createGenericResponseOption();t.sortOrder=e+1,t.value=e+1,this.selectedQuestion.responseOptions.push(t)},toggleOptions:function(){this.optionsCollapsed=!this.optionsCollapsed},removeResponseOption:function(e){var t=this.selectedQuestion.responseOptions.findIndex((function(t){return t.guid===e.guid}));t>-1&&this.selectedQuestion.responseOptions.splice(t,1)},addValidator:function(){var e=tn.createGenericValidationRule();this.selectedQuestion.validationRules.push(e)},removeValidator:function(e){var t=this.selectedQuestion.validationRules.findIndex((function(t){return t.guid===e.guid}));t>-1&&this.selectedQuestion.validationRules.splice(t,1)},toggleValidators:function(){this.validatorsCollapsed=!this.validatorsCollapsed},toggleDependencies:function(){this.dependenciesCollapsed=!this.dependenciesCollapsed},addDependencyGroup:function(){var e=tn.createDependencyGroup();this.selectedQuestion.dependencyGroups.push(e)},removeDependencyGroup:function(e){var t=this.selectedQuestion.dependencyGroups.findIndex((function(t){return t.guid===e.guid}));t>-1&&this.selectedQuestion.dependencyGroups.splice(t,1)},addQuestionDependency:function(e){var t=tn.createGenericQuestionDependency();e.questionDependencies.push(t)},removeQuestionDependency:function(e,t){var n=e.questionDependencies.findIndex((function(e){return e.guid===t.guid}));n>-1&&e.questionDependencies.splice(n,1)},sortGroups:function(e){this.questionnaire.groups.sort((function(e,t){return e.order-t.order}))},sortQuestions:function(e){e.sortOrder=+e.sortOrder;var t=this.questionnaire.groups.find((function(t){if(t.questions.find((function(t){return t===e})))return t}));if(t)t.questions.sort((function(e,t){return e.sortOrder-t.sortOrder}));else{var n=this.questions.find((function(t){return!!t.childQuestions.find((function(t){return t===e}))}));n.childQuestions.sort((function(e,t){return e.sortOrder-t.sortOrder}))}},onViolationInfoChanged:function(e){null==this.selectedQuestion.violationInfo.matchingType&&(this.selectedQuestion.violationInfo.responseToMatch=null)},toggleViolations:function(){this.violationsCollapsed=!this.violationsCollapsed},updateSearchableProvisions:function(){var e=this.selectedQuestion.guid;this.$store.dispatch("UpdateSearchableProvisionsState",{provisions:this.selectedQuestionProvisions,questionGuid:e})}}},ml=vl,hl=(i("8e58"),i("ac7c")),gl=Object(_["a"])(ml,Js,Ws,!1,null,"1b2e0fa6",null),bl=gl.exports;P()(gl,{VBtn:R["a"],VCard:bt["a"],VCardActions:Ji["a"],VCardTitle:Ji["c"],VCheckbox:hl["a"],VCol:rt["a"],VDialog:Wi["a"],VExpansionPanel:yo["a"],VExpansionPanelHeader:qo["a"],VExpansionPanels:Bo["a"],VIcon:Re["a"],VList:we["a"],VListGroup:be["a"],VListItem:Oe["a"],VListItemContent:ye["a"],VListItemTitle:ye["c"],VRow:st["a"],VSelect:at["a"],VSpacer:qt["a"],VTextField:Li["a"],VTooltip:Br["a"]}),f["a"].use(vi["a"]);var Ol=new vi["a"]({mode:"history",routes:[{path:"/",name:"home",component:Si},{path:"/questionnaire",name:"questionnaire",component:Cs},{name:"builder",path:"/builder",components:{default:bl}},{path:"*",component:Oi}]}),yl=(i("289e"),i("c894"));i("aede");f["a"].use(yl["a"]),f["a"].config.productionTip=!1,Et.store=pi,Et.vuetify=fi,Et.i18n=pn,Et.router=Ol,Et.displayNav=!1,f["a"].customElement("questionnaire-builder",Et)},"5d92":function(e,t,n){},"5fb0":function(e,t,n){n("dca8"),e.exports=Object.freeze({LANGUAGE:{ENGLISH:"en",FRENCH:"fr"}})},6928:function(e,t,n){"use strict";var i=n("4b94"),r=n.n(i);r.a},"69e6":function(e,t,n){"use strict";var i=n("edee"),r=n.n(i);r.a},"7d68":function(e,t,n){"use strict";var i=n("9fee"),r=n.n(i);r.a},"82ac":function(e,t,n){},"8a23":function(e,t,n){},"8e58":function(e,t,n){"use strict";var i=n("5083"),r=n.n(i);r.a},"9fee":function(e,t,n){},a910:function(e,t,n){},aede:function(e,t,n){},b0b2:function(e,t,n){},d7ff:function(e,t,n){"use strict";var i=n("b0b2"),r=n.n(i);r.a},db49:function(e,t,n){n("dca8"),e.exports=Object.freeze({MAX_IMAGE_UPLOADS_PER_ANSWER:5,LANGUAGES:[{text:"English",value:"en"},{text:"Francais",value:"fr"}]})},e39b:function(e,t,n){"use strict";var i=n("26fc"),r=n.n(i);r.a},eca1:function(e,t,n){},edd4:function(e){e.exports=JSON.parse('{"app":{"bottom-navigation":{"navigation":"Navigation","collaspe":"Collaspe All","expand":"Expand All","scrollUp":"Scroll Up","validate":"Validate","lockData":"Lock Data","unlockData":"Unlock Data"},"settings":{"darkMode":"Dark mode","language":"Language","settings":"Settings"},"navigations":{"home":"Home","questionnaire":"Questionnaire","builder":"Builder","qFromDynamics":"Questionnaire pulling from dynamics","qFromState":"Questionnaire pulling from state"},"builder":{"fix":"fix it","noGroups":"Click Add Group to start creating a new Questionnaire!","loading":"Loading...","save":"Save","clear":"Clear","questionnaireName":"Questionnaire Name","questionName":"Question Name","sortOrder":"Sort Order","internalComments":"Internal Comments","externalComments":"External Comments","file":"File(s)","picture":"Picture(s)","isRepeatable":"Is Repeatable?","visibleByDefault":"Visible by default","question":{"questionType":"Question Type","samplingAllowed":"Allow Sampling Record?","englishText":"Question English Text","frenchText":"Question French Text"},"responseOptions":{"englishText":"Response Option English Text","frenchText":"Response Option French Text","responseOptions":"Response Options","sortOrder":"Sort Order","value":"Value","removResponseoption":"Remove response option","provisions":{"provisions":"Provisions","search":"Search"},"addOption":"Add Option"},"validators":{"validator":"Validator","validators":"Validators","name":"Name","enabled":"Enabled","type":"Type","removeValidator":"Remove Validator","addValidator":"Add Validator","englishMessage":"English Message","frenchMessage":"French Message"},"dependsOn":{"dependsOn":"Depends On","type":"Type","question":"Question","tobe":"to be","to":"to","addQuestion":"Add Question","removDependencyGroup":"Remove dependency group","addDependencyGroup":"Add Dependency Group"},"group":{"englishText":"Group English Text","frenchText":"Group French Text","addGroup":"Add Group","removeGroup":"Remove Group","groupName":"Group Name","delete":"Delete ?","yes":"Yes","no":"No","question":{"addQuestion":"Add Question","removeQuestion":"Remove Question","addChildQuestion":"Add Child Question","delete":"Delete ?","yes":"Yes","no":"No"}}},"questionnaire":{"noSearchResults":{"noMatchedQuestions":"Sorry, no questions matching the provision search criteria.","searchSuggestions":"Search Suggestions","checkSpelling":"Check your spelling","moreGeneralWords":"Try more general words","searchByProvisionLabel":"Search by provision label (Example: \\"3.5 (1) (c)\\")","selectSuggestion":"Select a provision from the list of suggestions","clearSearch":"Clear Search"},"provisionSearchFilter":{"placeholder":"Quickly find questions based on related provision","exampleText":"For example search by provision label or text (Example: \\"3.5 (1) (c)\\")"},"siteFilter":{"title":"Site Filter"},"navigation":{"title":"Questionnaire Navigation"},"validate":"Validate","errors":" 0 errors found |1 error found | {count} errors found","group":{"repeatGroup":"Repeat Group","deleteGroup":"Delete Group","question":{"referenceId":"Reference ID","referenceIdPlaceHolder":"Enter Reference ID","ok":"Ok","cancel":"Cancel","continue":"Continue","deleteFileConf":"Delete File","deleteFile":"Are you sure you want to delete this file?","delete":"Delete","unselectProvisions":"Selecting a different response will remove any selected Provisions and their associated evidence. Are you sure you want to change responses?","violationCount":"Violation Count","violationCountPlaceHolder":"Enter number of violations","externalComment":"External Comment","externalCommentInfo":"External comments will be available to the public","internalComment":"Internal Comment","internalCommentInfo":"Internal comments will only be made available to internal stakeholders","commentRequired":"Comment Required","commentOptional":"Comment Optional","photos":"Photos","supplementaryFile":{"label":"Files","fileRequired":"File Required","fileOptional":"File Optional","uploadedFiles":"Uploaded Files","fileTitle":"Title:","fileComment":"Comment:","fileUploaded":"Uploaded:","fileUploadedBy":"Uploaded by:","editFile":"Edit Title/Comment","deleteFile":"Delete File","downloadFile":"Download File","uploading":"Uploading..."},"supplementaryInformation":"Supplementary Information","violationDetails":"Violation Details","CiteViolations":"Cite Violations","repeatable":{"repeatQuestion":"Repeat this question","deleteQuestion":"Delete this repeated question","copyNo":"Copy #","repeatedQuestion":"Repeated question"},"sampling":{"title":"Sampling Record","approximateTotal":"Approximate Total","sampleSize":"Sample Size","nonCompliances":"Violation count","approximateTotalPlaceholder":"Please enter the approximate total of items","sampleSizePlaceholder":"Please enter the Size of the Sample","nonCompliancesPlaceholder":"Please enter the Violation count","samplingTooltip":"Sampling Record","EM_ApproximateTotalRequired":"Approximate Total is required","EM_ApproximateTotalGreaterThan1":"Approximate Total have to be greater than 1","EM_SampleSizeRequired":"Sample Size is required","EM_SampleSizeGreaterThan1":"Sample Size have to be greater than 1","EM_NonComplianceRequired":"Violation count is required","EM_NonComplianceGreaterPositive":"Violation count have to be 0 or greater than 0"}}},"expandAll":"Expand All","collapseAll":"Collapse All"},"general":{"active":"Active","inactive":"Inactive","true":"True","false":"False"},"notifications":{"question":"A valid response for the question is required.","isRequired":" is required.","internalComment":"Internal Comment for the response type {type} is required","externalComment":"External Comment for the response type {type} is required ","file":"A File for the response type {type} ","picture":"A Picture for the response type {type}","header":"Question: {text}"}}}')},edee:function(e,t,n){},f693:function(e){e.exports=JSON.parse('{"app":{"bottom-navigation":{"navigation":"Navigation","collaspe":"Tout réduire","expand":"Développer tout","scrollUp":"Monter","validate":"Valider","lockData":"Fermer","unlockData":"Ouvert"},"settings":{"darkMode":"mode sombre ","language":"Langue","settings":"Paramètres"},"navigations":{"home":"Acceuil","questionnaire":"Questionnaire","builder":"Logiciel de construction","qFromDynamics":"Questionnaire à partir de la dynamique","qFromState":"Questionnaire à partir de l\'état"},"builder":{"fix":"Correcter","noGroups":"Cliquer Nouveau Group afin de créer un nouveau questionnaire!","loading":"Chargement...","save":"Enregistrer","clear":"Effacer","questionnaireName":"Nom du questionnaire","questionName":"Nom du question","sortOrder":"Ordre du triage","internalComments":"Commentaires internes","externalComments":"Commentaires externes","file":"FR File(s)","picture":"Photo(s)","isRepeatable":"Reproductible?","visibleByDefault":"Visible par défaut","question":{"questionType":"Type de Question","samplingAllowed":"Permettre l\'enregistrement de d\'échantillonnage?","englishText":"Question texte anglais","frenchText":"Question texte francais"},"responseOptions":{"englishText":"Option de réponse Texte anglais","frenchText":"Option de réponse Texte francais","responseOptions":"Options de réponse","sortOrder":"Ordre du triage","value":"Valeur","removResponseoption":"Supprimer l\'option de réponse","provisions":{"provisions":"Provisions","search":"Recherche"},"addOption":"Ajouter une option"},"validators":{"validator":"Validateur","validators":"Validateurs","name":"Nom","enabled":"Activé","type":"Type","removeValidator":"Supprimer Validateur","addValidator":"Ajouter Validateur","englishMessage":"Message en anglais","frenchMessage":"Message en francais"},"dependsOn":{"dependsOn":"Dépend de","type":"Type","question":"Question","tobe":"sera","to":"à","addQuestion":"Ajouter une question","removDependencyGroup":"Supprimer la dépendance de groupe","addDependencyGroup":"Ajouter un groupe de dépendances"},"group":{"englishText":"Texte anglais du groupe","frenchText":"Texte francais du groupe","addGroup":"Ajouter un groupe","removeGroup":"Supprimer un groupe","groupName":"Nom du groupe","delete":"Supprimer ?","yes":"Oui","no":"Non","question":{"addQuestion":"Ajouter une question","removeQuestion":"Supprimer une question","addChildQuestion":"Ajouter une question secondaire","delete":"Supprimer ?","yes":"Oui","no":"Non"}}},"questionnaire":{"noSearchResults":{"noMatchedQuestions":"Désolé, aucune question ne correspond aux critères de recherche de disposition.","searchSuggestions":"Suggestions de recherche","checkSpelling":"Vérifie ton orthographe","moreGeneralWords":"Essayez des mots plus généraux","searchByProvisionLabel":"Recherche par provision (Exemple: \\"3.5 (1) (c)\\")","selectSuggestion":"Sélectionnez une disposition dans la liste des suggestions","clearSearch":"Effacer la recherche"},"provisionSearchFilter":{"placeholder":"Trouvez rapidement des questions basées sur la disposition associée","exampleText":"Par exemple, recherchez par libellé ou texte de disposition (Exemple: \\"3.5 (1) (c)\\")"},"siteFilter":{"title":"Filtre de site"},"navigation":{"title":"Navigation dans le questionnaire"},"validate":"Valider","errors":" 0 erreurs trouvées |1 erreur trouvée | {count} erreurs trouvées","group":{"repeatGroup":"Répéter le Groupe","deleteGroup":"Supprimer le Groupe","question":{"referenceId":"ID de la Référence","referenceIdPlaceHolder":"Enterer ID de la référence","ok":"Ok","cancel":"Annuler","continue":"Continuer","deleteFileConf":"Supprimer le fichier","deleteFile":"Êtes-vous sûr de vouloir supprimer ce fichier?","delete":"Êtes-vous sûr de vouloir supprimer ce fichier?","unselectProvisions":"La sélection d\'une réponse différente supprimera toutes les provisions sélectionnées et leurs preuves associées. Êtes-vous certain de vouloir changer de réponse?","violationCount":"Nombre d\'infractions","violationCountPlaceHolder":"Entrer le nombre d\'infractions","externalComment":"Commentaire externe","externalCommentInfo":"Les commentaires externes seront disponibles au public","internalComment":"Commentaire interne","internalCommentInfo":"Les commentaires internes seront disponibles aux intervenants à l\'interne seulement","commentRequired":"Commentaire obligatoire","commentOptional":"commentaire facultatif","photos":"Photos","supplementaryFile":{"label":"Ficher","fileRequired":"Fichier requis","fileOptional":"Fichier facultatif","uploadedFiles":"Fichiers téléchargés","fileTitle":"Titre:","fileComment":"Commenter:","fileUploaded":"Téléchargé:","fileUploadedBy":"FR Uploaded by:","editFile":"Modifier le titre / commentaire","deleteFile":"Supprimer le fichier","downloadFile":"Télécharger un fichier","uploading":"Téléchargement..."},"supplementaryInformation":"Informations supplémentaires","violationDetails":"Détails de la violation","CiteViolations":"Citer les violations","repeatable":{"repeatQuestion":"Répéter cette question","deleteQuestion":"Supprimer cette question répétée","copyNo":"Numéro de copie ","repeatedQuestion":"Question répétée"},"sampling":{"title":"Enregistrement d\'échantillonnage","approximateTotal":"Total estimé","sampleSize":"Taille de l\'échantillon","nonCompliances":"Non-conformités","approximateTotalPlaceholder":"SVP entrer le nombre approximatif d\'items","sampleSizePlaceholder":"SVP entrer la taille de l\'échantillon","nonCompliancesPlaceholder":"SVP entrer le nombre de non-conformités","samplingTooltip":"Enregistrement d\'échantillon","EM_ApproximateTotalRequired":"Un total approximatif est obligatoire","EM_ApproximateTotalGreaterThan1":"Total approximatif doit être supérieur à 1","EM_SampleSizeRequired":"Une taille d\'échantillon est obligatoire","EM_SampleSizeGreaterThan1":"La taille de l\'échantillon doit être supérieure à 1","EM_NonComplianceRequired":"Nombre de non-conformités obligatoire","EM_NonComplianceGreaterPositive":"Nombre de non-conformités doit être supérieur ou égal à 0"}}},"expandAll":"Tout développer","collapseAll":"Tout comprimer"},"general":{"active":"Activé","inactive":"Inactivé","true":"Vrai","false":"Faux"},"notifications":{"question":"Une réponse valide à la question est requise.","isRequired":" est requis.","internalComment":"Commentaire interne pour le type de réponse {type} est requis","externalComment":"Commentaire externe pour le type de réponse {type} est requis ","file":"Un fichier pour le type de réponse {type}","picture":"Une image pour le type de réponse {type}","header":"Question: {text}"}}}')}});